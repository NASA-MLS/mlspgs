#	Makefile
# Copyright (c) 1999, California Institute of Technology.  ALL RIGHTS RESERVED.
# U.S. Government Sponsorship under NASA Contract NAS7-1407 is acknowledged.

# Details and a general explanation of how to use this file can be found
# by entering
#	README.name_of_this_file
#    (where of course for name_of_this_file use the name of this file)

# ---------------------- The name of this file (is the right-hand-side below)
MakeFName = MakeFC
# If the right-hand-side is not Makefile
# then to make mls with this file you must instead  of bare "make" use
#     make -f $(MakeFName)

# The name of this file must be used in each of $(SUBDIRS)
# i.e., if you are calling make with a different Makefile name,
#        say: make -f MakeFC
# then (re)name the Makefiles in /l2 /lib etc. also MakeFC

# "$Id$"

# ------------------- Automatic internalcleanup
# We use COPY_NUMBER to keep track of the number of times
# the functional targets update or depends are "built", i.e. performed
# every tenth time an internalcleanup is automatically performed

# This is how big COPY_NUMBER may grow before being reset
# ---> and triggering internalcleanup <---
# (formerly 10)
MAX_COPIES = 4
ONE = 1

# This keeps track of the number of times MakeFC -> Makefile
USE_internal_copynum = no

ifeq ($(USE_internal_copynum),yes)
	COPY_NUMBER = 1
else
	COPY_NUMBER := $(shell echo srclib/Make.dep.* | wc -w)
endif

NEXT_COPY := $(shell expr $(COPY_NUMBER) + 1)

# ---------------------- Paths to special directories
# This is where this Makefile is located
# Also beginning path for all relative paths defined below; e.g. CONFDIR
# This assumes therefore that you have summoned this via
#    cd $(MLSHOME)
#    make
# otherwise the following definition will fail
# You might try something like
#    make -f mlspgs/Makefile MLSHOME=$HOME/mlspgs
# but this has not been tested.
# Anyway, why would you want to
# make things more difficult?
MLSHOME := $(shell pwd)

# where to store .configure; 
# also where to install mls programs by default
CONFDIR=.

ifdef MLSINSTALLDIR
   INSTALLDIR=$(MLSINSTALLDIR)
else
   INSTALLDIR=$(CONFDIR)/bin/$(MLSCONFG)
endif

# where configure and makemakedep.sh are stored
MLSBIN=util

# where the platforms directory is w.r.t. each of SUBDIRS:
# "." means for l2 it is l2/platforms
# also where each uniquely-named sub-sub will be created:
# "." means for l2 it is l2/NAG.Linux
PLATFORMS = .

# This is the default name of the configure file
# It may be overridden for multiple platforms, special options, etc.
ifdef HOSTMLSCFILE
   MLSCFILE=$(HOSTMLSCFILE)
else
   MLSCFILE=.configure
endif

# This will set our MLS platform, compiler. etc.
# w/o complaining if it does not exist yet
-include $(CONFDIR)/$(MLSCFILE)

SHELL = /bin/sh

# --------------- MakeFC help
# Usage: make target SETTING=value
# Special 1st time usage (assuming no .configure file)
#    make -f MakeFC update

# --------------- Target definitions
#            (code sub-directories of mlspgs excluding util, sandbox)
# $LEVELS        -- automatic; built when target is not specified
#                   (for current value see below)
# .configure     -- automatic (if not yet extant; prerequisite for everything else)
#                    (its name by default; actual value stored in MLSCFILE)
# $OTHER_SUBDIRS -- not automatic
# all            -- all the sub-directories: $LEVELS + $OTHER_SUBDIRS + lib
# subdirs        -- same as all
# lib            -- libmls.a; a prerequisite for the others

#                           (functional)
# mostlyclean    -- deletes uniquely-named sub-sub-directories
# clean          -- deletes only *.o, *.mod from sub-subs
# configure      -- runs mlsconfigure to (re)set compiler, platform, paths
#                   (invoked automatically if .configure not found)
# configure_pvm  -- (re)set PVM and FFTW paths
# configure_fopts  -- (re)set default FOPTS and LDOPTS
# configure_full  -- does same as running all of above three
# configure_help -- prints some info on how to configure the build
# configure_subdirs
#                  also (re)creates uniquely-named sub-sub-directories
#                  within mlspgs sub-directories with customized Makefiles
#                  where *.o, *.mod, lib*.a, mlsl*, etc. built
# depends        -- runs makemakedep.sh to calculate dependencies
# ghostbuster    -- removes orphaned .o, .mod files from uniquely-named ssds
#                   also deletes haunted library files
# help           -- prints some info on how to build the mls software
# disthelp       -- prints README.MakeFC--a long file
# install        -- mv programs mlsl* from sub-subs to INSTALLDIR
#                    also create shell scripts in INSTALLDIR for each program
# makefile       -- allows you to summon this custom Makefile with shorter
#                    "make" rather than "make -f $(MakeFName)"
# update         -- replaces customized Makefiles with latest versions
#                    also recalculates dependenencies, removes orphaned .o, .mod
#
#    The following are useful if you stored multiple configurations
#     besides current one
# clean_config   -- deletes the sub-subs "name"d in MLSCONFG="name" on command-line
#                    e.g., make clean_config MLSCONFG=NAG.Sun
# distclean      -- deletes every configuration
#
#     The following are useful for distributing all or portions of the archive
#    If the target is entered exactly as shown below, the
#    resulting archive will be an uncompressed .tar file; but with:
#    a "z" suffix, e.g. "tarz" -- use gzip to compress -> .tgz
#    a "g" suffix, e.g. "targ" -- assume GNU tar compress -> .tgz
#
# disttar        -- creates an archive of whole mlspgs
# tar            -- creates archive of mlspgs suitable for SIPS
#                  (see EVERYTHING variable)
# substar        -- creates separate archives of subdirs; then tar them
#                   (also util, notes and srclib are tarred up in this case)

# --------------- SETTING definitions
# FOPTS              Override default compiler option; note that you must
#                    use only legal options
# LDOPTS             Override default (blank) loader option; note that you must
#                    use only legal options
# PVM_ROOT           Path to the root of the pvm libraries; note that they
#                    must then be named \$PVM_ROOT/\$PVM_ARCH/lib*.a;
# PVM_ARCH           (see above)
# FFTW_ROOT          Path to the FFTW library; required for mlsl3
#
# The following cannot be set by configure_full
# BLAS               Path to an external blas library; note that the library
#                    must then be named \$BLAS/libblas.a
# TAR                Overrides name of tar command; e.g. path to GNU tar 
#                    in case your tar won't gzip for targets *targ
# FAFTER             Appears at the end of each line invoking the compiler
#                    e.g., for post-processing to highlight warnings and errors
#                    make FAFTER='2>&1 | hl'  # see util/hl.c for the source    
# LAFTER             Appears at the end of the very long link statement
# FC                 Overrides the name by which the Fortran compiler is called
# CC                 Overrides the name by which the c compiler is called
#
# --------------- End MakeFC help

#             internal targets
# Note that the above list of targets is supplemented by
# internal targets. They are not usually explicitly
# named on the make line (though it is legal to do so, of course)

# internalsaymake    Copy or link MakeFC to Makefile (so you can just say make)
# internalcleanup    Remove old Make.dep.nn files
# internaladd_copy   Print notice that (previous value) of COPY_NUMBER increment
# internaldepends    Recalculates dependencies
# internalupdate     Updates the Makefile in each MLSCONFG; then internaldepends
# internalreset_copy Resets COPY_NUMBER to 0
# internalmftests    internalsaymake just for directories under tests

#----------------------------------------------------------
# LEVELS is the list of automatic targets; i.e.
# they will be built when no target is specified
# by entering

# make
#
#          Default levels

LEVELS = l1 l2 l3 l3m
#----------------------------------------------------------

#-----------------------

# OTHER_SUBDIRS are *not* built automatically:
# you must either name them individually, or use the "all" target
OTHER_SUBDIRS = fwdmdl cloudfwdm
#         All the subdirectories

#You may build all the subdirectories via the "all" target; i.e.,
#by entering

# make all

SUBDIRS = lib $(LEVELS) $(OTHER_SUBDIRS)

# This isn't really everything, just everything the SIPS might need
# so it will be bundled up by tar
# Note that it does *not* include the Toolkit nor PVM nor FFTW 
# because they are outside mlspgs
EVERYTHING = $(SUBDIRS) util blas srclib pcf idllib sids tables notes\
   $(MakeFName) README.$(MakeFName) BEFORE.mls
     
# This is in case tar doesn't summon GNU tar, you may still use it via
# something like
#    make tar_sips TAR=/usr/local/gnu/bin/tar
TAR=tar

# These are all the configurations that will be removed by clean_all
# If it becomes more widely used, I could add Abs.Linux
EVERY_MLSCONFG = LF95.Linux  NAG.Linux  NAG.SGI  NAG.Sun  Unknown.None

tests_sub_dirs := $(shell echo tests/*)

# This determines the command which MakeFC transmits to each of the
# SUBDIRS when you invoke it with "make update":
# likely candidates are "depends" or "depends ghostbuster"
SUBDIRS_UPDATE = depends ghostbuster

# This determines the command by which MakeFC looks like Makefile
# Choose either "link" or "copy"; warning--link has caused cvs probs
# so recommend leaving it copy
LOOKS_LIKE_MakeFC = copy

ifeq ($(LOOKS_LIKE_MakeFC),copy)
	LOOKS_LIKE_line = cp MakeFC Makefile
else
	LOOKS_LIKE_line = ln -s MakeFC Makefile
endif

#----------------------- Build instructions

# Automatic targets

levels:
	 @for dir in lib $(LEVELS); do \
	  $(MAKE) -f $(MakeFName) -C $$dir; \
	done

$(CONFDIR)/$(MLSCFILE):
	$(MLSBIN)/mlsconfigure -dc "$(CONFDIR)" -pc "$(PLATFORMS)" \
          -c "$(MLSF95)" -cf "$(MLSCFILE)" -p "$(MLSPLAT)" -pv -fl
	$(MAKE) -f $(MakeFName) internalsaymake internalmftests

# Targets that must be named explicitly

$(LEVELS):
	$(MAKE) -f $(MakeFName) -C $@

$(OTHER_SUBDIRS):
	$(MAKE) -f $(MakeFName) -C $@

all subdirs:
	 @for dir in $(SUBDIRS); do \
	  $(MAKE) -f $(MakeFName) -C $$dir; \
	done

lib:
	$(MAKE) -f $(MakeFName) -C $@

#              (functional)

mostlyclean:
	@echo "Cleaning $(SUBDIRS)"; \
	 for dir in $(SUBDIRS); do \
	  $(MAKE) -f $(MakeFName) -C $$dir mostlyclean; \
	done
	@$(MAKE) -f $(MakeFName) internalcleanup ; \

clean:
	@echo "Cleaning objects from $(SUBDIRS)"; \
	 for dir in $(SUBDIRS); do \
	  $(MAKE) -f $(MakeFName) -C $$dir clean; \
	done
	@$(MAKE) -f $(MakeFName) internalcleanup ; \

configure:
	$(MLSBIN)/mlsconfigure -dc "$(CONFDIR)" -pc "$(PLATFORMS)" \
          -c "$(MLSF95)" -cf "$(MLSCFILE)" -p "$(MLSPLAT)"
	@$(MAKE) -f $(MakeFName) update

configure_pvm:
	$(MLSBIN)/mlsconfigure -dc "$(CONFDIR)" -pc "$(PLATFORMS)" \
          -c "$(MLSF95)" -cf "$(MLSCFILE)" -p "$(MLSPLAT)" -nc -pv
	@$(MAKE) -f $(MakeFName) update

configure_fopts:
	$(MLSBIN)/mlsconfigure -dc "$(CONFDIR)" -pc "$(PLATFORMS)" \
          -c "$(MLSF95)" -cf "$(MLSCFILE)" -p "$(MLSPLAT)" -nc -fl
	@$(MAKE) -f $(MakeFName) update

configure_full:
	$(MLSBIN)/mlsconfigure -dc "$(CONFDIR)" -pc "$(PLATFORMS)" \
          -c "$(MLSF95)" -cf "$(MLSCFILE)" -p "$(MLSPLAT)" -pv -fl
	@$(MAKE) -f $(MakeFName) update

configure_help:
	$(MLSBIN)/mlsconfigure -dc "$(CONFDIR)" -pc "$(PLATFORMS)" \
          -c "$(MLSF95)" -cf "$(MLSCFILE)" -p "$(MLSPLAT)" -help

configure_subdirs:
	@echo "Configuring $(SUBDIRS)"; \
	 for dir in $(SUBDIRS); do \
		cd $$dir ; \
		../$(MLSBIN)/mlsconfigure -dc "../$(CONFDIR)" -pc "$(PLATFORMS)" \
          -c "$(MLSF95)" -cf "$(MLSCFILE)" -p "$(MLSPLAT)" -nc; \
		cd .. ; \
	done

depends:
	@if [ $(COPY_NUMBER) -lt $(MAX_COPIES) ] ; then \
		$(MAKE) -f $(MakeFName) internaladd_copy ; \
	else  \
		echo "Resetting copy number from  $(COPY_NUMBER) to 1"; \
		$(MAKE) -f $(MakeFName) internalcleanup ; \
	fi
	@$(MAKE) -f $(MakeFName) internaldepends

help:
	@sed -n '/'$(MakeFName)' help/,/End '$(MakeFName)' help/ p' $(CONFDIR)/MakeFC \
		| sed -n 's/^..//p'

disthelp:
	$(CONFDIR)/README.MakeFC

install:
#prog in l3 now named mlsl3d
	@echo "Installing programs from $(LEVELS) into $(INSTALLDIR)"; \
	if [ ! -d $(INSTALLDIR) ] ; then \
	   $(MLSBIN)/mkdir_cascade $(INSTALLDIR) ; \
	fi ; \
	for dir in $(LEVELS); do \
	case "$$dir" in \
	"l3") \
			if [ -f $$dir/$(MLSCONFG)/mlsl3d ] ; then \
	         mv $$dir/$(MLSCONFG)/mlsl3d $(INSTALLDIR) ; \
            rm -f $(INSTALLDIR)/mlsl3d.sh ; \
	         sed "s=mlsxxyyzz=mlsl3d=; s=mlsbbiinn=$(INSTALLDIR)=; \
              s=mlshhoommee=$(MLSHOME)=" \
              $(MLSBIN)/mlsprog.sh > $(INSTALLDIR)/mlsl3d.sh ; \
            chmod a+x $(INSTALLDIR)/mlsl3d.sh ; \
			fi ; \
		;; \
	*) \
			if [ -f $$dir/$(MLSCONFG)/mls$$dir ] ; then \
      	  mv $$dir/$(MLSCONFG)/mls$$dir $(INSTALLDIR) ; \
            rm -f $(INSTALLDIR)/mls$$dir.sh ; \
	         sed "s=mlsxxyyzz=mls$$dir=; s=mlsbbiinn=$(INSTALLDIR)=; \
              s=mlshhoommee=$(MLSHOME)=" \
              $(MLSBIN)/mlsprog.sh > $(INSTALLDIR)/mls$$dir.sh ; \
            chmod a+x $(INSTALLDIR)/mls$$dir.sh ; \
			fi ; \
		;; \
	esac ; \
	done
#	 for dir in $(LEVELS); do \
#	  mv $$dir/$(MLSCONFG)/mls$$dir $(CONFDIR) ; \
#	done

makefile:
	@if [ $(COPY_NUMBER) -lt $(MAX_COPIES) ] ; then \
		$(MAKE) -f $(MakeFName) internaladd_copy ; \
	else  \
		echo "Resetting copy number from  $(COPY_NUMBER) to 1"; \
		$(MAKE) -f $(MakeFName) internalcleanup ; \
	fi
	@$(MAKE) -f $(MakeFName) internalsaymake

update:
	@if [ $(COPY_NUMBER) -lt $(MAX_COPIES) ] ; then \
		$(MAKE) -f $(MakeFName) internaladd_copy ; \
	else  \
		echo "Resetting copy number from  $(COPY_NUMBER) to 1"; \
		$(MAKE) -f $(MakeFName) internalcleanup ; \
	fi
	@$(MAKE) -f $(MakeFName) internalupdate

# Useful for cleaning multiple configurations

clean_config:
	@echo "Cleaning $(SUBDIRS) according to configuration $(MLSCONFG)"; \
	 mv $(CONFDIR)/$(MLSCFILE) $(CONFDIR)/temp.configure; \
	 echo "MLSCONFG=$(MLSCONFG)" > $(CONFDIR)/$(MLSCFILE); \
	 $(MAKE) -f $(MakeFName) mostlyclean; \
	 mv $(CONFDIR)/temp.configure $(CONFDIR)/$(MLSCFILE)

distclean:
	@echo "Cleaning configurations $(EVERY_MLSCONFG)"; \
	 for dir in $(EVERY_MLSCONFG); do \
	  $(MAKE) -f $(MakeFName) clean_config MLSCONFG=$$dir; \
	done
	@$(MAKE) -f $(MakeFName) internalcleanup ; \

#For preparing source distributions

disttar:
	@echo "tar-ing the mlspgs distribution"; \
        rm -f ../mlspgs.tar; \
	$(TAR) hcvf ../mlspgs.tar * --exclude $(CONFDIR)/$(MLSCFILE)\
	--exclude CVS\
	--exclude Make.dep\* --exclude [fl]\*/NAG.\* --exclude [fl]\*/LF95.\* \
	--exclude mlsl[0-9]

disttarz: disttar ../mlspgs.tar
	@echo "... then gzipping it"; \
	cd ..; rm -f mlspgs.tgz; gzip mlspgs.tar; mv mlspgs.tar.gz mlspgs.tgz

disttarg:
	@echo "tar-ing the mlspgs distribution with GNUtar -z option"; \
        rm -f ../mlspgs.tgz; \
	$(TAR) hcvzf ../mlspgs.tgz * --exclude $(CONFDIR)/$(MLSCFILE) \
	--exclude CVS\
	--exclude Make.dep\* --exclude [fl]\*/NAG.\* --exclude [fl]\*/LF95.\* \
	--exclude mlsl[0-9]

tar:
	@echo "tar-ing mlspgs for sips"; \
        rm -f ../mlspgs_sips.tar; \
	$(TAR) hcvf ../mlspgs_sips.tar $(EVERYTHING) --exclude CVS\
	--exclude Make.dep\* --exclude [fl]\*/NAG.\* --exclude [fl]\*/LF95.\*

tarz: tar ../mlspgs_sips.tar
	@echo "... then gzipping it"; cd ..; rm -f mlspgs_sips.tgz; \
	gzip mlspgs_sips.tar; mv mlspgs_sips.tar.gz mlspgs_sips.tgz

targ:
	@echo "tar-ing mlspgs for sips"; \
        rm -f ../mlspgs_sips.tgz; \
	$(TAR) hcvzf ../mlspgs_sips.tgz $(EVERYTHING) --exclude CVS \
	--exclude Make.dep\* --exclude [fl]\*/NAG.\* --exclude [fl]\*/LF95.\*

substars:
	@echo "tar-ing $(SUBDIRS)"; \
	 for dir in $(SUBDIRS); do \
	  $(MAKE) -f $(MakeFName) -C $$dir tar; \
	done; \
	echo "tar-ing srclib"; \
        rm -f srclib.tar; \
	$(TAR) hcvf srclib.tar srclib --exclude CVS --exclude Make.dep\*; \
	echo "tar-ing util"; \
        rm -f util.tar; \
	$(TAR) hcvf util.tar util --exclude CVS ; \
	echo "tar-ing notes"; \
        rm -f notes.tar; \
	$(TAR) hcvf notes.tar notes --exclude CVS ; \
	echo "tar-ing *.tar"; \
	rm -f mlspgs_subs.tar

substar: substars
	@echo "... then tarring them";\
	rm -f ../mlspgs_subs.tar ;\
	$(TAR) -cvf ../mlspgs_subs.tar *.tar

substarz: substar ../mlspgs_subs.tar
	@echo "... then gzipping it"; cd ..; rm -f mlspgs_subs.tgz; \
	gzip mlspgs_subs.tar; mv mlspgs_subs.tar.gz mlspgs_subs.tgz

substarg: substars
	@echo "... then GNUtarring them"; \
	rm -f ../mlspgs_subs.tgz ;\
	$(TAR) -cvzf ../mlspgs_subs.tgz *.tar
	
# For internal use

internaladd_copy:
	@echo "MakeFC copy number $(COPY_NUMBER) incremented by 1"

# Automatically called to keep number of files Make.dep.nn under MAX_COPIES
internalcleanup:
	@echo "Automatic housekeeping in ./ $(SUBDIRS) srclib"; \
	 for dir in $(SUBDIRS) srclib; do \
	  cd $$dir; \
		if [ -f Makefile.dep ] ; then \
			rm -f Make.dep.* ;\
		fi ; \
	  cd ..; \
	done
	@echo "Automatic housekeeping in $(tests_sub_dirs)"; \
	 for dir in $(tests_sub_dirs); do \
	 	if [ -d $$dir ] ; then \
	  		cd $$dir; \
			if [ -f Makefile.dep ] ; then \
			rm -f Make.dep.* ;\
			fi ; \
	 		cd ../..; \
		fi; \
	done
	$(MAKE) -f $(MakeFName) internalreset_copy ; \

ghostbuster:
	@echo "Busting ghosts for $(SUBDIRS)"; \
	 for dir in $(SUBDIRS); do \
	  $(MAKE) -f $(MakeFName) -C $$dir ghostbuster; \
	done

internaldepends:
	@echo "Making dependencies for $(SUBDIRS)"; \
	 for dir in $(SUBDIRS); do \
	  $(MAKE) -f $(MakeFName) -C $$dir $(SUBDIRS_UPDATE); \
	done; \
	echo "Making dependencies for srclib"; \
        cd srclib; \
        ../$(MLSBIN)/makemakedep.sh ../lib ../l2; \
        sed 's/OBJS =/srclib_objs =/' Makefile.dep > temp.dep; \
        mv temp.dep Makefile.dep

internalsaymake:
	@echo "Copying or linking MakeFC to Makefile in ./ $(SUBDIRS)"; \
	if [ -f Makefile ] ; then \
		rm -f Makefile.old ;\
		mv Makefile Makefile.old ;\
	fi ; \
	$(LOOKS_LIKE_line)
	 @for dir in $(SUBDIRS); do \
	  cd $$dir; \
		if [ -f Makefile ] ; then \
			rm -f Makefile.old ;\
			mv Makefile Makefile.old ;\
		fi ; \
		$(LOOKS_LIKE_line) ;\
	  cd ..; \
	done

internalupdate: internalsaymake internalmftests
	@echo "Updating the Makefile in $(SUBDIRS)"; \
	 for dir in $(SUBDIRS); do \
		cd $$dir ; \
		../$(MLSBIN)/mlsconfigure -dc "../$(CONFDIR)" -pc "$(PLATFORMS)" \
         -cf "$(MLSCFILE)" -nc -nd; \
		cd .. ; \
	done
#	@$(MAKE) -f $(MakeFName) ghostbuster
	@$(MAKE) -f $(MakeFName) internaldepends

internalreset_copy:
	@echo "MakeFC copy number reset from $(COPY_NUMBER) to 0"

internalmftests:
	@echo "Copying or linking MakeFC to Makefile in $(tests_sub_dirs)"; \
	echo "(and updating the Makefile in each $(MLSCONFG)"; \
	 for dir in $(tests_sub_dirs); do \
	 	if [ -d $$dir ] ; then \
	  		cd $$dir; \
			if [ -f Makefile ] ; then \
				rm -f Makefile.old ;\
				mv Makefile Makefile.old ;\
			fi ; \
			if [ -f MakeFC ] ; then \
				$(LOOKS_LIKE_line) ;\
			fi ; \
		../../$(MLSBIN)/mlsconfigure -dc "../../$(CONFDIR)" -pc "$(PLATFORMS)" \
         -cf "$(MLSCFILE)" -nc -nd; \
	 		cd ../..; \
		fi; \
	done

show_copy:
	@echo "MakeFC copy number $(COPY_NUMBER)"

#----------------------- Bare target dependenciess

$(LEVELS): lib

$(OTHER_SUBDIRS): lib

all: $(SUBDIRS)

subdirs: $(SUBDIRS)

l2: fwdmdl cloudfwdm

l3m: l3

install: all

update:

.PHONY: configure depends subdirs clean mostlyclean clean_config distclean\
  tar substar disttar tarz substarz distarz targ substarg distarg substars\
  all install levels configure_subdirs makefile update\
  configure_pvm configure_fopts configure_full configure_help help disthelp\
  internalcleanup internaldepends internalmftests internalsaymake \
  show_copy ghostbuster\
  $(SUBDIRS)

#---------------------------------------------------------------
# $Log$
# Revision 1.40  2001/07/26 23:09:25  pwagner
# Added MLSINSTALLDIR, INSTALLDIR as destination for install
#
# Revision 1.39  2001/07/25 22:48:20  pwagner
# fixed install target; general housekeeping
#
# Revision 1.38  2001/07/20 00:03:17  pwagner
# Added l3m to LEVELS
#
# Revision 1.37  2001/06/01 20:11:50  pwagner
# Fixed configure_full
#
# Revision 1.36  2001/05/31 23:26:57  pwagner
# Ended role of l2_NEEDS_fwdmdl; cloudfwdm prereq of l2
#
# Revision 1.35  2001/05/30 17:39:18  pwagner
# Added cloudfwdm to OTHER_SUBDIRS
#
# Revision 1.34  2001/05/24 17:14:01  pwagner
# Added notes to EVERYTHING to be tarred up
#
# Revision 1.33  2001/05/14 23:58:42  pwagner
# default .configure name now set by environment
#
# Revision 1.32  2001/05/14 17:37:14  pwagner
# .configure now a variable file name
#
# Revision 1.31  2001/05/01 18:31:07  pwagner
# Automatically update after any configure
#
# Revision 1.30  2001/04/18 22:20:25  pwagner
# Removed dependence of tar on clean_all
#
# Revision 1.29  2001/03/23 21:40:41  pwagner
# Stopped using internal_copy_number
#
# Revision 1.28  2001/03/23 17:12:39  pwagner
# Realized mistake--cvs will corrupt this version
#
# Revision 1.27  2001/03/23 00:39:49  pwagner
# Added internal targets, copy number, etc.
#
# Revision 1.26  2001/03/17 00:56:25  pwagner
# Added new help; makefilesintests
#
# Revision 1.25  2001/03/12 22:46:57  pwagner
# Revised clean, tar; automatic symlink to Makefile
#
# Revision 1.24  2001/03/09 00:18:40  pwagner
# CVS excluded from tar_sips
#
# Revision 1.23  2001/03/08 23:26:41  pwagner
# The effect of no .configure is to configure_full
#
# Revision 1.22  2001/03/08 21:08:01  pwagner
# Tweaked EVERYTHING
#
# Revision 1.21  2001/03/08 20:59:53  pwagner
# Added TAR=... option
#
# Revision 1.20  2001/03/08 00:53:21  pwagner
# l2_NEEDS_fwdmdl now set by default
#
# Revision 1.19  2001/03/05 21:53:26  pwagner
# fwdmdl prerequisite to l2 if l2_NEEDS_fwdmdl
#
# Revision 1.18  2001/03/02 01:06:19  pwagner
# lib part of automatic targets
#
# Revision 1.17  2001/02/27 18:13:37  pwagner
# New help configure_help targets; tweaks to all, subdirs targets
#
# Revision 1.16  2001/02/26 00:28:09  pwagner
# configure_pvm and configure_fopts targets added
#
# Revision 1.15  2001/02/10 00:06:47  pwagner
# update now a target of make -f MakeFC; replaces customized Makefiles with latest versions
#
# Revision 1.14  2001/02/09 21:46:43  pwagner
# Eliminated l2pc from other_subdirs
#
# Revision 1.13  2001/01/23 19:16:26  pwagner
# #-ed out loop over subdirs when configuring
#
# Revision 1.12  2001/01/16 21:31:18  pwagner
# clean_all option added
#
# Revision 1.11  2001/01/13 00:42:09  pwagner
# Mentions mlspgs_sips.tgz and mlspgs_subs.tar
#
# Revision 1.10  2001/01/12 00:30:18  pwagner
# Added tar_sips and install options
#
# Revision 1.9  2001/01/10 23:45:33  pwagner
# General housekeeping
#
# Revision 1.8  2001/01/05 22:55:15  pwagner
# Added all option to build all
#
# Revision 1.7  2000/11/28 00:49:59  pwagner
# configure now configures subdirs
#
# Revision 1.6  2000/11/15 18:22:10  pwagner
# Now can make all of l1 l2 l3
#
# Revision 1.5  2000/11/06 23:26:58  pwagner
# Calculates srclib dependency
#
# Revision 1.4  2000/11/02 23:23:45  pwagner
# clean_objs option now available
#
# Revision 1.3  2000/10/24 21:08:22  pwagner
# Added tar option
#
# Revision 1.2  2000/10/23 17:16:34  pwagner
# Remove extra echo commands
#
# Revision 1.1  2000/10/18 21:57:35  pwagner
# First commit
#
