head	1.3;
access;
symbols
	v5-02-NRT-19:1.3
	v6-00:1.3
	v5-02-NRT-18:1.3
	v5-02:1.3
	v5-01-NRT-17:1.3
	v5-01-NRT-16:1.3
	v5-01-NRT-15:1.3
	v5-01-NRT-14:1.3
	neuralnetworks-1-0:1.3.0.12
	cfm-single-freq-0-1:1.3.0.10
	v5-01:1.3
	v5-00:1.3
	v4-23-TA133:1.3.0.8
	mus-emls-1-70:1.3.0.6
	rel-1-0-englocks-work:1.3.0.4
	VUMLS1-00:1.3
	VPL1-00:1.3
	V4-22-NRT-08:1.3
	VAM1-00:1.3
	V4-21:1.3.0.2
	V4-13:1.3
	V4-12:1.3
	V4-11:1.3
	V4-10:1.3
	V3-43:1.2
	M4-00:1.3
	V3-41:1.2
	V3-40-PlusGM57:1.2.0.2
	V2-24-NRT-04:1.2
	V3-33:1.2
	V2-24:1.2
	V3-31:1.2
	V3-30-NRT-05:1.2
	cfm-01-00:1.2
	V3-30:1.2
	V3-20:1.2
	V3-10:1.2
	V2-23-NRT-02:1.2
	V2-23:1.2
	V2-22-NRT-01:1.2
	V2-22:1.2
	V2-21:1.2
	V2-20:1.2
	V2-11:1.2
	V2-10:1.2
	V2-00:1.2
	V1-51:1.2
	V1-50:1.2
	V1-45:1.2
	V1-44:1.2
	V1-43:1.2;
locks; strict;
comment	@# @;


1.3
date	2012.06.19.20.10.57;	author pwagner;	state Exp;
branches;
next	1.2;

1.2
date	2004.04.14.16.34.18;	author livesey;	state Exp;
branches;
next	1.1;

1.1
date	2004.04.13.22.39.31;	author livesey;	state Exp;
branches;
next	;


desc
@@


1.3
log
@flagDontLockBins removes /lockBins switch
@
text
@; $Id: setuphradvancedmodel.l2cf,v 1.2 2004/04/14 16:34:18 livesey Exp $

;; This L2CF fragment is for use when we wish to setup an 'advanced'
;; linear forward model (one that is linearised about a different state
;; from the one in the l2pc files).

;; This simply takes the current 'state' and produces a full forward
;; model estimtate of bands 1, 22 and 32.

;; Construct the measurement vector and a full forward model
begin Construct
  r1aSetupModelHR: ForwardModel, type=full, $
    signals=['R1A:118.B1F:PT','R1A:118.B22D:PT','R1A:118.B32W:PT'], $
    phiWindow=4.0 degrees, $
    molecules=!moleculesForR1A, $
    integrationGrid=vGridTangent, $
    tangentGrid=vGridTangent, $
    tolerance= -1K, $
    specificQuantities = [ temperature_hr, h2o_hr ], $
    /do_conv, /do_freq_avg, /polarized ;; We skip the baseline deliberately
end Construct

;; Setup the vectors
begin Fill
  ;; Make sure the _hr species are interpolations of their parents
  Fill, quantity=r1aX.temperature_hr, method=vector, sourceQuantity=r1aX.temperature, /interpolate
  Fill, quantity=r1aX.h2o_hr, method=vector, sourceQuantity=r1aX.h2o, /interpolate
  Fill, quantity=r1aX.o3_hr, method=vector, sourceQuantity=r1aX.o3, /interpolate
end Fill

;; Do a sids calculation
begin Retrieve
  !ifdef(flagSkipAdvancedSids,{},{
  sids, fwdModelIn=state, fwdModelOut=r1aYHR, forwardModel=[r1aSetupModelHR]})
end Retrieve

;; Now we construct the advanced linear models to use these
begin Construct
  !define(makeAdvancedHRL2PCModel,{!dnl
  advancedHRL2PCFwm$1: ForwardModel, type=linear, signals=!signal($1), $
    molecules=!moleculeFamilies(!radiometerForBand($1)), $
    moleculeDerivatives=!moleculeFamilies(!radiometerForBand($1)), $
    /atmos_der, /temp_der, /do_baseline, $
    phiWindow=100 profiles, !ifdef(flagDontLockBins,{},{/lockBins, }) $
    specificQuantities=[ temperature_hr, h2o_hr ], $
    binSelectors=[hiResBin, latBin], $
    xStar=r1aX, yStar=r1aYHR})

  !makeAdvancedHRL2PCModel(1)
  !makeAdvancedHRL2PCModel(22)
  !makeAdvancedHRL2PCModel(32)
end Construct

; $Log: setuphradvancedmodel.l2cf,v $
; Revision 1.2  2004/04/14 16:34:18  livesey
; Added some ifs
;
; Revision 1.1  2004/04/13 22:39:31  livesey
; First version
;
@


1.2
log
@Added some ifs
@
text
@d1 1
a1 1
; $Id: setuphradvancedmodel.l2cf,v 1.1 2004/04/13 22:39:31 livesey Exp $
d44 1
a44 1
    phiWindow=100 profiles, /lockBins, $
d55 3
@


1.1
log
@First version
@
text
@d1 1
a1 1
; $Id: setupadvancedmodel.l2cf,v 1.8 2004/04/09 06:29:44 livesey Exp $
d33 2
a34 1
  sids, fwdModelIn=state, fwdModelOut=r1aYHR, forwardModel=[r1aSetupModelHR]
d54 4
a57 1
; $Log$
@

