head	1.13;
access;
symbols
	v5-02-NRT-19:1.13
	v6-00:1.13
	v5-02-NRT-18:1.13
	v5-02:1.13
	v5-01-NRT-17:1.13
	v5-01-NRT-16:1.13
	v5-01-NRT-15:1.13
	v5-01-NRT-14:1.13
	neuralnetworks-1-0:1.13.0.10
	cfm-single-freq-0-1:1.13.0.8
	v5-01:1.13
	v5-00:1.13
	v4-23-TA133:1.13.0.6
	mus-emls-1-70:1.13.0.4
	rel-1-0-englocks-work:1.13.0.2
	VUMLS1-00:1.13
	VPL1-00:1.13
	V4-22-NRT-08:1.12
	VAM1-00:1.12
	V4-21:1.12.0.2
	V4-13:1.12
	V4-12:1.12
	V4-11:1.12
	V4-10:1.12
	V3-43:1.11
	M4-00:1.12
	V3-41:1.11
	V3-40-PlusGM57:1.11.0.2
	V2-24-NRT-04:1.11
	V3-33:1.11
	V2-24:1.11
	V3-31:1.11
	V3-30-NRT-05:1.11
	cfm-01-00:1.11
	V3-30:1.11
	V3-20:1.11
	V3-10:1.11
	V2-23-NRT-02:1.11
	V2-23:1.11
	V2-22-NRT-01:1.11
	V2-22:1.11
	V2-21:1.11
	V2-20:1.11
	V2-11:1.11
	V2-10:1.11
	V2-00:1.10
	V1-51:1.10
	V1-50:1.10
	V1-45:1.4
	V1-44:1.4
	V1-43:1.4;
locks; strict;
comment	@# @;


1.13
date	2016.09.14.20.11.08;	author pwagner;	state Exp;
branches;
next	1.12;

1.12
date	2011.10.20.20.18.28;	author pwagner;	state Exp;
branches;
next	1.11;

1.11
date	2006.07.19.18.22.25;	author dwu;	state Exp;
branches;
next	1.10;

1.10
date	2004.11.17.00.25.36;	author livesey;	state Exp;
branches;
next	1.9;

1.9
date	2004.10.18.20.47.35;	author dwu;	state Exp;
branches;
next	1.8;

1.8
date	2004.10.18.19.31.04;	author dwu;	state Exp;
branches;
next	1.7;

1.7
date	2004.09.22.16.36.53;	author livesey;	state Exp;
branches;
next	1.6;

1.6
date	2004.09.13.20.39.05;	author livesey;	state Exp;
branches;
next	1.5;

1.5
date	2004.09.10.20.00.23;	author dwu;	state Exp;
branches;
next	1.4;

1.4
date	2004.04.16.00.46.26;	author livesey;	state Exp;
branches;
next	1.3;

1.3
date	2004.04.13.19.29.01;	author livesey;	state Exp;
branches;
next	1.2;

1.2
date	2004.03.30.02.39.26;	author livesey;	state Exp;
branches;
next	1.1;

1.1
date	2004.03.17.17.12.27;	author livesey;	state Exp;
branches;
next	;


desc
@@


1.13
log
@Implement flagSkipWritingDiagnostics
@
text
@;; $Id: outputcloudflags.l2cf,v 1.12 2011/10/20 20:18:28 pwagner Exp $

;; This l2cf fragment is used to output the summarized cloud flags
;; and also to flag the iwc standard product if Band33 is off

begin Fill
  Skip, Boolean=Band33OK  ;; Fill unless Band33 is OK
  Fill, quantity=standardDiagnostics.statusiwc, method=explicit, $
    explicitValues=!statusDoNotUse, /spread
  Fill, quantity=standardDiagnostics.statusiwp, method=explicit, $
    explicitValues=!statusDoNotUse, /spread
end Fill

begin Fill
  ;; First subset the cloudrads
  !define(extractRadDT,{!dnl
  Fill, quantity=cloudOutput.dt$1, method=extractChannel, $
    sourceQuantity=cloudOutput.dtBand!cloudBandFor$1, channel=!cloudChannelFor$1!nl})
  !forall(extractRadDT,!allRadiometers)
end Fill

!ifdef(flagSkipWritingDiagnostics,{},{
begin Join

  !define(outputCloudRad,{!directWriteCloud(cloudOutput.dt$1,'.C!cloudChannelFor$1 DT', /prefixSignal)!nl})
  !forall(outputCloudRad,!allRadiometers)

  !define(writeOneCloudRadBin,{!ifdef(flagAvoidDirectWrite,{!dnl
  joined_cloudRadMin$1: l2gp, source=cloudOutput.cloudRadMin$1, $
     /prefixSignal, swath='.C!cloudChannelForRad($1) cloudMin'
   joined_cloudRadMax$1: l2gp, source=cloudOutput.cloudRadMax$1, $
     /prefixSignal, swath='.C!cloudChannelForRad($1) cloudMax'
  !storeJoinedDGG(joined_cloudRadMin$1)!storeJoinedDGG(joined_cloudRadMax$1)},{!dnl
  label, quantity=cloudOutput.cloudRadMin$1, $
    /prefixSignal, label='.C!cloudChannelForRad($1) cloudMin'
  label, quantity=cloudOutput.cloudRadMax$1, $
    /prefixSignal, label='.C!cloudChannelForRad($1) cloudMax'
  !noteDirectDGG({source=cloudOutput.cloudRadMin$1, source=cloudOutput.cloudRadMax$1})})})
  !forall(writeOneCloudRadBin,!allRadiometers)

  ;; Write the IWC products
  !directWriteDGGNoDiag(iwcR1A,IWC-118)
  !directWriteDGGNoDiag(iwcR2,IWC-190)
  !directWriteDGGNoDiag(iwcR3,IWC-240)
  !directWriteDGGNoDiag(iwcR4,IWC-640)

  ;; Write the IWP products
  !directWriteDGGNoDiag(iwpR1A,IWP-118)
  !directWriteDGGNoDiag(iwpR2,IWP-190)
  !directWriteDGGNoDiag(iwpR3,IWP-240)
  !directWriteDGGNoDiag(iwpR4,IWP-640)

  !flushDGGDGMFiles
end Join
})

@


1.12
log
@Fill diagnostic fields for IWC, IWP
@
text
@d1 1
a1 1
;; $Id: outputcloudflags.l2cf,v 1.11 2006/07/19 18:22:25 dwu Exp $
d22 1
d55 1
@


1.11
log
@add IWP outputs
@
text
@d1 1
a1 1
;; $Id: outputcloudflags.l2cf,v 1.10 2004/11/17 00:25:36 livesey Exp $
d4 9
@


1.10
log
@Removed the oneToFive stuff
@
text
@d1 1
a1 1
;; $Id: outputcloudflags.l2cf,v 1.9 2004/10/18 20:47:35 dwu Exp $
d37 6
@


1.9
log
@remove output all R2 Tcir
@
text
@d1 1
a1 1
;; $Id: outputcloudflags.l2cf,v 1.8 2004/10/18 19:31:04 dwu Exp $
d8 3
a10 3
  Fill, quantity=cloudOutput.dtR$1, method=extractChannel, $
    sourceQuantity=cloudOutput.dtBand!cloudBandForR$1, channel=!cloudChannelForR$1!nl})
  !forall(extractRadDT,!oneToFive)
d15 2
a16 5
  !define(outputCloudRad,{!directWriteCloud(cloudOutput.dtR$1,'.C!cloudChannelForR$1 DT', /prefixSignal)!nl})
  !forall(outputCloudRad,!oneToFive)

  !define(outputPolCloudRad,{!directWriteCloud(cloudOutput.DTband$1,' DT', /prefixSignal)!nl})
  !forall(outputPolCloudRad,18,34)
d19 11
a29 11
  joined_cloudRadMinR$1: l2gp, source=cloudOutput.cloudRadMinR$1, $
     /prefixSignal, swath='.C!cloudChannelForRadNo($1) cloudMin'
   joined_cloudRadMaxR$1: l2gp, source=cloudOutput.cloudRadMaxR$1, $
     /prefixSignal, swath='.C!cloudChannelForRadNo($1) cloudMax'
  !storeJoinedDGG(joined_cloudRadMinR$1)!storeJoinedDGG(joined_cloudRadMaxR$1)},{!dnl
  label, quantity=cloudOutput.cloudRadMinR$1, $
    /prefixSignal, label='.C!cloudChannelForRadNo($1) cloudMin'
  label, quantity=cloudOutput.cloudRadMaxR$1, $
    /prefixSignal, label='.C!cloudChannelForRadNo($1) cloudMax'
  !noteDirectDGG({source=cloudOutput.cloudRadMinR$1, source=cloudOutput.cloudRadMaxR$1})})})
  !forall(writeOneCloudRadBin,!oneToFive)
@


1.8
log
@output polarized Tcir
@
text
@d1 1
a1 1
;; $Id: outputcloudflags.l2cf,v 1.7 2004/09/22 16:36:53 livesey Exp $
a16 4

  ;; Output all R2 DT's
  !define(outputR2CloudRad,{!directWriteCloud(cloudOutput.DTband$1,' DT', /prefixSignal)!nl})
  !forall(outputR2CloudRad,2,3,4,5,6)
@


1.7
log
@Bug fix in outputing cloud radiances.
@
text
@d1 1
a1 1
;; $Id: outputcloudflags.l2cf,v 1.6 2004/09/13 20:39:05 livesey Exp $
d21 3
@


1.6
log
@Minor bug fix.
@
text
@d1 1
a1 1
;; $Id: outputcloudflags.l2cf,v 1.5 2004/09/10 20:00:23 dwu Exp $
d20 1
a20 1
  !forall(outputR2CloudRad,{2,3,4,5,6})
@


1.5
log
@add output all R2 DT
@
text
@d1 1
a1 1
;; $Id: outputcloudflags.l2cf,v 1.4 2004/04/16 00:46:26 livesey Exp $
d18 2
a19 2
  ;; output all R2 DT's
  !define(outputR2CloudRad,{!directWriteCloud(cloudOutput.DTband$1, /prefixSignal)!nl})
@


1.4
log
@New approach to cloud flagging.
@
text
@d1 1
a1 1
;; $Id: outputcloudflags.l2cf,v 1.3 2004/04/13 19:29:01 livesey Exp $
d17 4
@


1.3
log
@Added writing of IWC
@
text
@d1 1
a1 1
;; $Id: outputcloudflags.l2cf,v 1.2 2004/03/30 02:39:26 livesey Exp $
d5 8
d15 2
a16 2
  !define(outputCloudRad,{!directWriteCloud(cloudOutput.dtBand$1,' DTBand$1', /prefixSignal)!nl})
  !forall(outputCloudRad,5,10,15,32,33)
d19 11
a29 15
  joined_cloudRadMin$1: l2gp, source=cloudOutput.cloudRadMin$1, $
     swath='!TrimFirstLastChar(!signal($1)).C$2 cloudMin'
   joined_cloudRadMax$1: l2gp, source=cloudOutput.cloudRadMax$1, $
     swath='!TrimFirstLastChar(!signal($1)).C$2 cloudMax'
  !storeJoinedDGG(joined_cloudRadMin$1)!storeJoinedDGG(joined_cloudRadMax$1)},{!dnl
  label, quantity=cloudOutput.cloudRadMin$1, $
    label='!TrimFirstLastChar(!signal($1)).C$2 cloudMin'
  label, quantity=cloudOutput.cloudRadMax$1, $
    label='!TrimFirstLastChar(!signal($1)).C$2 cloudMax'
  !noteDirectDGG({source=cloudOutput.cloudRadMin$1, source=cloudOutput.cloudRadMax$1})})})
  !writeOneCloudRadBin(5,1)
  !writeOneCloudRadBin(10,1)
  !writeOneCloudRadBin(15,25)
  !writeOneCloudRadBin(32,1)
  !writeOneCloudRadBin(33,3)
@


1.2
log
@Added the MIF based flags
@
text
@d1 1
a1 1
;; $Id: outputcloudflags.l2cf,v 1.1 2004/03/17 17:12:27 livesey Exp $
d26 6
@


1.1
log
@First version
@
text
@d1 1
a1 1
;; $Id$
d7 3
d23 2
a25 1
  !writeOneCloudRadBin(15,25)
@

