head	1.20;
access;
symbols
	v5-02-NRT-19:1.20
	v6-00:1.20
	v5-02-NRT-18:1.20
	v5-02:1.20
	v5-01-NRT-17:1.20
	v5-01-NRT-16:1.20
	v5-01-NRT-15:1.20
	v5-01-NRT-14:1.20
	neuralnetworks-1-0:1.20.0.4
	cfm-single-freq-0-1:1.20.0.2
	v5-01:1.20
	v5-00:1.20
	v4-23-TA133:1.19.0.2
	mus-emls-1-70:1.18.0.6
	rel-1-0-englocks-work:1.18.0.4
	VUMLS1-00:1.18
	VPL1-00:1.18
	V4-22-NRT-08:1.18
	VAM1-00:1.18
	V4-21:1.18.0.2
	V4-13:1.17
	V4-12:1.17
	V4-11:1.17
	V4-10:1.17
	V3-43:1.17
	M4-00:1.17
	V3-41:1.17
	V3-40-PlusGM57:1.17.0.2
	V2-24-NRT-04:1.14
	V3-33:1.17
	V2-24:1.14
	V3-31:1.17
	V3-30-NRT-05:1.17
	cfm-01-00:1.17
	V3-30:1.17
	V3-20:1.17
	V3-10:1.17
	V2-23-NRT-02:1.14
	V2-23:1.14
	V2-22-NRT-01:1.14
	V2-22:1.14
	V2-21:1.14
	V2-20:1.14
	V2-11:1.10
	V2-10:1.10
	V2-00:1.8
	V1-51:1.8
	V1-50:1.8
	V1-45:1.7
	V1-44:1.7
	V1-43:1.7;
locks; strict;
comment	@# @;


1.20
date	2019.05.30.17.44.31;	author pwagner;	state Exp;
branches;
next	1.19;

1.19
date	2019.02.22.21.30.32;	author pwagner;	state Exp;
branches;
next	1.18;

1.18
date	2015.01.30.19.48.30;	author pwagner;	state Exp;
branches;
next	1.17;

1.17
date	2009.07.28.20.03.21;	author pwagner;	state Exp;
branches;
next	1.16;

1.16
date	2009.01.28.01.15.17;	author pwagner;	state Exp;
branches;
next	1.15;

1.15
date	2008.10.07.18.11.49;	author pwagner;	state Exp;
branches;
next	1.14;

1.14
date	2006.10.13.22.13.27;	author dwu;	state Exp;
branches;
next	1.13;

1.13
date	2006.10.11.23.04.55;	author pwagner;	state Exp;
branches;
next	1.12;

1.12
date	2006.10.04.16.51.47;	author pwagner;	state Exp;
branches;
next	1.11;

1.11
date	2006.08.08.22.27.07;	author pwagner;	state Exp;
branches;
next	1.10;

1.10
date	2006.07.28.18.56.20;	author dwu;	state Exp;
branches;
next	1.9;

1.9
date	2006.07.26.21.13.50;	author dwu;	state Exp;
branches;
next	1.8;

1.8
date	2004.09.21.23.02.59;	author livesey;	state Exp;
branches;
next	1.7;

1.7
date	2004.04.28.23.06.41;	author livesey;	state Exp;
branches;
next	1.6;

1.6
date	2004.04.28.00.32.04;	author livesey;	state Exp;
branches;
next	1.5;

1.5
date	2004.04.27.23.51.24;	author livesey;	state Exp;
branches;
next	1.4;

1.4
date	2004.04.27.23.45.58;	author livesey;	state Exp;
branches;
next	1.3;

1.3
date	2004.04.17.05.47.37;	author livesey;	state Exp;
branches;
next	1.2;

1.2
date	2004.03.30.02.39.17;	author livesey;	state Exp;
branches;
next	1.1;

1.1
date	2004.03.17.17.12.27;	author livesey;	state Exp;
branches;
next	;


desc
@@


1.20
log
@Reverted Temperature quality flags to v4 unless flagAddBand1ToTempQual is set
@
text
@!divert(-1)
; $Id: coreplusr3flags.l2cf,v 1.19 2019/02/22 21:30:32 pwagner Exp $

; ----------- Phase name vs. retrieval name
; Some phase(s) may not have Retrieve sections
; and so we'll need to know the last one
!define(retrophase,{!phase})

!ifdef(flagHiResO3inCPR3,{!define(O3StdProd,O3_HR)},{!define(O3StdProd,O3)})

!divert!dnl
; This l2cf fragment does all the quality flagging for the Core+R3
; products.

begin Fill
  ;; ------------------------------------ O3-240
  !define(flaggingBands,{7,24})
  !define(flaggingRadiometers,{R3})!dnl
  !makeQualityForOneProduct(product=!O3StdProd,chisqScale=1.0,minRads=1500,cloudMax=30K,cloudMin= -20K)
  !makeStatusForOneProduct(product=!O3StdProd,chisqScale=1.0,minRads=1500,cloudMax=30K,cloudMin= -20K)

  ;; ------------------------------------- CO-240
  !define(flaggingBands,{9,25})
  !define(flaggingRadiometers,{R3})!dnl
  !makeQualityForOneProduct(product=CO,chisqScale=1.0,minRads=1500,cloudMax=30K,cloudMin= -20K)
  !makeStatusForOneProduct(product=CO,chisqScale=1.0,minRads=1500,cloudMax=30K,cloudMin= -20K)

  ;; ------------------------------------- HNO3-240
  !define(flaggingBands,{7,8,9})
  !define(flaggingRadiometers,{R3})!dnl
  !makeQualityForOneProduct(product=HNO3,chisqScale=1.0,minRads=2000,cloudMax=30K,cloudMin= -20K)
  !makeStatusForOneProduct(product=HNO3,chisqScale=1.0,minRads=2000,cloudMax=30K,cloudMin= -20K)

  ;; ------------------------------------- SO2-240
  !define(flaggingBands,{8})
  !define(flaggingRadiometers,{R3})!dnl
  !makeQualityForOneProduct(product=SO2,chisqScale=1.0,minRads=1500,cloudMax=30K,cloudMin= -20K)
  !makeStatusForOneProduct(product=SO2,chisqScale=1.0,minRads=1500,cloudMax=30K,cloudMin= -20K)

  ;; ------------------------------------- Temperature-CorePlusR3
  !ifdef(flagAddBand1ToTempQual, {
  ;; By special request, its quality depends on both Bands 1 and 8
  !define(flaggingBands,{1,8})
  !define(flaggingRadiometers,{R1A,R1B,R3})!dnl
  }, {
  ;; Unless specially requested, its quality depends only on Band 8
  !define(flaggingBands,{8})
  !define(flaggingRadiometers,{R3})!dnl
  })
  !makeQualityForOneProduct(product=Temperature,chisqScale=1.0,minRads=1500,cloudMax=30K,cloudMin= -20K)
  !makeStatusForOneProduct(product=Temperature,chisqScale=1.0,minRads=1500,cloudMax=30K,cloudMin= -20K)

  ;; ------------------------------------- GPH-CorePlusR3
  !define(flaggingBands,{8})
  !define(flaggingRadiometers,{R3})!dnl
  !makeQualityForOneProduct(product=GPH,chisqScale=1.0,minRads=1500,cloudMax=30K,cloudMin= -20K)
  !makeStatusForOneProduct(product=GPH,chisqScale=1.0,minRads=1500,cloudMax=30K,cloudMin= -20K)

end Fill

; $Log: coreplusr3flags.l2cf,v $
; Revision 1.19  2019/02/22 21:30:32  pwagner
; Added Band 1 to the Temperature-StdProds flagging Bands
;
; Revision 1.18  2015/01/30 19:48:30  pwagner
; Restore flagging for low clouds
;
; Revision 1.17  2009/07/28 20:03:21  pwagner
; Removed Band 33
;
; Revision 1.16  2009/01/28 01:15:17  pwagner
; Changed quantity name of hires ozone
;
; Revision 1.15  2008/10/07 18:11:49  pwagner
; O3StdProd may be changed to O3_R3
;
; Revision 1.14  2006/10/13 22:13:27  dwu
; change high cloud chisq threshold from 10 to 30
;
; Revision 1.13  2006/10/11 23:04:55  pwagner
; Special retrieval phase name retrophase needed for Convergence Ratio Fill
;
; Revision 1.12  2006/10/04 16:51:47  pwagner
; Compatible w/ status bits from multiple radiometers; needs review
;
; Revision 1.11  2006/08/08 22:27:07  pwagner
; Fills Quality, Status for Temperature, GPH; needs revision before v2.20
;
; Revision 1.10  2006/07/28 18:56:20  dwu
; add so2
;
; Revision 1.9  2006/07/26 21:13:50  dwu
; modified for v2.0 clouds
;
; Revision 1.8  2004/09/21 23:02:59  livesey
; Changed chiSqWeights to 1.0 for everything.
;
; Revision 1.7  2004/04/28 23:06:41  livesey
; Changes to cloud flags.
;
; Revision 1.6  2004/04/28 00:32:04  livesey
; Bug fix
;
; Revision 1.5  2004/04/27 23:51:24  livesey
; Added log information
;
@


1.19
log
@Added Band 1 to the Temperature-StdProds flagging Bands
@
text
@d2 1
a2 1
; $Id: coreplusr3flags.l2cf,v 1.18 2015/01/30 19:48:30 pwagner Exp $
d41 2
d45 5
d62 3
@


1.18
log
@Restore flagging for low clouds
@
text
@d2 1
a2 1
; $Id: coreplusr3flags.l2cf,v 1.17 2009/07/28 20:03:21 pwagner Exp $
d41 2
a42 2
  !define(flaggingBands,{8})
  !define(flaggingRadiometers,{R3})!dnl
d55 3
@


1.17
log
@Removed Band 33
@
text
@d2 1
a2 1
; $Id: coreplusr3flags.l2cf,v 1.16 2009/01/28 01:15:17 pwagner Exp $
d19 2
a20 2
  !makeQualityForOneProduct(product=!O3StdProd,chisqScale=1.0,minRads=1500,cloudMax=30K,cloudMin= -999K)
  !makeStatusForOneProduct(product=!O3StdProd,chisqScale=1.0,minRads=1500,cloudMax=30K,cloudMin= -999K)
d25 2
a26 2
  !makeQualityForOneProduct(product=CO,chisqScale=1.0,minRads=1500,cloudMax=30K,cloudMin= -999K)
  !makeStatusForOneProduct(product=CO,chisqScale=1.0,minRads=1500,cloudMax=30K,cloudMin= -999K)
d31 2
a32 2
  !makeQualityForOneProduct(product=HNO3,chisqScale=1.0,minRads=2000,cloudMax=30K,cloudMin= -999K)
  !makeStatusForOneProduct(product=HNO3,chisqScale=1.0,minRads=2000,cloudMax=30K,cloudMin= -999K)
d37 2
a38 2
  !makeQualityForOneProduct(product=SO2,chisqScale=1.0,minRads=1500,cloudMax=30K,cloudMin= -999K)
  !makeStatusForOneProduct(product=SO2,chisqScale=1.0,minRads=1500,cloudMax=30K,cloudMin= -999K)
d43 2
a44 2
  !makeQualityForOneProduct(product=Temperature,chisqScale=1.0,minRads=1500,cloudMax=30K,cloudMin= -999K)
  !makeStatusForOneProduct(product=Temperature,chisqScale=1.0,minRads=1500,cloudMax=30K,cloudMin= -999K)
d49 2
a50 2
  !makeQualityForOneProduct(product=GPH,chisqScale=1.0,minRads=1500,cloudMax=30K,cloudMin= -999K)
  !makeStatusForOneProduct(product=GPH,chisqScale=1.0,minRads=1500,cloudMax=30K,cloudMin= -999K)
d55 3
@


1.16
log
@Changed quantity name of hires ozone
@
text
@d2 1
a2 1
; $Id: coreplusr3flags.l2cf,v 1.15 2008/10/07 18:11:49 pwagner Exp $
d17 1
a17 1
  !define(flaggingBands,{7,24,33})
d23 1
a23 1
  !define(flaggingBands,{9,25,33})
d29 1
a29 1
  !define(flaggingBands,{7,8,9,33})
d35 1
a35 1
  !define(flaggingBands,{8,33})
d55 3
@


1.15
log
@O3StdProd may be changed to O3_R3
@
text
@d2 1
a2 1
; $Id: coreplusr3flags.l2cf,v 1.14 2006/10/13 22:13:27 dwu Exp $
d9 1
a9 1
!ifdef(flagHiResO3inCPR3,{!define(O3StdProd,O3_R3)},{!define(O3StdProd,O3)})
d55 3
@


1.14
log
@change high cloud chisq threshold from 10 to 30
@
text
@d2 1
a2 1
; $Id: coreplusr3flags.l2cf,v 1.13 2006/10/11 23:04:55 pwagner Exp $
d9 2
d19 2
a20 2
  !makeQualityForOneProduct(product=O3,chisqScale=1.0,minRads=1500,cloudMax=30K,cloudMin= -999K)
  !makeStatusForOneProduct(product=O3,chisqScale=1.0,minRads=1500,cloudMax=30K,cloudMin= -999K)
d55 3
@


1.13
log
@Special retrieval phase name retrophase needed for Convergence Ratio Fill
@
text
@d2 1
a2 1
; $Id: coreplusr3flags.l2cf,v 1.12 2006/10/04 16:51:47 pwagner Exp $
d17 2
a18 2
  !makeQualityForOneProduct(product=O3,chisqScale=1.0,minRads=1500,cloudMax=10K,cloudMin= -20K)
  !makeStatusForOneProduct(product=O3,chisqScale=1.0,minRads=1500,cloudMax=10K,cloudMin= -20K)
d23 2
a24 2
  !makeQualityForOneProduct(product=CO,chisqScale=1.0,minRads=1500,cloudMax=10K,cloudMin= -20K)
  !makeStatusForOneProduct(product=CO,chisqScale=1.0,minRads=1500,cloudMax=10K,cloudMin= -20K)
d29 2
a30 2
  !makeQualityForOneProduct(product=HNO3,chisqScale=1.0,minRads=2000,cloudMax=10K,cloudMin= -20K)
  !makeStatusForOneProduct(product=HNO3,chisqScale=1.0,minRads=2000,cloudMax=10K,cloudMin= -20K)
d35 2
a36 2
  !makeQualityForOneProduct(product=SO2,chisqScale=1.0,minRads=1500,cloudMax=10K,cloudMin= -20K)
  !makeStatusForOneProduct(product=SO2,chisqScale=1.0,minRads=1500,cloudMax=10K,cloudMin= -20K)
d41 2
a42 2
  !makeQualityForOneProduct(product=Temperature,chisqScale=1.0,minRads=1500,cloudMax=10K,cloudMin= -888K)
  !makeStatusForOneProduct(product=Temperature,chisqScale=1.0,minRads=1500,cloudMax=10K,cloudMin= -888K)
d47 2
a48 2
  !makeQualityForOneProduct(product=GPH,chisqScale=1.0,minRads=1500,cloudMax=10K,cloudMin= -888K)
  !makeStatusForOneProduct(product=GPH,chisqScale=1.0,minRads=1500,cloudMax=10K,cloudMin= -888K)
d53 3
@


1.12
log
@Compatible w/ status bits from multiple radiometers; needs review
@
text
@d1 2
a2 1
; $Id: coreplusr3flags.l2cf,v 1.11 2006/08/08 22:27:07 pwagner Exp $
d4 6
d53 3
@


1.11
log
@Fills Quality, Status for Temperature, GPH; needs revision before v2.20
@
text
@d1 1
a1 1
; $Id: coreplusr3flags.l2cf,v 1.10 2006/07/28 18:56:20 dwu Exp $
d9 3
a11 1
  !makeFlagsForOneProduct(product=O3,radiometer=R3,chisqScale=1.0,minRads=1500,cloudMax=10K,cloudMin= -20K)
d15 3
a17 1
  !makeFlagsForOneProduct(product=CO,radiometer=R3,chisqScale=1.0,minRads=1500,cloudMax=10K,cloudMin= -20K)
d21 3
a23 1
  !makeFlagsForOneProduct(product=HNO3,radiometer=R3,chisqScale=1.0,minRads=2000,cloudMax=10K,cloudMin= -20K)
d27 3
a29 1
  !makeFlagsForOneProduct(product=SO2,radiometer=R3,chisqScale=1.0,minRads=1500,cloudMax=10K,cloudMin= -20K)
a31 2
  ;;; !define(flaggingBands,{1,22,32})
  ;;; !makeFlagsForOneProduct(product=Temperature,radiometer=R1A,chisqScale=1.0,minRads=1500,cloudMax=10K,cloudMin= -20K)
d33 3
a35 1
  !makeFlagsForOneProduct(product=Temperature,radiometer=R3,chisqScale=1.0,minRads=1500,cloudMax=10K,cloudMin= -888K)
a37 2
  ;;; !define(flaggingBands,{1,22,32})
  ;;; !makeFlagsForOneProduct(product=GPH,radiometer=R1A,chisqScale=1.0,minRads=1500,cloudMax=10K,cloudMin= -20K)
d39 3
a41 1
  !makeFlagsForOneProduct(product=GPH,radiometer=R3,chisqScale=1.0,minRads=1500,cloudMax=10K,cloudMin= -888K)
d46 3
@


1.10
log
@add so2
@
text
@d1 1
a1 1
; $Id: coreplusr3flags.l2cf,v 1.9 2006/07/26 21:13:50 dwu Exp $
d24 4
a27 2
  !define(flaggingBands,{1,22,32})
  !makeFlagsForOneProduct(product=Temperature,radiometer=R1A,chisqScale=1.0,minRads=1500,cloudMax=10K,cloudMin= -20K)
d30 4
a33 2
  !define(flaggingBands,{1,22,32})
  !makeFlagsForOneProduct(product=GPH,radiometer=R1A,chisqScale=1.0,minRads=1500,cloudMax=10K,cloudMin= -20K)
d38 3
@


1.9
log
@modified for v2.0 clouds
@
text
@d1 1
a1 1
; $Id: coreplusr3flags.l2cf,v 1.8 2004/09/21 23:02:59 livesey Exp $
d19 4
d24 2
a25 2
  !define(flaggingBands,{1,8,22,32})
  !makeFlagsForOneProduct(product=Temperature,radiometer=R3,chisqScale=1.0,minRads=1500,cloudMax=10K,cloudMin= -20K)
d28 2
a29 2
  !define(flaggingBands,{1,8,22,32})
  !makeFlagsForOneProduct(product=GPH,radiometer=R3,chisqScale=1.0,minRads=1500,cloudMax=10K,cloudMin= -20K)
d34 3
@


1.8
log
@Changed chiSqWeights to 1.0 for everything.
@
text
@d1 1
a1 1
; $Id: coreplusr3flags.l2cf,v 1.7 2004/04/28 23:06:41 livesey Exp $
d9 1
a9 1
  !makeFlagsForOneProduct(product=O3,radiometer=R3,chisqScale=1.0,minRads=1500,cloudMax=5K,cloudMin= -20K)
d13 1
a13 1
  !makeFlagsForOneProduct(product=CO,radiometer=R3,chisqScale=1.0,minRads=1500,cloudMax=5K,cloudMin= -20K)
d17 1
a17 1
  !makeFlagsForOneProduct(product=HNO3,radiometer=R3,chisqScale=1.0,minRads=2000,cloudMax=5K,cloudMin= -20K)
d21 1
a21 1
  !makeFlagsForOneProduct(product=Temperature,radiometer=R3,chisqScale=1.0,minRads=1500,cloudMax=5K,cloudMin= -20K)
d25 1
a25 1
  !makeFlagsForOneProduct(product=GPH,radiometer=R3,chisqScale=1.0,minRads=1500,cloudMax=5K,cloudMin= -20K)
d30 3
@


1.7
log
@Changes to cloud flags.
@
text
@d1 1
a1 1
; $Id: coreplusr3flags.l2cf,v 1.6 2004/04/28 00:32:04 livesey Exp $
d9 1
a9 1
  !makeFlagsForOneProduct(product=O3,radiometer=R3,chisqScale=7.0,minRads=1500,cloudMax=5K,cloudMin= -20K)
d13 1
a13 1
  !makeFlagsForOneProduct(product=CO,radiometer=R3,chisqScale=7.0,minRads=1500,cloudMax=5K,cloudMin= -20K)
d17 1
a17 1
  !makeFlagsForOneProduct(product=HNO3,radiometer=R3,chisqScale=10.0,minRads=2000,cloudMax=5K,cloudMin= -20K)
d21 1
a21 1
  !makeFlagsForOneProduct(product=Temperature,radiometer=R3,chisqScale=10.0,minRads=1500,cloudMax=5K,cloudMin= -20K)
d25 1
a25 1
  !makeFlagsForOneProduct(product=GPH,radiometer=R3,chisqScale=10.0,minRads=1500,cloudMax=5K,cloudMin= -20K)
d30 3
@


1.6
log
@Bug fix
@
text
@d1 1
a1 1
; $Id: coreplusr3flags.l2cf,v 1.5 2004/04/27 23:51:24 livesey Exp $
d9 1
a9 1
  !makeFlagsForOneProduct(product=O3,radiometer=R3,chisqScale=7.0,minRads=1500,cloudMax=8K,cloudMin= -20K)
d13 1
a13 1
  !makeFlagsForOneProduct(product=CO,radiometer=R3,chisqScale=7.0,minRads=1500,cloudMax=8K,cloudMin= -20K)
d17 1
a17 1
  !makeFlagsForOneProduct(product=HNO3,radiometer=R3,chisqScale=10.0,minRads=2000,cloudMax=10K,cloudMin= -20K)
d21 1
a21 1
  !makeFlagsForOneProduct(product=Temperature,radiometer=R3,chisqScale=10.0,minRads=1500,cloudMax=2K,cloudMin= -20K)
d25 1
a25 1
  !makeFlagsForOneProduct(product=GPH,radiometer=R3,chisqScale=10.0,minRads=1500,cloudMax=2K,cloudMin= -20K)
d30 3
@


1.5
log
@Added log information
@
text
@d1 1
a1 1
; $Id: coreplusr3flags.l2cf,v 1.4 2004/04/27 23:45:58 livesey Exp $
d9 1
a9 1
  !makeFlagsForOneProduct(product=O3,radiometer=R3,chisqScale=7.0,minRads=1500,cloudMax=8K,cloudMin=-20K)
d13 1
a13 1
  !makeFlagsForOneProduct(product=CO,radiometer=R3,chisqScale=7.0,minRads=1500,cloudMax=8K,cloudMin=-20K)
d17 1
a17 1
  !makeFlagsForOneProduct(product=HNO3,radiometer=R3,chisqScale=10.0,minRads=2000,cloudMax=10K,cloudMin=-20K)
d21 1
a21 1
  !makeFlagsForOneProduct(product=Temperature,radiometer=R3,chisqScale=10.0,minRads=1500,cloudMax=2K,cloudMin=-20K)
d25 1
a25 1
  !makeFlagsForOneProduct(product=GPH,radiometer=R3,chisqScale=10.0,minRads=1500,cloudMax=2K,cloudMin=-20K)
d29 4
a32 1
; $Log$
@


1.4
log
@Added low clouds and GPH
@
text
@d1 1
a1 1
; $Id: coreplusr3flags.l2cf,v 1.3 2004/04/17 05:47:37 livesey Exp $
d28 2
@


1.3
log
@Backed off the number of radiances missing flags
@
text
@d1 1
a1 1
; $Id: coreplusr3flags.l2cf,v 1.2 2004/03/30 02:39:17 livesey Exp $
a6 2
  diagR3: Vector, template=diagTmp

d9 1
a9 1
  !makeFlagsForOneProduct(product=O3,radiometer=R3,chisqScale=7.0,minRads=1500,cloudMax=8K)
d13 1
a13 1
  !makeFlagsForOneProduct(product=CO,radiometer=R3,chisqScale=7.0,minRads=1500,cloudMax=8K)
d17 1
a17 1
  !makeFlagsForOneProduct(product=HNO3,radiometer=R3,chisqScale=10.0,minRads=2000,cloudMax=10K)
d21 5
a25 1
  !makeFlagsForOneProduct(product=Temperature,radiometer=R3,chisqScale=10.0,minRads=1500,cloudMax=10K)
@


1.2
log
@New macros and products
@
text
@d1 1
a1 1
; $Id: coreplusr3flags.l2cf,v 1.1 2004/03/17 17:12:27 livesey Exp $
d11 1
a11 1
  !makeFlagsForOneProduct(product=O3,radiometer=R3,chisqScale=7.0,minRads=2200,cloudMax=8K)
d15 1
a15 1
  !makeFlagsForOneProduct(product=CO,radiometer=R3,chisqScale=7.0,minRads=2200,cloudMax=8K)
d19 1
a19 1
  !makeFlagsForOneProduct(product=HNO3,radiometer=R3,chisqScale=10.0,minRads=3500,cloudMax=10K)
d23 1
a23 1
  !makeFlagsForOneProduct(product=Temperature,radiometer=R3,chisqScale=10.0,minRads=2200,cloudMax=10K)
@


1.1
log
@First version
@
text
@d1 1
a1 1
; $Id$
d10 2
a11 30
  ;; Quality: Key bands are 7, 24, 33
  ;; Get a composite chi squared for these
  Fill, quantity=diagR3.chisqTmp, method=vector, sourceQuantity=otherDiagnostics.chisqProfile7, /force
  Fill, quantity=diagR3.chisqTmp, method=manipulate, manipulation='a>b', $
    a=diagR3.chisqTmp, b=otherDiagnostics.chisqProfile24, /force
  Fill, quantity=diagR3.chisqTmp, method=manipulate, manipulation='a>b', $
    a=diagR3.chisqTmp, b=otherDiagnostics.chisqProfile33, /force
  ;; Run a boxcar over this
  Fill, quantity=diagR3.chisqTmp, method=boxcar, sourceQuantity=diagR3.chisqTmp, $
    boxCarMethod=max, width=3
  ;; Now fill quality from this.
  Fill, quantity=otherDiagnostics.qualityO3, method=quality, sourceQuantity=diagR3.chisqTmp, $
    scale=7.0

  ;; Status - too few radiances
  Fill, quantity=diagR3.noRadsTmp, method=vector, sourceQuantity=otherDiagnostics.noRadsProfile7, /force
  Fill, quantity=diagR3.noRadsTmp, method=manipulate, manipulation='a+b', $
    a=diagR3.noRadsTmp, b=otherDiagnostics.noRadsProfile24, /force
  Fill, quantity=diagR3.noRadsTmp, method=manipulate, manipulation='a+b', $
    a=diagR3.noRadsTmp, b=otherDiagnostics.noRadsProfile33, /force
  ;; Run a boxcar over this
  Fill, quantity=diagR3.noRadsTmp, method=boxcar, sourceQuantity=diagR3.noRadsTmp, $
    boxCarMethod=min, width=3
  ;; Set status based on this
  Fill, quantity=otherDiagnostics.statusO3, method=status, status=!statusTooFewRadiances+!statusDoNotUse, $
    sourceQuantity=diagR3.noRadsTmp, minValue=2200

  ;; Status - cloudy radiances - already had the box car run on it.
  Fill, quantity=otherDiagnostics.statusO3, method=status, status=!statusHighCloud+!statusBeWary, $
    sourceQuantity=otherDiagnostics.highCloudSummaryR3, maxValue=8K
d14 10
a23 30
  ;; Quality: Key bands are 9, 25 and 33
  ;; Get a composite chi squared for these
  Fill, quantity=diagR3.chisqTmp, method=vector, sourceQuantity=otherDiagnostics.chisqProfile9, /force
  Fill, quantity=diagR3.chisqTmp, method=manipulate, manipulation='a>b', $
    a=diagR3.chisqTmp, b=otherDiagnostics.chisqProfile25, /force
  Fill, quantity=diagR3.chisqTmp, method=manipulate, manipulation='a>b', $
    a=diagR3.chisqTmp, b=otherDiagnostics.chisqProfile33, /force
  ;; Run a boxcar over this
  Fill, quantity=diagR3.chisqTmp, method=boxcar, sourceQuantity=diagR3.chisqTmp, $
    boxCarMethod=max, width=3
  ;; Now fill quality from this.
  Fill, quantity=otherDiagnostics.qualityCO, method=quality, sourceQuantity=diagR3.chisqTmp, $
    scale=7.0

  ;; Status - too few radiances
  Fill, quantity=diagR3.noRadsTmp, method=vector, sourceQuantity=otherDiagnostics.noRadsProfile9, /force
  Fill, quantity=diagR3.noRadsTmp, method=manipulate, manipulation='a+b', $
    a=diagR3.noRadsTmp, b=otherDiagnostics.noRadsProfile25, /force
  Fill, quantity=diagR3.noRadsTmp, method=manipulate, manipulation='a+b', $
    a=diagR3.noRadsTmp, b=otherDiagnostics.noRadsProfile33, /force
  ;; Run a boxcar over this
  Fill, quantity=diagR3.noRadsTmp, method=boxcar, sourceQuantity=diagR3.noRadsTmp, $
    boxCarMethod=min, width=3
  ;; Set status based on this
  Fill, quantity=otherDiagnostics.statusCO, method=status, status=!statusTooFewRadiances+!statusDoNotUse, $
    sourceQuantity=diagR3.noRadsTmp, minValue=2200

  ;; Status - cloudy radiances - already had the box car run on it.
  Fill, quantity=otherDiagnostics.statusCO, method=status, status=!statusHighCloud+!statusBeWary, $
    sourceQuantity=otherDiagnostics.highCloudSummaryR3, maxValue=8K
@

