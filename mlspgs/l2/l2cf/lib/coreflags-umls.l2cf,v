head	1.4;
access;
symbols
	v5-02-NRT-19:1.4
	v6-00:1.4
	v5-02-NRT-18:1.4
	v5-02:1.4
	v5-01-NRT-17:1.4
	v5-01-NRT-16:1.4
	v5-01-NRT-15:1.4
	v5-01-NRT-14:1.4
	neuralnetworks-1-0:1.4.0.8
	cfm-single-freq-0-1:1.4.0.6
	v5-01:1.4
	v5-00:1.4
	v4-23-TA133:1.4.0.4
	mus-emls-1-70:1.4.0.2
	rel-1-0-englocks-work:1.3.0.2
	VUMLS1-00:1.2;
locks; strict;
comment	@# @;


1.4
date	2018.05.03.17.30.20;	author mjschwar;	state Exp;
branches;
next	1.3;

1.3
date	2017.06.16.16.54.17;	author pwagner;	state Exp;
branches;
next	1.2;

1.2
date	2017.03.09.01.50.19;	author mjschwar;	state Exp;
branches;
next	1.1;

1.1
date	2017.02.24.23.49.19;	author mjschwar;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Fixed the setting of statusBadScan so that it properly ORs with existing status.
@
text
@!divert(-1)
; $Id: coreflags-umls.l2cf,v 1.3 2017/06/16 16:54:17 pwagner Exp $

!define(retrophase,{InitPtan})

!divert!dnl

; This l2cf fragment does all the quality flagging for the InitPtan phase
; products of the umls instrument

begin Fill
  !define(flaggingBands,{1})
  !define(flaggingRadiometers,{R1})!dnl

  ; Before setting Status, preFill it with 0
  ; Even though we actually have merra2 we don't use it
  ; as apriori, relying solely on climatology
  ; Zero out Status 
  Fill, quantity=otherDiagnostics.statusTemperature_hr, method=explicit, $
    explicitValues=0, /spread
  Fill, quantity=otherDiagnostics.statusGPH_hr, method=explicit, $
    explicitValues=0, /spread

  !makeQualityForOneProduct(product=Temperature,chisqScale=1.0,minRads=150,cloudMax=30K,cloudMin= -4K)
  !makeStatusForOneProduct(product=Temperature,chisqScale=1.0,minRads=150,cloudMax=30K,cloudMin= -4K)
  !makeQualityForOneProduct(product=GPH,chisqScale=1.0,minRads=150,cloudMax=30K,cloudMin= -4K)
  !makeStatusForOneProduct(product=GPH,chisqScale=1.0,minRads=150,cloudMax=30K,cloudMin= -4K)
  Dump, text='In coreflags-umls.l2cf'
  Dump, boolean=GHzScanHeightInvalid
  Skip, formula="not GHzScanHeightInvalid"
  Fill, quantity=otherDiagnostics.statusTemperature_hr, method=status, $
    sourcequantity=otherDiagnostics.statusTemperature_hr, maxvalue=-1,$
    status=!statusBadScan+!statusDoNotUse, /additional
  Fill, quantity=otherDiagnostics.statusGPH_hr, method=status, $
    sourcequantity=otherDiagnostics.statusTemperature_hr, maxvalue=-1,$
    status=!statusBadScan+!statusDoNotUse, /additional
 Dump, text='GHzScanHeightInvalid, so ORing status with 1025.'

end Fill

; $Log: coreflags-umls.l2cf,v $
; Revision 1.3  2017/06/16 16:54:17  pwagner
; Similar to how emls version works now
;
; Revision 1.2  2017/03/09 01:50:19  mjschwar
; *** empty log message ***
;
; Revision 1.1  2017/02/24 23:49:19  mjschwar
; Adding umls specific code to standard parts
;
@


1.3
log
@Similar to how emls version works now
@
text
@d2 1
a2 1
; $Id: coreflags-umls.l2cf,v 1.2 2017/03/09 01:50:19 mjschwar Exp $
d31 7
a37 3
  Fill, quantity=otherDiagnostics.statusTemperature_hr, method=explicit, $
    explicitValues=!statusBadScan+!statusDoNotUse, /spread
  Dump, text='GHzScanHeightInvalid, so ORing status with 1025.'
d42 3
@


1.2
log
@*** empty log message ***
@
text
@d2 1
a2 2
; $Id: coreflags-umls.l2cf,v 1.1 2017/02/24 23:49:19 mjschwar Exp $

d8 3
d14 10
d32 1
a32 1
  explicitValues=!statusBadScan+!statusDoNotUse
a34 1

d38 3
@


1.1
log
@Adding umls specific code to standard parts
@
text
@d2 1
a2 1
; $Id: coreflags-MUSTARD.l2cf,v 1.14 2013/05/28 20:36:26 pwagner Exp $
d14 4
d26 4
a29 1
; $Log: coreflags-MUSTARD.l2cf,v $
@

