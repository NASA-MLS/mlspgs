head	1.6;
access;
symbols
	v5-02-NRT-19:1.6
	v6-00:1.6
	v5-02-NRT-18:1.6
	v5-02:1.6
	v5-01-NRT-17:1.6
	v5-01-NRT-16:1.6
	v5-01-NRT-15:1.6
	v5-01-NRT-14:1.6
	neuralnetworks-1-0:1.6.0.14
	cfm-single-freq-0-1:1.6.0.12
	v5-01:1.6
	v5-00:1.6
	v4-23-TA133:1.6.0.10
	mus-emls-1-70:1.6.0.8
	rel-1-0-englocks-work:1.6.0.6
	VUMLS1-00:1.6
	VPL1-00:1.6
	V4-22-NRT-08:1.6
	VAM1-00:1.6
	V4-21:1.6.0.4
	V4-13:1.6
	V4-12:1.6
	V4-11:1.6
	V4-10:1.6
	V3-43:1.6
	M4-00:1.6
	V3-41:1.6
	V3-40-PlusGM57:1.6.0.2
	V2-24-NRT-04:1.6
	V3-33:1.6
	V2-24:1.6
	V3-31:1.6
	V3-30-NRT-05:1.6
	cfm-01-00:1.6
	V3-30:1.6
	V3-20:1.6
	V3-10:1.6
	V2-23-NRT-02:1.6
	V2-23:1.6
	V2-22-NRT-01:1.6
	V2-22:1.6
	V2-21:1.6
	V2-20:1.6
	V2-11:1.6
	V2-10:1.6
	V2-00:1.6
	V1-51:1.6
	V1-50:1.6
	V1-45:1.5
	V1-44:1.5
	V1-43:1.5;
locks; strict;
comment	@# @;


1.6
date	2004.11.17.00.26.19;	author livesey;	state Exp;
branches;
next	1.5;

1.5
date	2004.05.04.01.07.31;	author livesey;	state Exp;
branches;
next	1.4;

1.4
date	2004.04.16.00.45.25;	author livesey;	state Exp;
branches;
next	1.3;

1.3
date	2004.04.02.01.07.04;	author livesey;	state Exp;
branches;
next	1.2;

1.2
date	2004.03.30.19.07.56;	author livesey;	state Exp;
branches;
next	1.1;

1.1
date	2004.03.17.17.12.27;	author livesey;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Tidied up the oneToFive stuff
@
text
@;; $Id: summarizecloudflags.l2cf,v 1.5 2004/05/04 01:07:31 livesey Exp $

;; This L2CF fragment is used to take the dtBand? fields and convert
;; them into appropriate cloud rad max/min flags.

begin Fill

  ;; First define a macro to generate the cloudRadMin/Max quantities
  ;;   band=$1, channel=$2
  !define(summarizeOneCloudRad,{!dnl
    Fill, quantity=cloudOutput.cloudRadMin$1, method=binMin, $
      ptanQuantity=state.ptan!moduleForBand(!cloudBandForRad($1)), $
      sourceQuantity=cloudOutput.dtBand!cloudBandForRad($1), channel=!cloudChannelForRad($1)
    Fill, quantity=cloudOutput.cloudRadMax$1, method=binMax, $
      ptanQuantity=state.ptan!moduleForBand(!cloudBandForRad($1)), $
      sourceQuantity=cloudOutput.dtBand!cloudBandForRad($1), channel=!cloudChannelForRad($1)
    Fill, quantity=otherDiagnostics.lowCloudSummary$1, method=binMin, /excludeBelowBottom, $
      ptanQuantity=state.ptan!moduleForBand(!cloudBandForRad($1)), $
      sourceQuantity=cloudOutput.dtBand!cloudBandForRad($1), channel=!cloudChannelForRad($1)
    Fill, quantity=otherDiagnostics.highCloudSummary$1, method=binMax, /excludeBelowBottom, $
      ptanQuantity=state.ptan!moduleForBand(!cloudBandForRad($1)), $
      sourceQuantity=cloudOutput.dtBand!cloudBandForRad($1), channel=!cloudChannelForRad($1)!nl})

  ;; Now invoke it for our significant channels.
  !forall(summarizeOneCloudRad,!allRadiometers)

end Fill

; $Log: summarizecloudflags.l2cf,v $
; Revision 1.5  2004/05/04 01:07:31  livesey
; Added invocation of excludeBelowBottom flag for quantities intended for
; flagging.
;
; Revision 1.4  2004/04/16 00:45:25  livesey
; New approach to cloud flagging.
;
; Revision 1.3  2004/04/02 01:07:04  livesey
; Bug fixes
;
@


1.5
log
@Added invocation of excludeBelowBottom flag for quantities intended for
flagging.
@
text
@d1 1
a1 1
;; $Id: summarizecloudflags.l2cf,v 1.4 2004/04/16 00:45:25 livesey Exp $
d11 12
a22 12
    Fill, quantity=cloudOutput.cloudRadMinR$1, method=binMin, $
      ptanQuantity=state.ptan!moduleForBand(!cloudBandForRadNo($1)), $
      sourceQuantity=cloudOutput.dtBand!cloudBandForRadNo($1), channel=!cloudChannelForRadNo($1)
    Fill, quantity=cloudOutput.cloudRadMaxR$1, method=binMax, $
      ptanQuantity=state.ptan!moduleForBand(!cloudBandForRadNo($1)), $
      sourceQuantity=cloudOutput.dtBand!cloudBandForRadNo($1), channel=!cloudChannelForRadNo($1)
    Fill, quantity=otherDiagnostics.lowCloudSummaryR$1, method=binMin, /excludeBelowBottom, $
      ptanQuantity=state.ptan!moduleForBand(!cloudBandForRadNo($1)), $
      sourceQuantity=cloudOutput.dtBand!cloudBandForRadNo($1), channel=!cloudChannelForRadNo($1)
    Fill, quantity=otherDiagnostics.highCloudSummaryR$1, method=binMax, /excludeBelowBottom, $
      ptanQuantity=state.ptan!moduleForBand(!cloudBandForRadNo($1)), $
      sourceQuantity=cloudOutput.dtBand!cloudBandForRadNo($1), channel=!cloudChannelForRadNo($1)!nl})
d25 1
a25 1
  !forall(summarizeOneCloudRad,!oneToFive)
d30 4
@


1.4
log
@New approach to cloud flagging.
@
text
@d1 1
a1 1
;; $Id: summarizecloudflags.l2cf,v 1.3 2004/04/02 01:07:04 livesey Exp $
d17 1
a17 1
    Fill, quantity=otherDiagnostics.lowCloudSummaryR$1, method=binMin, $
d20 1
a20 1
    Fill, quantity=otherDiagnostics.highCloudSummaryR$1, method=binMax, $
d30 3
@


1.3
log
@Bug fixes
@
text
@d1 1
a1 1
;; $Id: summarizecloudflags.l2cf,v 1.2 2004/03/30 19:07:56 livesey Exp $
d10 13
a22 5
  !define(fillOneCloudRadBin,{!dnl
    Fill, quantity=cloudOutput.cloudRadMin$1, method=binMin, $
      ptanQuantity=state.ptan!moduleForBand($1), sourceQuantity=cloudOutput.dtBand$1, channel=$2
    Fill, quantity=cloudOutput.cloudRadMax$1, method=binMax, $
      ptanQuantity=state.ptan!moduleForBand($1), sourceQuantity=cloudOutput.dtBand$1, channel=$2!nl})
d25 1
a25 26
  !fillOneCloudRadBin(5,1)
  !fillOneCloudRadBin(10,1)
  !fillOneCloudRadBin(15,25)
  !fillOneCloudRadBin(32,1)
  !fillOneCloudRadBin(33,3)

  ;; Now define a macro to do the same for the cloudSummary data
  ;;   band=$1, channel=$2
  !define(fillOneCloudSummary,{!dnl
    ;; First generate the flags
    Fill, quantity=otherDiagnostics.lowCloudSummary!radiometerForBand($1), method=binMin, $
      ptanQuantity=state.ptan!moduleForBand($1), sourceQuantity=cloudOutput.dtBand$1, channel=$2
    Fill, quantity=otherDiagnostics.highCloudSummary!radiometerForBand($1), method=binMax, $
      ptanQuantity=state.ptan!moduleForBand($1), sourceQuantity=cloudOutput.dtBand$1, channel=$2
    ;; Now boxcar them by five profiles
    Fill, quantity=otherDiagnostics.lowCloudSummary!radiometerForBand($1), method=boxCar, boxCarMethod=min, $
      sourceQuantity=otherDiagnostics.lowCloudSummary!radiometerForBand($1), width=5
    Fill, quantity=otherDiagnostics.highCloudSummary!radiometerForBand($1), method=boxCar, boxCarMethod=max, $
      sourceQuantity=otherDiagnostics.highCloudSummary!radiometerForBand($1), width=5!nl})

  ;; Now invoke it for our significant channels.
  !fillOneCloudSummary(5,1)
  !fillOneCloudSummary(10,1)
  !fillOneCloudSummary(15,25)
  !fillOneCloudSummary(32,1)
  !fillOneCloudSummary(33,3)
d29 4
a32 1
; $Log$
@


1.2
log
@Tidied up and enhanced
@
text
@d1 1
a1 1
;; $Id: summarizecloudflags.l2cf,v 1.1 2004/03/17 17:12:27 livesey Exp $
d29 1
a29 1
    Fill, quantity=otherDiagnostics.highCloudSummary!radiometerForBand($1), method=binMin, $
d34 1
a34 1
    Fill, quantity=otherDiagnostics.highCloudSummary!radiometerForBand($1), method=boxCar, boxCarMethod=min, $
d46 1
a46 7







@


1.1
log
@First version
@
text
@d1 1
a1 1
;; $Id$
d19 2
a21 1
  !fillOneCloudRadBin(15,25)
d40 2
a42 1
  !fillOneCloudSummary(15,25)
@

