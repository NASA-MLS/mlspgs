head	1.1;
access;
symbols
	v5-02-NRT-19:1.1
	v6-00:1.1
	v5-02-NRT-18:1.1
	v5-02:1.1
	v5-01-NRT-17:1.1
	v5-01-NRT-16:1.1
	v5-01-NRT-15:1.1
	v5-01-NRT-14:1.1
	neuralnetworks-1-0:1.1.0.8
	cfm-single-freq-0-1:1.1.0.6
	v5-01:1.1
	v5-00:1.1
	v4-23-TA133:1.1.0.4
	mus-emls-1-70:1.1.0.2;
locks; strict;
comment	@# @;


1.1
date	2018.06.15.23.09.25;	author pwagner;	state Exp;
branches;
next	;


desc
@@


1.1
log
@First commit
@
text
@!divert(-1)
; $Id: globalsettings.l2cf,v 1.6 2018/03/13 23:20:36 pwagner Exp $

; This l2cf fragment 
; (1) defines macros we're going to need below; then
; (2) supplies the global settings section
; For special runs, you may wish to predefine *Bands before entering this section
; Its contents will also be affected by the flagUsingPCF, because
; the PCF will supply l1b files, starting and end times, leap seconds file
    ;; This is the list of bands that the readradiances macro is to read
    ;; from the level 1 data.
    !ifdef(relevantBands,{},
    {!define(relevantBands,{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,22,23,24,25,27,28,29,30,31,32,33,34})})

    ;; This list of bands defines what l2pc files might be read
    ;;;!define(standardBands,{1,2,3,4,5,6,7,8,9,10,11,12,13,14,17,23,24,25,27,28,29,30,31,32,33,34})
    !ifdef(standardBands,{},
    {!define(standardBands,{1,2,3,4,5,6,10,11,12,13,14,17,23,27,28,29,30,31,32,34})})
    !ifdef(szaBands,{},
    {!define(szaBands,{15,16,18,19})})
    ;; 22 is both polarized and o3hr
    !ifdef(polarizedBands,{},
    {!define(polarizedBands,{22})})
    !ifdef(o3hrBands,{},
    {!define(o3hrBands,{1,7,8,9,24,25,32,33,34})})
    ;; Read our l2pc files
    !ifdef(flagUsingPCF,
    {!define(l2pcPrefix,{})
    !define(l2pcSuffixMonthly,{})
    !define(l2pcSuffixConstant,{})},
    {!define(l2pcPrefix,{!inpathl2pc/MLS-Aura_L2Cal-})
    !define(l2pcSuffixMonthly,{_!l2pcVersion_!month.h5})
    !define(l2pcSuffixConstant,{_!l2pcVersion_0000d000.h5})})

    !define(readStandardL2PC,{!dnl
    ForwardModelGlobal, l2pc='!l2pcPrefix{}L2PC-band$1-LATSCALARHIRES!l2pcSuffixMonthly'!nl})

    !define(readSZAL2PC,{!dnl
    ForwardModelGlobal, l2pc='!l2pcPrefix{}L2PC-band$1-SZASCALARHIRES!l2pcSuffixConstant'!nl})

    !define(readPolarL2PC,{!dnl
    ForwardModelGlobal, l2pc='!l2pcPrefix{}L2PC-band$1-LATPOLARHIRES!l2pcSuffixConstant'!nl})

    !define(readO3HRL2PC,{!dnl
    ForwardModelGlobal, l2pc='!l2pcPrefix{}L2PC-band$1-LATSCALARHIRESO3HR!l2pcSuffixMonthly'!nl})

    !define(readPolarO3HRL2PC,{!dnl
    ForwardModelGlobal, l2pc='!l2pcPrefix{}L2PC-band$1-LATPOLARHIRESO3HR!l2pcSuffixConstant'!nl})

    !define(flagAutoSplitSources,1)
    ;; This macro creates the list of DirectWriteFiles that sources are to be
    ;; distributed among automatically
    !define(oneToNineteen,{!forloop({i},1,18,{!i, })19})
    !ifdef(flagUsingPCF,{!dnl
    !define(makeOneDWFPair,{!dnl
    DirectWriteFile, file='DGG$1', type=l2dgg
    DirectWriteFile, file='DGM$1', type=l2aux!nl})
    },{!dnl
    !define(makeOneDWFPair,{!dnl
    DirectWriteFile, file='!l2gpFileName(DGG$1)', type=l2dgg
    DirectWriteFile, file='!l2auxFileName(DGM$1)', type=l2aux!nl})
    })

    ;; Define the precision for the scan model.  We should really think
    ;; about a better place to put this!
    !define(scanModelPrecision,{30 m})

!divert!dnl
    !ifdef(flagWriteL2CFNameToStdErr, {}, {
; Write the name of the l2cf file to stderr
; where it can be intercepted by wrapper script if needed
begin readAPriori
    l2cf: Boolean, formula="l2cf", /evaluate, /literal
    Dump, options='--Err', Boolean=l2cf
end readAPriori
})
; -------------------------------------------- Global settings ------
begin GlobalSettings

    !ifdef(flagUsingPCF, {},
    {
    ;; Setup the stuff for reading and dealing with l1b files

    !ifdef(SIDSRTVL,
    {
    l1boa, file='!inpathl1boa/MLS-Aura_L1BOA-Full_!l1boaVersion--t_!day.!l1boaHDFVersion'
    l1brad, file='!inpathl1brad/MLS-Aura_L1BRAD-GHz_!l1bradVersion-!cleanNoisy--t_!day.h5'
    l1brad, file='!inpathl1brad/MLS-Aura_L1BRAD-DACS_!l1bradVersion-!cleanNoisy--t_!day.h5'
    l1brad, file='!inpathl1brad/MLS-Aura_L1BRAD-THz_!l1bradVersion-!cleanNoisy--t_!day.h5'
    },{
    l1boa, file='!inpathl1boa/MLS-Aura_L1BOA_!l1bradVersion_!day.h5'
    l1brad, file='!inpathl1brad/MLS-Aura_L1BRADG_!l1bradVersion_!day.h5'
    l1brad, file='!inpathl1brad/MLS-Aura_L1BRADD_!l1bradVersion_!day.h5'
    l1brad, file='!inpathl1brad/MLS-Aura_L1BRADT_!l1bradVersion_!day.h5'
    })

    startTime = '!year(!day)-!doy(!day)T00:00:00.0000'
    !ifdef(flagDoingSnoop, {endTime = '!year(!day)-!doy(!day)T23:59:59.9999'},
    {endTime = '!year(!day)-!doy(!day)T23:59:59.4999'})
    !ifdef(flagUseLeapSecFile, {leapsecfile = '!inpathleapsec/leapsec.dat'})
    })

    ;; This is the list of DirectWriteFiles that sources are to be
    ;; distributed among automatically
!forall(makeOneDWFPair,!oneToNineteen)

    ;; Setup our vertical grids
    !include(constructstandardgrids.l2cf)

    ;; Setup our emiprical geometry.  This is for getting an empirical
    ;; value for longitude as a function of geodetic cangle
    empiricalGeometry, terms=[ $
                               -1.06863, 43.0943, -16.2062, 8.12730, -4.58416, 2.75786, -1.72880, $
                               1.11523, -0.733464, 0.489792, -0.331852, 0.227522, -0.156428, $
                               0.108031, -0.0757825, 0.0536980, -0.0375161, 0.0260555, $
                               -0.0188811, 0.0138453, -0.00959350]

    ;; Define the frequency grids for the extinciton quantities
    !include(extinctionfgrids.l2cf)
    !include(baselinefgrids.l2cf)

    ;; Read antenna patterns
    ForwardModelGlobal, $
      antennaPatterns=!antennaFile, $
      filterShapes=!filterFile, $
      DACSFiltershapes=!dacsFilterFile, $
      pointingGrids=!pfgFile, $
      pfaFiles=!pfaFiles
    
!forall(readStandardL2PC,!standardBands)

!forall(readSZAL2PC,!szaBands)

!forall(readPolarL2PC,!polarizedBands)

!forall(readO3HRL2PC,!o3hrBands)

!forall(readPolarO3HRL2PC,!polarizedBands)
    ;; Now define any forward models that will be used in more than one phase.

    ;; Define l2pc bin selectors
    elevationCost: BinSelector, type=fieldElevation, cost = 10 degrees
    strengthCost: BinSelector, type=fieldStrength, cost = 1 gauss
    latCost: BinSelector, type=latitude, cost = 1 degrees 
    szaCost: BinSelector, type=sza, cost=10 degrees
    hrBin: BinSelector, type=nameFragment, nameFragment='HIRES'
    lrBin: BinSelector, type=nameFragment, nameFragment='LORES'
    polarBin: BinSelector, type=nameFragment, nameFragment='POLAR'
    scalarBin: BinSelector, type=nameFragment, nameFragment='SCALAR'
    latBin: BinSelector, type=nameFragment, nameFragment='LAT'
    szaBin: BinSelector, type=nameFragment, nameFragment='SZA'
    o3hrBin: BinSelector, type=nameFragment, nameFragment='O3HR'

end GlobalSettings
!divert(-1)
; $Log: globalsettings.l2cf,v $
; Revision 1.6  2018/03/13 23:20:36  pwagner
; Removed unused iterations field
;
; Revision 1.5  2015/10/07 21:05:54  pwagner
; flagWriteL2CFNameToStdErr now controls whether to do that
;
; Revision 1.4  2014/04/03 17:40:04  pwagner
; Removed l2ParSF; leapsecfile now optional
;
; Revision 1.3  2013/12/11 18:12:19  pwagner
; Repaired l2pcSuffixMonthly definition
;
; Revision 1.2  2013/10/17 22:31:17  pwagner
; scan models lacked specificQuantities, anyway, so removed them
;
; Revision 1.1  2010/04/21 23:36:37  pwagner
; First commit
;
!divert!dnl
@
