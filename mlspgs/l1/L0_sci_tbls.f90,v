head	2.15;
access;
symbols
	v5-02-NRT-19:2.15
	v6-00:2.15
	v5-02-NRT-18:2.15
	v5-02:2.15
	v5-01-NRT-17:2.15
	v5-01-NRT-16:2.15
	v5-01-NRT-15:2.15
	v5-01-NRT-14:2.15
	neuralnetworks-1-0:2.15.0.10
	cfm-single-freq-0-1:2.15.0.8
	v5-01:2.15
	v5-00:2.15
	v4-23-TA133:2.15.0.6
	mus-emls-1-70:2.15.0.4
	rel-1-0-englocks-work:2.15.0.2
	VUMLS1-00:2.15
	VPL1-00:2.15
	V4-22-NRT-08:2.15
	whdrel10_merged_to_here:2.15
	merge_whdrel10_from_here:2.14.6.2
	TAG_TRUNK_AFTER_PW_CHANGES:2.14
	TAG_TRUNK_BEFORE_PW_CHANGES:2.14
	VAM1-00:2.14
	whd-rel-1-0:2.14.0.6
	V4-21:2.14.0.4
	V4-13:2.14
	V4-12:2.14
	V4-11:2.14
	V4-10:2.14
	V3-43:2.14
	M4-00:2.14
	V3-41:2.14
	V3-40-PlusGM57:2.14.0.2
	V2-24-NRT-04:2.14
	V3-33:2.14
	V2-24:2.14
	V3-31:2.14
	V3-30-NRT-05:2.14
	cfm-01-00:2.14
	V3-30:2.14
	V3-20:2.14
	V3-10:2.14
	V2-23-NRT-02:2.14
	V2-23:2.14
	V2-22-NRT-01:2.14
	V2-22:2.14
	V2-21:2.14
	V2-20:2.14
	V2-11:2.14
	V2-10:2.14
	V2-00:2.14
	V1-51:2.9
	V1-50:2.9
	V1-45:2.8
	V1-44:2.8
	V1-43:2.7
	V1-42:2.6
	V1-41:2.6
	V1-32:2.5
	V1-40:2.6
	V1-31:2.5
	V1-30:2.5
	V1-13:2.3
	V1-12:2.3
	V1-11:2.3
	V1-10:2.3
	newfwm-feb03:2.3.0.2
	V1-04:2.2
	V1-03:2.2
	V1-02:2.2
	V1-00:2.2
	newfwm-sep01:2.1.0.2
	V0-7:2.1
	V0-5-Level2:2.1
	V0-5-SIPS:2.1;
locks; strict;
comment	@# @;


2.15
date	2016.03.15.22.17.59;	author whdaffer;	state Exp;
branches;
next	2.14;

2.14
date	2006.06.14.13.46.09;	author perun;	state Exp;
branches
	2.14.6.1;
next	2.13;

2.13
date	2006.03.24.15.08.20;	author perun;	state Exp;
branches;
next	2.12;

2.12
date	2005.12.06.19.23.59;	author perun;	state Exp;
branches;
next	2.11;

2.11
date	2005.08.24.15.50.28;	author perun;	state Exp;
branches;
next	2.10;

2.10
date	2005.06.23.18.41.35;	author pwagner;	state Exp;
branches;
next	2.9;

2.9
date	2004.11.10.15.37.31;	author perun;	state Exp;
branches;
next	2.8;

2.8
date	2004.08.12.13.51.49;	author perun;	state Exp;
branches;
next	2.7;

2.7
date	2004.05.14.15.59.11;	author perun;	state Exp;
branches;
next	2.6;

2.6
date	2004.01.09.17.46.22;	author perun;	state Exp;
branches;
next	2.5;

2.5
date	2003.09.15.17.15.53;	author perun;	state Exp;
branches;
next	2.4;

2.4
date	2003.08.15.14.25.04;	author perun;	state Exp;
branches;
next	2.3;

2.3
date	2003.01.31.18.13.34;	author perun;	state Exp;
branches;
next	2.2;

2.2
date	2002.03.29.20.18.34;	author perun;	state Exp;
branches;
next	2.1;

2.1
date	2001.02.23.20.47.49;	author perun;	state Exp;
branches;
next	;

2.14.6.1
date	2015.10.09.10.21.38;	author whdaffer;	state Exp;
branches;
next	2.14.6.2;

2.14.6.2
date	2016.03.03.18.52.16;	author whdaffer;	state Exp;
branches;
next	;


desc
@@


2.15
log
@Merged whd-rel-1-0 back onto main branch. Most changes
are to comments, but there's some modification to Calibration.f90
and MLSL1Common to support some new modules: MLSL1Debug and SnoopMLSL1.
@
text
@! Copyright 2006, by the California Institute of Technology. ALL
! RIGHTS RESERVED. United States Government Sponsorship acknowledged. Any
! commercial use must be negotiated with the Office of Technology Transfer
! at the California Institute of Technology.

! This software may be subject to U.S. export control laws. By accepting this
! software, the user agrees to comply with all applicable U.S. export laws and
! regulations. User has the responsibility to obtain export licenses, or other
! export authority as may be required before exporting such information to
! foreign countries or providing access to foreign persons.

!=============================================================================
MODULE L0_sci_tbls  ! Define L0 science tables
!=============================================================================

  USE MLSL1Common, ONLY: R8, FBnum, FBchans, MBnum, MBchans, WFnum, WFchans, &
       DACSnum, DACSchans, MaxMIFs, THzChans, THzNum, NumBands, BankLogical_T

  IMPLICIT NONE

!---------------------------- RCS Module Info ------------------------------
  CHARACTER (len=*), PRIVATE, PARAMETER :: ModuleName= &
       "$RCSfile: L0_sci_tbls.f90,v $"
  PRIVATE :: not_used_here 
!---------------------------------------------------------------------------

! Level 0 Raw Science Packet #1 (sized for 1 MIF)

  CHARACTER (LEN=1024), TARGET :: l0_sci1
  CHARACTER (LEN=1), POINTER :: type_sci1

! Level 0 Raw Science Packet #2 (sized for 1 MIF)

  CHARACTER (LEN=1024), TARGET :: l0_sci2
  CHARACTER (LEN=1), POINTER :: type_sci2

!! Science packet data type

  INTEGER sci_type

!! CCSDS header

  TYPE CCSDS_T
     SEQUENCE
     CHARACTER (LEN=2) :: ID
     CHARACTER (LEN=2) :: seq_cntl
     CHARACTER (LEN=2) :: len
     CHARACTER (LEN=1) :: hdr
     CHARACTER (LEN=1) :: octet_1
     CHARACTER (LEN=1) :: octet_2
     CHARACTER (LEN=4) :: coarse_time
     CHARACTER (LEN=2) :: fine_time
  END TYPE CCSDS_T

  !! Using format of 08/25/03. This (and the other Sci[12]_T[12]_T user types is
  !! the structure of the *raw* science packet n, type m. I.e. this maps
  !! directly to the structure of the packet itself.
  
  !! As of 2015/05/21 we only ever used type 1 for science packet 1 and 2.

  TYPE Sci1_T1_T     ! science packet 1 Type I
     SEQUENCE
     TYPE (CCSDS_T)    :: CCSDS
     CHARACTER (LEN=1) :: TYPE
     CHARACTER (LEN=1) :: MIF
     CHARACTER (LEN=2) :: MAF
     CHARACTER (LEN=2) :: orbit
     CHARACTER (LEN=1) :: spare1
!
!! FB_dat contains the filter banks, in this order:
!!  FB12, FB01, status, FB04, FB02, status, FB07, FB03, FB05, FB13, MB01, FB06,
!!  FB09, FB08
!
     CHARACTER (LEN=2) :: FB_dat(2*25+1+2*25+1+4*25+11+25+1+2*25)
      ! filter bank plus statuses
     CHARACTER (LEN=1) :: GM05_stat
     CHARACTER (LEN=1) :: GM06_stat
     CHARACTER (LEN=1) :: GM07_stat(2)
     CHARACTER (LEN=1) :: GM08_stat(2)
     CHARACTER (LEN=1) :: GM09_stat(2)
     CHARACTER (LEN=13) :: GM10_stat
     CHARACTER (LEN=13) :: GM11_stat
     CHARACTER (LEN=1) :: GM12_stat
     CHARACTER (LEN=13) :: GM13_stat
     CHARACTER (LEN=1) :: GM14_stat
     CHARACTER (LEN=1) :: GM15_stat(5)
     CHARACTER (LEN=1) :: DACS(320)
     CHARACTER (LEN=1) :: diag_addr(32)
     CHARACTER (LEN=1) :: read_value
     CHARACTER (LEN=1) :: status_value
     CHARACTER (LEN=2) :: status_version
     CHARACTER (LEN=1) :: read_riu_id
     CHARACTER (LEN=1) :: status_riu_id
     CHARACTER (LEN=1) :: spare2(10)
     CHARACTER (LEN=2) :: checksum
  END TYPE Sci1_T1_T

  TYPE Sci2_T1_T     ! science packet 2 Type I
     SEQUENCE
     TYPE (CCSDS_T)    :: CCSDS
     CHARACTER (LEN=1) :: TYPE
     CHARACTER (LEN=1) :: MIF
     CHARACTER (LEN=2) :: MAF
     CHARACTER (LEN=2) :: orbit
     CHARACTER (LEN=1) :: spare1
!
!! FB_dat contains the filter banks, in this order:
!!  MB03, FB10, status, MB02, FB11, status, FB15, FB14, MB05, MB04, status,
!!   FB17, FB16, FB19, FB18
!
     CHARACTER (LEN=2) :: FB_dat(11+25+1+11+25+1+2*25+2*11+1+4*25)
                          ! filter, mid-band plus status data
     CHARACTER (LEN=1) :: DACS(320)
     CHARACTER (LEN=24) :: thz_scan_switch
     CHARACTER (LEN=80) :: laser_lo
     CHARACTER (LEN=1) :: TM03_stat(2)
     CHARACTER (LEN=24) :: ghz_ant_scan
     CHARACTER (LEN=24) :: ghz_switch
     CHARACTER (LEN=1) :: spare2(25)
     CHARACTER (LEN=1) :: attenuation(5)
     CHARACTER (LEN=1) :: spare3(2)
     CHARACTER (LEN=2) :: checksum
  END TYPE Sci2_T1_T

  TYPE Sci1_T2_T     ! science packet 1 Types II and III
     SEQUENCE
     TYPE (CCSDS_T)    :: CCSDS
     CHARACTER (LEN=1) :: TYPE
     CHARACTER (LEN=1) :: MIF
     CHARACTER (LEN=2) :: MAF
     CHARACTER (LEN=2) :: orbit
     CHARACTER (LEN=1) :: spare1
!
!! FB_dat contains the filter banks, in this order:
!!  FB12, FB01, status, FB04, FB02, status, FB07, FB03, FB05, FB13, FB09, FB08
!
     CHARACTER (LEN=2) :: FB_dat(2*25+1+2*25+1+6*25) ! filter bank plus statuses
     CHARACTER (LEN=1) :: GM05_stat
     CHARACTER (LEN=1) :: GM06_stat
     CHARACTER (LEN=1) :: GM07_stat(2)
     CHARACTER (LEN=1) :: GM08_stat(2)
     CHARACTER (LEN=1) :: GM09_stat(2)
     CHARACTER (LEN=13) :: GM10_stat
     CHARACTER (LEN=13) :: GM11_stat
     CHARACTER (LEN=1) :: GM12_stat
     CHARACTER (LEN=13) :: GM13_stat
     CHARACTER (LEN=1) :: GM14_stat
     CHARACTER (LEN=1) :: GM15_stat(5)
     CHARACTER (LEN=1) :: DACS(403)
     CHARACTER (LEN=1) :: diag_addr(32)
     CHARACTER (LEN=1) :: read_value
     CHARACTER (LEN=1) :: status_value
     CHARACTER (LEN=2) :: status_version
     CHARACTER (LEN=1) :: read_riu_id
     CHARACTER (LEN=1) :: status_riu_id
     CHARACTER (LEN=1) :: spare2
     CHARACTER (LEN=2) :: checksum
  END TYPE Sci1_T2_T

  TYPE Sci2_T2_T     ! science packet 2 Types II and III
     SEQUENCE
     TYPE (CCSDS_T)    :: CCSDS
     CHARACTER (LEN=1) :: TYPE
     CHARACTER (LEN=1) :: MIF
     CHARACTER (LEN=2) :: MAF
     CHARACTER (LEN=2) :: orbit
     CHARACTER (LEN=1) :: spare1
!
!! FB_dat contains the filter banks, in this order:
!!  MB01, FB06, status, MB03, FB10, status, MB02, FB11, status, FB15, FB14,
!!  MB05, MB04, status, FB17, FB16, FB19, FB18
!
     CHARACTER (LEN=2) :: FB_dat(11+25+1+11+25+1+11+25+1+2*25+2*11+1+4*25)
                          ! filter, mid-band plus status data
     CHARACTER (LEN=1) :: DACS(261)
     CHARACTER (LEN=24) :: thz_scan_switch
     CHARACTER (LEN=80) :: laser_lo
     CHARACTER (LEN=1) :: TM03_stat(2)
     CHARACTER (LEN=24) :: ghz_ant_scan
     CHARACTER (LEN=24) :: ghz_switch
     CHARACTER (LEN=1) :: spare2(10)
     CHARACTER (LEN=1) :: attenuation(5)
     CHARACTER (LEN=1) :: spare3(2)
     CHARACTER (LEN=2) :: checksum
  END TYPE Sci2_T2_T

  TYPE (Sci1_T1_T), TARGET :: sci1_T1
  TYPE (Sci2_T1_T), TARGET :: sci2_T1

  TYPE (Sci1_T2_T), TARGET :: sci1_T2
  TYPE (Sci2_T2_T), TARGET :: sci2_T2

  !! Formats to convert Type I raw Science packets internally:

  CHARACTER (LEN=*), PARAMETER :: Sci1_T1_fmt = &
       "(3A2,3A1,A4,A2,2A1,2A2,A1,2(25A2),A2,2(25A2),A2,4(25A2),11A2,25A2,A2,&
       & 2(25A2),2A1,3(2A1),2A13,A1,A13,A1,5A1,320A1,32A1,2A1,A2,2A1,10A1,A2)"

  CHARACTER (LEN=*), PARAMETER :: Sci2_T1_fmt = &
       "(3A2,3A1,A4,A2,2A1,2A2,A1,2(11A2,25A2,A2),2(25A2),2(11A2),A2,4(25A2),&
       & 320A1,A24,A80,2A1,2A24,25A1,5A1,2A1,A2)"

  !! Formats to convert Type II/III raw Science packets internally:

  CHARACTER (LEN=*), PARAMETER :: Sci1_T2_fmt = &
       "(3A2,3A1,A4,A2,2A1,2A2,A1,2(25A2),A2,2(25A2),A2,6(25A2),2A1,3(2A1),&
       & 2A13,A1,A13,A1,5A1,403A1,32A1,2A1,A2,3A1,A2)"

  CHARACTER (LEN=*), PARAMETER :: Sci2_T2_fmt = &
       "(3A2,3A1,A4,A2,2A1,2A2,A1,3(11A2,25A2,A2),2(25A2),2(11A2),A2,4(25A2),&
       & 261A1,A24,A80,2A1,2A24,10A1,5A1,2A1,A2)"

!! Character (LEN=1) pointer types

  TYPE CS1PTR
     CHARACTER (LEN=1), POINTER :: ptr
  END TYPE CS1PTR

  TYPE C1PTR
     CHARACTER (LEN=1), DIMENSION (:), POINTER :: ptr
  END TYPE C1PTR

!! Character (LEN=2) pointer types

  TYPE CS2PTR
     CHARACTER (LEN=2), POINTER :: ptr
  END TYPE CS2PTR

  TYPE C2PTR
     CHARACTER (LEN=2), DIMENSION (:), POINTER :: ptr
  END TYPE C2PTR

  TYPE CS13PTR
     CHARACTER (LEN=13), POINTER :: ptr
  END TYPE CS13PTR

  !! Generic pointers. Used after reading data and determining data format for
  !! pointing to various bits of Sci[12]_T[12] packets

  TYPE Sci_cptr_T

     TYPE (CS2PTR) :: MAF(2)         ! MAF pointers
     TYPE (CS1PTR) :: MIF(2)         ! MIF pointers
     TYPE (CS2PTR) :: orbit(2)       ! orbit pointers
     TYPE (C2PTR)  :: FB(FBnum)      ! Filter bank pointers
     TYPE (C2PTR)  :: MB(MBnum)      ! Mid-Band pointers
     TYPE (C1PTR)  :: DACS(DACSnum)  ! DACS pointers
     TYPE (CS13PTR) :: WF(WFnum)     ! Wide filter pointers
     TYPE (C1PTR) :: GSN             ! GHz Switch Network
     TYPE (CS1PTR) :: THzSw          ! THz Switch
     CHARACTER (LEN=80), POINTER :: LLO_DN         ! Laser LO data pointers
     CHARACTER (LEN=24), POINTER :: GHz_ant_scan, GHz_sw, THz_sw
     TYPE (C1PTR) :: Attenuation     ! Attenuation read backs

  END TYPE Sci_cptr_T

  TYPE (Sci_cptr_T) :: Sci_cptr(2)

!! Filter Bank offsets within data field in Type I science packets:

  INTEGER, PARAMETER :: FB_T1_offset(FBnum) = (/ 1, 26, 52, 77, 103, 128, &
       & 153, 178, 214, 240, 265, 12, 49, 75, 100, 148, 173, 198, 223 /)

!! Filter Bank offsets within data field in Type II/III science packets:

  INTEGER, PARAMETER :: FB_T2_offset(FBnum) = (/ 1, 26, 52, 77, 103, 128, &
       & 153, 178, 203, 228, 12, 49, 86, 112, 137, 185, 210, 235, 260 /)

!! Mid-band offsets within data field in Type I science packets:

  INTEGER, PARAMETER :: MB_T1_offset(MBnum) = (/ 203, 38, 1, 136, 125 /)

!! Mid-band offsets within data field in Type II/III science packets:

  INTEGER, PARAMETER :: MB_T2_offset(MBnum) = (/ 1, 75, 38, 173, 162 /)

!! Filter bank numbers within the Type I science packets

  INTEGER, PARAMETER :: Pkt1_T1_FB(11) = (/ 12, 1, 4, 2, 7, 3, 5, 13, 6, 9, 8 /)
  INTEGER, PARAMETER :: Pkt2_T1_FB(8) = (/ 10, 11, 15, 14, 17, 16, 19, 18 /)

!! Filter bank numbers within the Type II/III science packets

  INTEGER, PARAMETER :: Pkt1_T2_FB(10) = (/ 12, 1, 4, 2, 7, 3, 5, 13, 9, 8 /)
  INTEGER, PARAMETER :: Pkt2_T2_FB(9) = (/ 6, 10, 11, 15, 14, 17, 16, 19, 18 /)

!! L0 science data packet for 1 MIF:

  TYPE Sci_pkt_T
     REAL(r8) :: secTAI
     INTEGER :: MAFno
     INTEGER :: MIFno
     INTEGER :: Orbit
     INTEGER :: FB(FBchans,FBnum)
     INTEGER :: MB(MBchans,MBnum)
     INTEGER :: WF(WFchans,WFnum)
     REAL :: DACS(DACSchans,DACSnum)
     REAL :: TP(DACSnum)               ! DACS Total Power (analog)
     REAL(r8) :: TPdigP(DACSnum), TPdigN(DACSnum)  ! DACS Total Power (digital)
     REAL :: APE_pos(2), ASA_pos(2), GSM_pos(2), TSSM_pos(2)
     REAL :: APE_pos_P(2), TSSM_pos_P(2)
     REAL :: APE_theta, ASA_theta, GSM_theta, TSSM_theta
     REAL :: scAngleG                  ! Boresight wrt. spc +x (GHz)
     REAL :: scAngleT                  ! Boresight wrt. spc +x (THz)
     REAL :: altG, latG                ! Geod alt and lat for GHz tangent point

     CHARACTER(len=1) :: GHz_sw_pos    ! badly named: a code for where the GHZ switching mirror 
                                       ! is looking. 'L'=limb, 'S'=space, ..., etc
     CHARACTER(len=1) :: THz_sw_pos
     CHARACTER(len=80) :: LLO_DN       ! Laser LO DN data
     REAL :: LLO_EU(16)                ! Laser LO EU data
     CHARACTER(len=70) :: PLL_DN       ! Phase Lock Loop data
     INTEGER :: GSN(4)                 ! GHz Switch Network readings
     INTEGER :: THzSw                  ! THz Switch reading
     INTEGER :: BandSwitch(5)          ! band associated with each switch
     TYPE (BankLogical_T) :: MaxAtten  ! Whether in maximum attenuation
     TYPE (BankLogical_T) :: DeltaAtten  ! Whether attenuation changed
     LOGICAL :: AttenMaxed             ! Some attenuation is maximum
     LOGICAL :: CRC_good
  END TYPE Sci_pkt_T

!! L0 science packet for 1 MIF:

  TYPE (Sci_pkt_T) :: Sci_pkt

!! L0 science for 1 MAF:

  TYPE (Sci_pkt_T) :: SciMAF(0:(MaxMIFs-1))

!! L0 THz science data packet for 1 MIF:

  TYPE THz_Sci_pkt_T
     REAL(r8) :: secTAI
     INTEGER :: MAFno
     INTEGER :: MIFno
     INTEGER :: Orbit
     INTEGER :: FB(THzChans,THzNum)
     LOGICAL :: MaxAtten(THzNum)       ! Whether in maximum attenuation
     LOGICAL :: AttenMaxed             ! Some attenuation is maximum
     REAL :: TSSM_pos(2), TSSM_theta
     REAL :: scAngle                   ! Boresight wrt. spc +x
     CHARACTER(len=1) :: SwMirPos
     REAL :: LLO_Bias                  ! LLO Bias V
     INTEGER :: BandSwitch(4:5)        ! band associated with switches #4 and #5
     LOGICAL :: CRC_good
  END TYPE THz_Sci_pkt_T

!! L0 THz science for 1 MAF:

  TYPE (THz_Sci_pkt_T) :: THzSciMAF(0:(MaxMIFs-1))

!! L0 DACS data for 1 MIF:

  TYPE DACS_pkt_T
     INTEGER :: C_K(DACSchans,DACSnum)  ! C for compressed; K for uncompressed
     INTEGER :: D(4,DACSnum)            ! State counters
     INTEGER :: TP(DACSnum)
     INTEGER :: DIO(DACSnum)
     INTEGER :: LO(DACSnum)
     INTEGER :: Zlag(DACSnum)
     LOGICAL :: Compressed
  END TYPE DACS_pkt_T

!! L0 DACS data for 1 MIF:

  TYPE (DACS_pkt_T) :: DACS_pkt

!! L0 DACS data for 1 MAF:

  TYPE (DACS_pkt_T) :: DACS_MAF(0:(MaxMIFs-1))

!! Attenuation setting read-back structure:

  ! <whd> The telemetry only reports when the attenuation changes. This .Value field
  ! is loaded from telemetry, but only that first one will ever appear unless a
  ! band's attenuation is changed during the run.
  !
  ! Also, I'm unclear as to why the first number is the RIU? Most of the other
  ! documentation/code refers to RIU numbers in the small digits (e.g. in
  ! engtlm.tbl they refered to as, e.g. GM[01-15], etc.</whd>

  TYPE Atten_T
     INTEGER :: RIU
     INTEGER :: Addr
     INTEGER :: Mask
     INTEGER :: Value 
     INTEGER :: Band, Link
  END TYPE Atten_T

!! Band attenuation table:

  TYPE (Atten_T), PARAMETER :: BandAtten(NumBands-2) = (/ &
       Atten_T ( 91, 49168, 255, 0,  1, 22), & ! 5B, C010, FF, 0   Band  1
       Atten_T ( 95, 49170, 255, 0,  2, 23), & ! 5F, C012, FF, 0   Band  2
       Atten_T ( 95, 49171, 255, 0,  3,  0), & ! 5F, C013, FF, 0   Band  3
       Atten_T ( 95, 49172, 255, 0,  4,  0), & ! 5F, C014, FF, 0   Band  4
       Atten_T ( 95, 49173, 255, 0,  5,  0), & ! 5F, C015, FF, 0   Band  5
       Atten_T ( 95, 49174, 255, 0,  6, 27), & ! 5F, C016, FF, 0   Band  6
       Atten_T ( 96, 49169, 255, 0,  7, 24), & ! 60, C011, FF, 0   Band  7
       Atten_T ( 96, 49170, 255, 0,  8,  0), & ! 60, C012, FF, 0   Band  8
       Atten_T ( 96, 49171, 255, 0,  9, 25), & ! 60, C013, FF, 0   Band  9
       Atten_T (110, 49170, 255, 0, 10, 29), & ! 6E, C012, FF, 0   Band 10
       Atten_T (110, 49171, 255, 0, 11, 28), & ! 6E, C013, FF, 0   Band 11
       Atten_T (110, 49172, 255, 0, 12,  0), &  ! 6E, C014, FF, 0  Band 12
       Atten_T (110, 49173, 255, 0, 13,  0), &  ! 6E, C015, FF, 0  Band 13
       Atten_T (110, 49174, 255, 0, 14,  0), &  ! 6E, C016, FF, 0  Band 14
       Atten_T ( 84, 49170, 255, 0, 15,  0), &  ! 54, C012, FF, 0  Band 15
       Atten_T ( 84, 49169, 255, 0, 16,  0), &  ! 54, C011, FF, 0  Band 16
       Atten_T ( 84, 49168, 255, 0, 17,  0), &  ! 54, C010, FF, 0  Band 17
       Atten_T ( 84, 49173, 255, 0, 18,  0), &  ! 54, C015, FF, 0  Band 18
       Atten_T ( 84, 49172, 255, 0, 19,  0), &  ! 54, C014, FF, 0  Band 19
       Atten_T ( 84, 49171, 255, 0, 20,  0), &  ! 54, C013, FF, 0  Band 20
       Atten_T ( 92, 49168, 255, 0, 21, 26), & ! 5C, C010, FF, 0   Band 21
       Atten_T (111, 49168, 255, 0, 22,  1), & ! 6F, C010, FF, 0   Band 22
       Atten_T ( 97, 49168, 255, 0, 23,  2), & ! 61, C010, FF, 0   Band 23
       Atten_T (111, 49169, 255, 0, 24,  7), & ! 6F, C011, FF, 0   Band 24
       Atten_T ( 97, 49169, 255, 0, 25,  9), & ! 61, C011, FF, 0   Band 25/26
       Atten_T (110, 49175, 255, 0, 30, 31), & ! 6E, C017, FF, 0   Band 30/31
       Atten_T ( 91, 49169, 255, 0, 32,  0), & ! 5B, C011, FF, 0   Band 32
       Atten_T ( 91, 49170, 255, 0, 32,  0), & ! 5B, C012, FF, 0   Band 32
       Atten_T ( 96, 49172, 255, 0, 33,  0), & ! 60, C014, FF, 0   Band 33
       Atten_T ( 96, 49173, 255, 0, 33,  0), & ! 60, C0145, FF, 0  Band 33
       Atten_T ( 92, 49169, 255, 0, 34,  0), & ! 5C, C011, FF, 0   Band 34
       Atten_T ( 92, 49170, 255, 0, 34,  0) &  ! 5C, C012, FF, 0   Band 34
       /)

!! Default APE theta values for use in simulations:

  REAL, PARAMETER :: APE_theta_dflt(0:(MaxMIFs-1)) = (/ &
       357.054077, 357.054626, 357.053955, 357.053131, 357.047852, 357.041138, &
       357.034424, 357.027649, 357.020782, 357.013214, 357.006287, 356.999695, &
       356.992676, 356.986328, 356.978577, 356.971558, 356.965027, 356.958191, &
       356.950928, 356.944214, 356.937225, 356.930786, 356.923676, 356.916199, &
       356.909760, 356.902863, 356.896057, 356.889343, 356.881958, 356.875549, &
       356.868744, 356.861572, 356.854614, 356.847412, 356.840759, 356.834351, &
       356.826874, 356.819763, 356.813293, 356.806274, 356.799866, 356.792267, &
       356.785126, 356.778625, 356.771820, 356.764740, 356.757874, 356.750336, &
       356.743896, 356.737152, 356.729980, 356.723419, 356.715881, 356.709198, &
       356.702393, 356.695282, 356.688202, 356.681671, 356.674561, 356.667908, &
       356.660309, 356.653564, 356.647156, 356.640198, 356.632874, 356.625854, &
       356.618988, 356.612671, 356.605469, 356.598145, 356.586060, 356.567963, &
       356.549347, 356.531250, 356.513000, 356.494934, 356.476685, 356.458160, &
       356.440033, 356.421631, 356.403198, 356.384857, 356.366272, 356.348206, &
       356.329773, 356.311127, 356.292816, 356.274719, 356.256470, 356.237823, &
       356.219788, 356.201416, 356.183014, 356.164368, 356.146118, 356.127747, &
       356.109314, 356.090790, 356.072693, 356.054321, 356.036072, 356.017456, &
       355.999084, 355.981110, 355.962738, 355.944458, 355.926056, 355.907867, &
       355.889496, 355.871094, 355.852722, 355.821472, 355.774963, 355.727386, &
       355.681091, 355.633942, 355.587402, 355.540466, 355.493958, 355.446655, &
       355.399780, 355.353210, 355.306183, 355.282623, 355.293762, 355.323059, &
       355.365845, 355.421570, 355.488007, 355.564270, 355.648132, 355.739014, &
       355.835449, 355.936096, 356.039490, 356.144409, 356.249878, 356.353607, &
       356.456207, 356.553894, 356.647034, 356.733826, 356.813080, 356.882874, &
       356.942322, 356.990479, -999.9,     -999.9,     -999.9,     -999.9 /)

!! Default TSSM theta values for use in simulations:

  REAL, PARAMETER :: TSSM_theta_dflt(0:(MaxMIFs-1)) = (/ &
       359.499664, 359.499969, 359.500000, 359.457245, 359.371796, 359.287109, &
       359.202026, 359.156891, 359.150726, 359.144409, 359.138245, 359.131958, &
       359.125702, 359.119476, 359.113312, 359.106995, 359.100769, 359.094543, &
       359.088287, 359.082001, 359.075836, 359.069550, 359.063293, 359.057098, &
       359.050842, 359.044586, 359.038391, 359.032074, 359.025909, 359.019653, &
       359.013428, 359.007202, 359.000885, 358.994751, 358.988464, 358.982269, &
       358.975952, 358.969727, 358.963501, 358.957275, 358.951080, 358.944824, &
       358.938538, 358.932373, 358.926025, 358.919830, 358.913574, 358.907288, &
       358.901123, 358.894897, 358.888672, 358.882385, 358.876160, 358.869934, &
       358.863708, 358.857483, 358.851288, 358.844940, 358.835876, 358.823883, &
       358.811829, 358.799835, 358.787842, 358.775940, 358.763916, 358.751923, &
       358.739868, 358.727875, 358.715912, 358.703857, 358.691925, 358.679932, &
       358.667908, 358.655945, 358.643982, 358.631927, 358.619995, 358.607971, &
       358.596100, 358.584015, 358.572052, 358.560120, 358.548096, 358.536072, &
       358.524109, 358.512054, 358.500153, 358.488068, 358.476013, 358.464111, &
       358.452118, 358.440094, 358.428131, 358.416107, 358.404083, 358.392090, &
       358.380127, 358.368103, 358.356171, 358.344147, 358.332092, 358.320099, &
       358.308167, 358.296173, 358.284119, 358.255463, 358.210388, 358.165283, &
       358.120331, 358.075256, 358.030426, 357.985535, 357.940704, 357.895630, &
       357.850800, 357.805695, 357.760498, 357.656311, 357.147430, 356.815796, &
       356.798615, 356.798615, 356.797241, 356.797241, 356.797913, 356.797913, &
       356.797241, 356.797241, 356.797913, 356.797241, 356.797913, 322.130554, &
       218.175171, 178.761719, 178.744553, 178.747986, 178.747299, 178.747986, &
       178.745926, 178.747986, 178.748672, 143.791550, 39.4406586, 0.23229003, &
       90.0744781, 359.884460, 359.715027, -999.9,     -999.9,     -999.9 /)

CONTAINS

  SUBROUTINE InitSciPointers

    INTEGER :: i, pkt_offset

    !! Initialize Science packet type pointers

    type_sci1 => l0_sci1(16:16)
    type_sci2 => l0_sci2(16:16)

    !! Initialize pointers for Type I science packets: MAF, MIF, orbit: The
    !! index to sci_cptr is the `type' of the packet. Always == 1 for the
    !! mission to date (1 Jun, 2015). The index into MAF is sci1(1) or sci2(2)
    !! packet


    sci_cptr(1)%MAF(1)%ptr => sci1_T1%MAF
    sci_cptr(1)%MAF(2)%ptr => sci2_T1%MAF
    sci_cptr(1)%MIF(1)%ptr => sci1_T1%MIF
    sci_cptr(1)%MIF(2)%ptr => sci2_T1%MIF
    sci_cptr(1)%orbit(1)%ptr => sci1_T1%orbit
    sci_cptr(1)%orbit(2)%ptr => sci2_T1%orbit

    !! Filter Bank pointers

    !!  Science packet #1

    DO i = 1, SIZE (Pkt1_T1_FB)
       sci_cptr(1)%FB(Pkt1_T1_FB(i))%ptr => &
        sci1_T1%FB_dat(FB_T1_offset(i):FB_T1_offset(i)+24)
    ENDDO

    !!  Science packet #2

    pkt_offset = SIZE (Pkt1_T1_FB)
    DO i = 1, SIZE (Pkt2_T1_FB)
       sci_cptr(1)%FB(Pkt2_T1_FB(i))%ptr => &
        sci2_T1%FB_dat(FB_T1_offset(i+pkt_offset):FB_T1_offset(i+pkt_offset)+24)
    ENDDO

    !! Mid-Band pointers

    sci_cptr(1)%MB(1)%ptr => sci1_T1%FB_dat(MB_T1_offset(1):MB_T1_offset(1)+10)
    DO i = 2, MBNum
       sci_cptr(1)%MB(i)%ptr => &
            sci2_T1%FB_dat(MB_T1_offset(i):MB_T1_offset(i)+10)
    ENDDO

    !! Wide filter pointers

    sci_cptr(1)%WF(1)%ptr => sci1_T1%GM10_stat
    sci_cptr(1)%WF(2)%ptr => sci1_T1%GM13_stat
    sci_cptr(1)%WF(3)%ptr => sci1_T1%GM11_stat

    !! DACS pointers

    sci_cptr(1)%DACS(1)%ptr => sci1_T1%DACS(1:158)
    sci_cptr(1)%DACS(2)%ptr => sci1_T1%DACS(159:)
    sci_cptr(1)%DACS(3)%ptr => sci2_T1%DACS(1:158)
    sci_cptr(1)%DACS(4)%ptr => sci2_T1%DACS(159:)

    sci_cptr(1)%GHz_ant_scan => sci2_T1%ghz_ant_scan   ! GHz antenna/scan data
    sci_cptr(1)%GHz_sw => sci2_T1%ghz_switch           ! GHz switching data
    sci_cptr(1)%THz_sw => sci2_T1%thz_scan_switch      ! THz switching data
    sci_cptr(1)%GSN%ptr => sci1_T1%GM15_stat(2:5)      ! GSN data
    sci_cptr(1)%THzSw%ptr => sci2_T1%TM03_stat(2)      ! THz switch data
    sci_cptr(1)%LLO_DN => sci2_T1%laser_lo
    sci_cptr(1)%Attenuation%ptr => sci2_T1%Attenuation

    !! Initialize pointers for Type II/III science packets:

    !! MAF, MIF, orbit:

    sci_cptr(2)%MAF(1)%ptr => sci1_T2%MAF
    sci_cptr(2)%MAF(2)%ptr => sci2_T2%MAF
    sci_cptr(2)%MIF(1)%ptr => sci1_T2%MIF
    sci_cptr(2)%MIF(2)%ptr => sci2_T2%MIF
    sci_cptr(2)%orbit(1)%ptr => sci1_T2%orbit
    sci_cptr(2)%orbit(2)%ptr => sci2_T2%orbit
    sci_cptr(2)%Attenuation%ptr => sci2_T2%Attenuation

    !! Filter Bank pointers

    !!  Science packet #1

    DO i = 1, SIZE (Pkt1_T2_FB)
       sci_cptr(2)%FB(Pkt1_T2_FB(i))%ptr => &
        sci1_T2%FB_dat(FB_T2_offset(i):FB_T2_offset(i)+24)
    ENDDO

    !!  Science packet #2

    pkt_offset = SIZE (Pkt1_T2_FB)
    DO i = 1, SIZE (Pkt2_T2_FB)
       sci_cptr(2)%FB(Pkt2_T2_FB(i))%ptr => &
        sci2_T2%FB_dat(FB_T2_offset(i+pkt_offset):FB_T2_offset(i+pkt_offset)+24)
    ENDDO

    !! Mid-Band pointers

    sci_cptr(2)%MB(1)%ptr => sci1_T2%FB_dat(MB_T2_offset(1):MB_T2_offset(1)+10)
    DO i = 2, MBNum
       sci_cptr(2)%MB(i)%ptr => &
            sci2_T2%FB_dat(MB_T2_offset(i):MB_T2_offset(i)+10)
    ENDDO

    !! Wide filter pointers

    sci_cptr(2)%WF(1)%ptr => sci1_T2%GM10_stat
    sci_cptr(2)%WF(2)%ptr => sci1_T2%GM13_stat
    sci_cptr(2)%WF(3)%ptr => sci1_T2%GM11_stat

    !! DACS pointers

    sci_cptr(2)%DACS(1)%ptr => sci1_T2%DACS
    sci_cptr(2)%DACS(2)%ptr => sci2_T2%DACS
    sci_cptr(2)%DACS(3)%ptr => sci1_T2%DACS
    sci_cptr(2)%DACS(4)%ptr => sci2_T2%DACS

    sci_cptr(2)%GHz_ant_scan => sci2_T2%ghz_ant_scan   ! GHz antenna/scan data
    sci_cptr(2)%GHz_sw => sci2_T2%ghz_switch           ! GHz switching data
    sci_cptr(2)%THz_sw => sci2_T2%thz_scan_switch      ! THz switching data
    sci_cptr(2)%GSN%ptr => sci1_T2%GM15_stat(2:5)      ! GSN data
    sci_cptr(2)%THzSw%ptr => sci2_T2%TM03_stat(2)      ! THz switch data
    sci_cptr(2)%LLO_DN => sci2_T2%laser_lo

  END SUBROUTINE InitSciPointers

  LOGICAL FUNCTION not_used_here()
!---------------------------- RCS Ident Info -------------------------------
  CHARACTER (len=*), PARAMETER :: IdParm = &
       "$Id: L0_sci_tbls.f90,v 2.14.6.2 2016/03/03 18:52:16 whdaffer Exp $"
  CHARACTER (len=LEN(idParm)), SAVE :: Id = idParm
!---------------------------------------------------------------------------
    not_used_here = (id(1:1) == ModuleName(1:1))
  END FUNCTION not_used_here
END MODULE L0_sci_tbls

! $Log: L0_sci_tbls.f90,v $
! Revision 2.14.6.2  2016/03/03 18:52:16  whdaffer
! Comments only
!
! Revision 2.14.6.1  2015/10/09 10:21:38  whdaffer
! checkin of continuing work on branch whd-rel-1-0
!
! Revision 2.14  2006/06/14 13:46:09  perun
! Add TP variables to sci_pkt definition
!
! Revision 2.13  2006/03/24 15:08:20  perun
! Remove LimbAltFlag
!
! Revision 2.12  2005/12/06 19:23:59  perun
! Added LimbAltFlag to mark minimum altitude limb views
!
! Revision 2.11  2005/08/24 15:50:28  perun
! Add APE and TSSM pos_P to each science packet
!
! Revision 2.10  2005/06/23 18:41:35  pwagner
! Reworded Copyright statement, moved rcs id
!
! Revision 2.9  2004/11/10 15:37:31  perun
! Add altG and latG for GHz tangent point
!
! Revision 2.8  2004/08/12 13:51:49  perun
! Version 1.44 commit
!
! Revision 2.7  2004/05/14 15:59:11  perun
! Version 1.43 commit
!
! Revision 2.6  2004/01/09 17:46:22  perun
! Version 1.4 commit
!
! Revision 2.5  2003/09/15 17:15:53  perun
! Version 1.3 commit
!
! Revision 2.4  2003/08/15 14:25:04  perun
! Version 1.2 commit
!
! Revision 2.3  2003/01/31 18:13:34  perun
! Version 1.1 commit
!
! Revision 2.2  2002/03/29 20:18:34  perun
! Version 1.0 commit
!
! Revision 2.1  2001/02/23 20:47:49  perun
! Version 0.5 commit
!
@


2.14
log
@Add TP variables to sci_pkt definition
@
text
@d55 5
a59 1
!! Using format of 08/25/03
d193 1
a193 1
!! Formats to convert Type I raw Science packets internally:
d203 1
a203 1
!! Formats to convert Type II/III raw Science packets internally:
d237 2
a238 1
!! Generic pointers (used after reading data and determining data format)
d306 3
a308 1
     CHARACTER(len=1) :: GHz_sw_pos
d374 8
d386 1
a386 1
     INTEGER :: Value
d496 4
a499 1
    !! Initialize pointers for Type I science packets:
a500 1
    !! MAF, MIF, orbit:
d617 1
a617 1
       "$Id: L0_sci_tbls.f90,v 2.13 2006/03/24 15:08:20 perun Exp $"
d625 9
@


2.14.6.1
log
@checkin of continuing work on branch whd-rel-1-0
@
text
@d55 1
a55 5
  !! Using format of 08/25/03. This (and the other Sci[12]_T[12]_T user types is
  !! the structure of the *raw* science packet n, type m. I.e. this maps
  !! directly to the structure of the packet itself.
  
  !! As of 2015/05/21 we only ever used type 1 for science packet 1 and 2.
d189 1
a189 1
  !! Formats to convert Type I raw Science packets internally:
d199 1
a199 1
  !! Formats to convert Type II/III raw Science packets internally:
d233 1
a233 2
  !! Generic pointers. Used after reading data and determining data format for
  !! pointing to various bits of Sci[12]_T[12] packets
d301 1
a301 3

     CHARACTER(len=1) :: GHz_sw_pos    ! badly named: a code for where the GHZ switching mirror 
                                       ! is looking. 'L'=limb, 'S'=space, ..., etc
a366 8
  ! The telemetry only reports when the attenuation changes. This .Value field
  ! is loaded from telemetry, but only that first one will ever appear unless a
  ! band's attenuation is changed during the run.
  !
  ! Also, I'm unclear as to why the first number is the RIU? Most of the other
  ! documentation/code refers to RIU numbers in the small digits (e.g. in
  ! engtlm.tbl they refered to as, e.g. GM[01-15], etc.

d371 1
a371 1
     INTEGER :: Value 
d481 1
a481 4
    !! Initialize pointers for Type I science packets: MAF, MIF, orbit: The
    !! index to sci_cptr is the `type' of the packet. Always == 1 for the
    !! mission to date (1 Jun, 2015). The index into MAF is sci1(1) or sci2(2)
    !! packet
d483 1
d600 1
a600 1
       "$Id: L0_sci_tbls.f90,v 2.14 2006/06/14 13:46:09 perun Exp $"
a607 3
! Revision 2.14  2006/06/14 13:46:09  perun
! Add TP variables to sci_pkt definition
!
@


2.14.6.2
log
@Comments only
@
text
@d374 1
a374 1
  ! <whd> The telemetry only reports when the attenuation changes. This .Value field
d380 1
a380 1
  ! engtlm.tbl they refered to as, e.g. GM[01-15], etc.</whd>
d617 1
a617 1
       "$Id: L0_sci_tbls.f90,v 2.14.6.1 2015/10/09 10:21:38 whdaffer Exp $"
a624 3
! Revision 2.14.6.1  2015/10/09 10:21:38  whdaffer
! checkin of continuing work on branch whd-rel-1-0
!
@


2.13
log
@Remove LimbAltFlag
@
text
@d293 2
d600 1
a600 1
       "$Id: L0_sci_tbls.f90,v 2.12 2005/12/06 19:23:59 perun Exp $"
d608 3
@


2.12
log
@Added LimbAltFlag to mark minimum altitude limb views
@
text
@d1 1
a1 1
! Copyright 2005, by the California Institute of Technology. ALL
d22 1
a22 1
  character (len=*), private, parameter :: ModuleName= &
d24 1
a24 1
  private :: not_used_here 
a309 1
     LOGICAL :: LimbAltFlag            ! Flag for "L"imb greater than min alt
d595 1
a595 1
  logical function not_used_here()
d597 3
a599 3
  character (len=*), parameter :: IdParm = &
       "$Id: L0_sci_tbls.f90,v 2.11 2005/08/24 15:50:28 perun Exp $"
  character (len=len(idParm)), save :: Id = idParm
d602 1
a602 1
  end function not_used_here
d606 3
@


2.11
log
@Add APE and TSSM pos_P to each science packet
@
text
@d310 1
d599 1
a599 1
       "$Id: L0_sci_tbls.f90,v 2.10 2005/06/23 18:41:35 pwagner Exp $"
d607 3
@


2.10
log
@Reworded Copyright statement, moved rcs id
@
text
@d23 1
a23 1
       "$RCSfile: $"
d294 1
d598 1
a598 1
       "$Id: $"
d606 3
@


2.9
log
@Add altG and latG for GHz tangent point
@
text
@d1 10
a10 2
! Copyright (c) 2004, California Institute of Technology.  ALL RIGHTS RESERVED.
! U.S. Government Sponsorship under NASA Contract NAS7-1407 is acknowledged.
d21 5
a25 6
  PRIVATE :: Id, ModuleName
  !------------------------------- RCS Ident Info ------------------------------
  CHARACTER(LEN=130) :: id = &
       "$Id: L0_sci_tbls.f90,v 2.8 2004/08/12 13:51:49 perun Exp $"
  CHARACTER(LEN=*), PARAMETER :: ModuleName="$RCSfile: L0_sci_tbls.f90,v $"
  !-----------------------------------------------------------------------------
d594 8
d605 3
@


2.8
log
@Version 1.44 commit
@
text
@d16 1
a16 1
       "$Id: L0_sci_tbls.f90,v 2.7 2004/05/14 15:59:11 perun Exp $"
d290 1
d590 3
@


2.7
log
@Version 1.43 commit
@
text
@d16 1
a16 1
       "$Id: L0_sci_tbls.f90,v 2.6 2004/01/09 17:46:22 perun Exp $"
d286 2
a287 1
     REAL :: APE_pos(2), ASA_pos(2), GSA_pos(2), TSSA_pos(2)
d322 1
a322 1
     REAL :: TSSA_pos(2)
d401 1
a401 1
!! Default APE pos2 values for use in simulations:
d403 55
a457 43
  REAL, PARAMETER :: APE2_dflt(0:(MaxMIFs-1)) = (/ &
       357.049, 357.044, 357.038, 357.030, 357.023, 357.017, 357.010, 357.003, &
       356.995, 356.989, 356.983, 356.975, 356.968, 356.962, 356.955, 356.947, &
       356.941, 356.933, 356.927, 356.920, 356.913, 356.907, 356.899, 356.892, &
       356.885, 356.879, 356.871, 356.864, 356.858, 356.851, 356.844, 356.837, &
       356.831, 356.824, 356.816, 356.809, 356.802, 356.796, 356.789, 356.782, &
       356.776, 356.768, 356.761, 356.755, 356.748, 356.740, 356.733, 356.727, &
       356.721, 356.713, 356.706, 356.700, 356.693, 356.685, 356.679, 356.672, &
       356.665, 356.658, 356.651, 356.645, 356.637, 356.630, 356.623, 356.617, &
       356.609, 356.602, 356.596, 356.584, 356.565, 356.547, 356.529, 356.510, &
       356.491, 356.473, 356.455, 356.436, 356.418, 356.400, 356.382, 356.363, &
       356.345, 356.326, 356.308, 356.290, 356.271, 356.253, 356.235, 356.216, &
       356.198, 356.179, 356.161, 356.143, 356.125, 356.106, 356.088, 356.069, &
       356.051, 356.032, 356.014, 355.996, 355.978, 355.960, 355.941, 355.923, &
       355.904, 355.886, 355.868, 355.849, 355.818, 355.771, 355.724, 355.677, &
       355.631, 355.584, 355.537, 355.490, 355.444, 355.397, 355.350, 355.303, &
       355.277, 355.288, 355.318, 355.361, 355.416, 355.483, 355.559, 355.643, &
       355.734, 355.831, 355.931, 356.035, 356.140, 356.245, 356.349, 356.452, &
       356.549, 356.643, 356.729, 356.808, 356.879, 356.938, 356.986, 357.022, &
       357.042, 357.049,  -999.9, 357.049,  -999.9,  -999.9 /)

!! Default TSE pos2 values for use in simulations:

  REAL, PARAMETER :: TSE2_dflt(0:(MaxMIFs-1)) = (/ &
       359.500,  -999.9, 359.500, 359.458, 359.372, 359.287, 359.202, 359.157, &
       359.151, 359.144, 359.138, 359.132, 359.126, 359.119, 359.113, 359.107, &
       359.101, 359.094, 359.088, 359.082, 359.076, 359.070, 359.063, 359.057, &
       359.051, 359.045, 359.038, 359.032, 359.026, 359.020, 359.013, 359.007, &
       359.001, 358.995, 358.988, 358.982, 358.976, 358.970, 358.963, 358.957, &
       358.951, 358.945, 358.939, 358.932, 358.926, 358.920, 358.914, 358.907, &
       358.901, 358.895, 358.889, 358.882, 358.876, 358.870, 358.864, 358.857, &
       358.851, 358.845, 358.836, 358.824, 358.812, 358.800, 358.788, 358.776, &
       358.764, 358.752, 358.740, 358.728, 358.716, 358.704, 358.692, 358.680, &
       358.668, 358.656, 358.644, 358.632, 358.620, 358.608, 358.596, 358.584, &
       358.572, 358.560, 358.548, 358.536, 358.524, 358.512, 358.500, 358.488, &
       358.476, 358.464, 358.452, 358.440, 358.428, 358.416, 358.404, 358.392, &
       358.380, 358.368, 358.356, 358.344, 358.332, 358.320, 358.308, 358.296, &
       358.284, 358.255, 358.210, 358.165, 358.120, 358.075, 358.030, 357.985, &
       357.941, 357.896, 357.851, 357.806, 357.760, 357.729, 357.332, 356.845, &
       356.798, 356.797, 356.797, 356.798, 356.797, 356.797, 356.798, 356.797, &
       356.797, 356.797, 356.797, 330.202, 210.671, 178.750, 178.748, 178.748, &
       178.748, 178.748, 178.748, 178.747, 178.748, 151.986, 32.2582, &
       0.113705, 359.962, 359.790, 359.620, 359.500, -999.9, -999.9 /)
d589 3
@


2.6
log
@Version 1.4 commit
@
text
@d1 1
a1 1
! Copyright (c) 2003, California Institute of Technology.  ALL RIGHTS RESERVED.
d16 1
a16 1
       "$Id: L0_sci_tbls.f90,v 2.5 2003/09/15 17:15:53 perun Exp $"
a274 9
!! Attenuation setting read back structure:

  TYPE Atten_T
     INTEGER :: RIU
     INTEGER :: Addr
     INTEGER :: Mask
     INTEGER :: Value
  END TYPE Atten_T

d298 1
d353 10
d365 33
a397 35
  TYPE (Atten_T), PARAMETER :: BandAtten(NumBands) = (/ &
       Atten_T ( 91, 49168, 255, 0), & ! 5B, C010, FF, 0   Band  1
       Atten_T ( 95, 49170, 255, 0), & ! 5F, C012, FF, 0   Band  2
       Atten_T ( 95, 49171, 255, 0), & ! 5F, C013, FF, 0   Band  3
       Atten_T ( 95, 49172, 255, 0), & ! 5F, C014, FF, 0   Band  4
       Atten_T ( 95, 49173, 255, 0), & ! 5F, C015, FF, 0   Band  5
       Atten_T ( 95, 49174, 255, 0), & ! 5F, C016, FF, 0   Band  6
       Atten_T ( 96, 49169, 255, 0), & ! 60, C011, FF, 0   Band  7
       Atten_T ( 96, 49170, 255, 0), & ! 60, C012, FF, 0   Band  8
       Atten_T ( 96, 49171, 255, 0), & ! 60, C013, FF, 0   Band  9
       Atten_T (110, 49170, 255, 0), & ! 6E, C012, FF, 0   Band 10
       Atten_T (110, 49171, 255, 0), & ! 6E, C013, FF, 0   Band 11
       Atten_T (110, 49172, 255, 0), & ! 6E, C014, FF, 0   Band 12
       Atten_T (110, 49173, 255, 0), & ! 6E, C015, FF, 0   Band 13
       Atten_T (110, 49174, 255, 0), & ! 6E, C016, FF, 0   Band 14
       Atten_T ( 84, 49170, 255, 0), & ! 54, C012, FF, 0   Band 15
       Atten_T ( 84, 49169, 255, 0), & ! 54, C011, FF, 0   Band 16
       Atten_T ( 84, 49168, 255, 0), & ! 54, C010, FF, 0   Band 17
       Atten_T ( 84, 49173, 255, 0), & ! 54, C015, FF, 0   Band 18
       Atten_T ( 84, 49172, 255, 0), & ! 54, C014, FF, 0   Band 19
       Atten_T ( 84, 49171, 255, 0), & ! 54, C013, FF, 0   Band 20
       Atten_T ( 92, 49168, 255, 0), & ! 5C, C010, FF, 0   Band 21
       Atten_T (111, 49168, 255, 0), & ! 6F, C010, FF, 0   Band 22 ------|
       Atten_T ( 97, 49168, 255, 0), & ! 61, C010, FF, 0   Band 23       |
       Atten_T (111, 49169, 255, 0), & ! 6F, C011, FF, 0   Band 24  DACS |
       Atten_T ( 97, 49169, 255, 0), & ! 61, C011, FF, 0   Band 25       |
       Atten_T ( 97, 49169, 255, 0), & ! 61, C011, FF, 0   Band 26 ------|
       Atten_T ( 95, 49174, 255, 0), & ! 5F, C016, FF, 0   Band 27 - B 6
       Atten_T (110, 49171, 255, 0), & ! 6E, C013, FF, 0   Band 28 - B 11
       Atten_T (110, 49170, 255, 0), & ! 6E, C012, FF, 0   Band 29 - B 10
       Atten_T (110, 49175, 255, 0), & ! 6E, C017, FF, 0   Band 30 - MB 4
       Atten_T (110, 49175, 255, 0), & ! 6E, C017, FF, 0   Band 31 - MB 5
       Atten_T ( 91, 49169, 255, 0), & ! 5B, C011, FF, 0   Band 32 - R1A - WF 1
       Atten_T ( 96, 49172, 255, 0), & ! 60, C014, FF, 0   Band 33 - R3  - WF 2
       Atten_T ( 92, 49169, 255, 0)  & ! 5C, C011, FF, 0   Band 34 - R1B - WF 3
d576 3
@


2.5
log
@Version 1.3 commit
@
text
@d9 1
a9 1
       DACSnum, DACSchans, MaxMIFs, THzChans, THzNum
d16 1
a16 1
       "$Id: L0_sci_tbls.f90,v 2.4 2003/08/15 14:25:04 perun Exp $"
d48 1
a48 1
!! Using format of 03/10/01
d108 3
a110 2
     CHARACTER (LEN=9) :: eng_data
     CHARACTER (LEN=1) :: spare2(23)
d170 3
a172 3
     CHARACTER (LEN=1) :: spare2
     CHARACTER (LEN=9) :: eng_data
     CHARACTER (LEN=1) :: spare3(7)
d190 1
a190 1
       & 320A1,A24,A80,2A1,2A24,A1,A9,A1,A2)"
d200 1
a200 1
       & 261A1,A24,A80,2A1,2A24,A1,A9,A1,A2)"
d241 1
d275 9
d306 2
d327 2
d361 39
d512 1
d524 1
d528 1
a528 1
    !!  Science packet #2
d576 3
@


2.4
log
@Version 1.2 commit
@
text
@d16 1
a16 1
       "$Id: L0_sci_tbls.f90,v 2.3 2003/01/31 18:13:34 perun Exp $"
d284 1
a284 1
     REAL :: APE_pos(2), ASE_pos(2), GME_pos(2), TSE_pos(2)
d289 3
a291 1
     CHARACTER(len=80) :: LLO_DN       ! Laser LO data
d314 1
a314 1
     REAL :: TSE_pos(2)
d520 3
@


2.3
log
@Version 1.1 commit
@
text
@d1 1
a1 1
! Copyright (c) 2002, California Institute of Technology.  ALL RIGHTS RESERVED.
d16 1
a16 1
       "$Id: L0_sci_tbls.f90,v 2.2 2002/03/29 20:18:34 perun Exp $"
d285 2
d313 1
d344 46
d518 3
@


2.2
log
@Version 1.0 commit
@
text
@d9 1
a9 1
       DACSnum, DACSchans, MaxMIFs
d16 1
a16 1
       "$Id: L0_sci_tbls.f90,v 2.1 2001/02/23 20:47:49 perun Exp $"
d104 1
a104 1
     CHARACTER (LEN=1) :: laser_lo(80)
d165 1
a165 1
     CHARACTER (LEN=1) :: laser_lo(80)
d189 1
a189 1
       & 320A1,A24,80A1,2A1,2A24,A1,A9,A1,A2)"
d199 1
a199 1
       & 261A1,A24,80A1,2A1,2A24,A1,A9,A1,A2)"
d238 1
a238 1
     TYPE (C1PTR)  :: LLO_data       ! Laser LO data pointers
d284 4
a287 6
     REAL :: GHz_sw_angle(2)
     REAL :: THz_sw_angle(2)
     REAL :: scan_angle(2)
     CHARACTER(len=2) :: GHz_sw_pos
     CHARACTER(len=2) :: THz_sw_pos
     CHARACTER(len=1) :: LLO_data(80)  ! Laser LO data
d302 39
d406 1
a406 1
    sci_cptr(1)%LLO_data%ptr => sci2_T1%laser_lo
d462 1
a462 1
    sci_cptr(2)%LLO_data%ptr => sci2_T2%laser_lo
d469 3
@


2.1
log
@Version 0.5 commit
@
text
@d1 1
a1 1
! Copyright (c) 2001, California Institute of Technology.  ALL RIGHTS RESERVED.
d8 2
a9 2
  USE MLSCommon
  USE MLSL1Common
d16 2
a17 2
       "$Id$"
  CHARACTER(LEN=*), PARAMETER :: ModuleName="$RCSfile: $"
d48 1
a48 1
!! Using format of 01/07/00
d50 1
a50 1
  TYPE Sci1_uc_T     ! science packet 1 with uncompressed filter bank data
d53 1
a53 1
     CHARACTER (LEN=1) :: type
d57 1
a57 2
     CHARACTER (LEN=1) :: comp
     CHARACTER (LEN=2) :: mifs_per_maf
d60 2
a61 1
!!  FB12, FB01, FB04, FB02, FB03, FB07, FB05, FB13,  FB06, MB01, FB08, FB09
d63 42
a104 2
     CHARACTER (LEN=2) :: FB_dat(9*25+11+2*25)  ! filter and mid-band data
     CHARACTER (LEN=7) :: eng_dat
d106 20
a125 1
     CHARACTER (LEN=1) :: GM15_stat(2)
d128 11
a138 8
     CHARACTER (LEN=1) :: GM07_stat
     CHARACTER (LEN=1) :: GM08_stat
     CHARACTER (LEN=1) :: GM10_stat(2)
     CHARACTER (LEN=1) :: GM11_stat(2)
     CHARACTER (LEN=1) :: GM14_stat(6)
     CHARACTER (LEN=1) :: GM12_stat(5)
     CHARACTER (LEN=1) :: GM13_stat(3)
     CHARACTER (LEN=3) :: DACS(DACchans)
d144 1
d146 1
a146 1
  END TYPE Sci1_uc_T
d148 1
a148 1
  TYPE Sci2_uc_T     ! science packet 2 with uncompressed filter bank data
d151 1
a151 1
     CHARACTER (LEN=1) :: type
d155 1
a155 1
     CHARACTER (LEN=3) :: tot_mifs
d158 2
a159 1
!!  FB11, MB03, FB14, FB15, MB04, MB05, FB16, FB17, FB18, FB19, FB10
d161 11
a171 13
     CHARACTER (LEN=2) :: FB_dat(25+11+2*25+2*11+5*25+11)  ! filter and
                                                           ! mid-band data
     CHARACTER (LEN=3) :: DACS(DACchans)
     CHARACTER (LEN=1) :: spare1
     CHARACTER (LEN=80) :: laser_lo
     CHARACTER (LEN=2) :: spare2
     CHARACTER (LEN=9) :: ghz_ant_scan
     CHARACTER (LEN=9) :: thz_switch
     CHARACTER (LEN=9) :: ghz_switch
     CHARACTER (LEN=1) :: sw_decom_fmt
     CHARACTER (LEN=1) :: eng_decom_fmt
     CHARACTER (LEN=10) :: eng_data
     CHARACTER (LEN=1) :: sw_data
d173 9
a181 1
  END TYPE Sci2_uc_T
d183 3
a185 2
  TYPE (Sci1_uc_T), TARGET :: sci1_uc
  TYPE (Sci2_uc_T), TARGET :: sci2_uc
d187 3
a189 1
!! Formats to convert uncompressed raw Science packets internally:
d191 1
a191 3
  CHARACTER (LEN=*), PARAMETER :: Sci1_uc_fmt = &
       "(3A2,3A1,A4,A2,2A1,2A2,A1,A2,9(25A2),11A2,2(25A2),A7,2(2A1),4A1,&
       & 2(2A1),6A1,5A1,3A1,129A3,2A1,A2,2A1,A2)"
d193 7
a199 3
  CHARACTER (LEN=*), PARAMETER :: Sci2_uc_fmt = &
       "(3A2,3A1,A4,A2,2A1,2A2,A3,25A2,11A2,2(25A2),2(11A2),5(25A2),11A2,&
       & 129A3,A1,A80,A2,3A9,2A1,A10,A1,A2)"
d221 4
d229 11
a239 10
     TYPE (CS2PTR) :: MAF(2)        ! MAF pointers
     TYPE (CS1PTR) :: MIF(2)        ! MIF pointers
     TYPE (CS2PTR) :: orbit(2)      ! orbit pointers

     TYPE (C2PTR) :: FB(FBnum)   ! Filter bank pointers
     TYPE (C2PTR) :: MB(MBnum)   ! Mid-Band pointers

     CHARACTER (LEN=9), POINTER :: GHz_ant_scan
     CHARACTER (LEN=9), POINTER :: GHz_sw
     CHARACTER (LEN=9), POINTER :: THz_sw
d243 1
a243 1
  TYPE (Sci_cptr_T) :: Sci_cptr
d245 1
a245 1
!! Uncompressed science data pointers:
d247 2
a248 1
!! MAF, MIF, orbit:
d250 1
a250 3
  TYPE (CS2PTR) :: MAF_uc_cptr(2)        ! MAF pointers
  TYPE (CS1PTR) :: MIF_uc_cptr(2)        ! MIF pointers
  TYPE (CS2PTR) :: orbit_uc_cptr(2)      ! orbit pointers
d252 2
a253 1
!! GHz & Thz switching data:
d255 1
a255 3
  CHARACTER (LEN=9), POINTER :: GHz_ant_scan_uc_cptr
  CHARACTER (LEN=9), POINTER :: GHz_sw_uc_cptr
  CHARACTER (LEN=9), POINTER :: THz_sw_uc_cptr
d257 1
a257 2
!! Filter Bank offsets and pointers within data field in uncompressed
!!  science packets:
d259 1
a259 2
  INTEGER, PARAMETER :: FB_uc_offset(FBnum) = (/ 26, 76, 101, 51, 151, 201, &
       & 126, 237, 262, 209, 1, 1, 176, 37, 62, 109, 134, 159, 184 /)
d261 1
a261 1
  TYPE (C2PTR) :: FB_uc_cptr(FBnum)
d263 1
a263 2
!! Mid-band offsets and pointers within data field in uncompressed
!!  science packets:
d265 2
a266 1
  INTEGER, PARAMETER :: MB_uc_offset(MBnum) = (/ 226, 234, 26, 87, 98 /)
d268 1
a268 1
  TYPE (C2PTR) :: MB_uc_cptr(MBnum)
d270 2
a271 4
!! Filter bank numbers within the science packets

  INTEGER, PARAMETER :: Pkt1_FB(11) = (/ 1, 2, 3, 4, 5, 6, 7, 8, 9, 12, 13 /)
  INTEGER, PARAMETER :: Pkt2_FB(8) = (/ 10, 11, 14, 15, 16, 17, 18, 19 /)
d283 1
d289 4
d308 1
a308 1
    INTEGER :: i
d315 1
a315 1
    !! Initialize pointers for uncompressed science packets:
d319 6
a324 6
    MAF_uc_cptr(1)%ptr => sci1_uc%MAF
    MAF_uc_cptr(2)%ptr => sci2_uc%MAF
    MIF_uc_cptr(1)%ptr => sci1_uc%MIF
    MIF_uc_cptr(2)%ptr => sci2_uc%MIF
    orbit_uc_cptr(1)%ptr => sci1_uc%orbit
    orbit_uc_cptr(2)%ptr => sci2_uc%orbit
d330 12
a341 1
    DO i = 1, SIZE (Pkt1_FB)
d343 1
a343 2
       FB_uc_cptr(Pkt1_FB(i))%ptr => sci1_uc%FB_dat(FB_uc_offset(Pkt1_FB(i)): &
            & FB_uc_offset(Pkt1_FB(i))+24)
d345 4
d351 33
d386 4
a389 1
    DO i = 1, SIZE (Pkt2_FB)
d391 1
a391 2
       FB_uc_cptr(Pkt2_FB(i))%ptr => sci2_uc%FB_dat(FB_uc_offset(Pkt2_FB(i)): &
            & FB_uc_offset(Pkt2_FB(i))+24)
d393 4
d401 4
a404 3
    MB_uc_cptr(1)%ptr => sci1_uc%FB_dat(MB_uc_offset(1):MB_uc_offset(1)+10)
    DO i = 2, 5
       MB_uc_cptr(i)%ptr => sci2_uc%FB_dat(MB_uc_offset(i):MB_uc_offset(i)+10)
d407 19
a425 3
    GHz_ant_scan_uc_cptr => sci2_uc%ghz_ant_scan   ! GHz antenna/scan data
    GHz_sw_uc_cptr => sci2_uc%ghz_switch   ! GHz switching data
    THz_sw_uc_cptr => sci2_uc%thz_switch   ! THz switching data
d431 4
a434 1
! $Log: $
@

