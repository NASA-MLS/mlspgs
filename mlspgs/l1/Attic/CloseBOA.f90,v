head	2.6;
access;
symbols
	V1-51:2.4
	V1-50:2.4
	V1-45:2.4
	V1-44:2.4
	V1-43:2.4
	V1-42:2.2
	V1-41:2.2
	V1-32:2.1
	V1-40:2.2
	V1-31:2.1;
locks; strict;
comment	@# @;


2.6
date	2005.08.25.19.23.59;	author pwagner;	state dead;
branches;
next	2.5;

2.5
date	2005.06.23.18.41.35;	author pwagner;	state Exp;
branches;
next	2.4;

2.4
date	2004.05.14.15.59.11;	author perun;	state Exp;
branches;
next	2.3;

2.3
date	2004.05.06.21.59.23;	author pwagner;	state Exp;
branches;
next	2.2;

2.2
date	2004.01.09.20.02.57;	author perun;	state Exp;
branches;
next	2.1;

2.1
date	2003.10.24.19.38.36;	author perun;	state Exp;
branches;
next	;


desc
@@


2.6
log
@No longer needed--MLSL1BOA will never be built again
@
text
@! Copyright 2005, by the California Institute of Technology. ALL
! RIGHTS RESERVED. United States Government Sponsorship acknowledged. Any
! commercial use must be negotiated with the Office of Technology Transfer
! at the California Institute of Technology.

! This software may be subject to U.S. export control laws. By accepting this
! software, the user agrees to comply with all applicable U.S. export laws and
! regulations. User has the responsibility to obtain export licenses, or other
! export authority as may be required before exporting such information to
! foreign countries or providing access to foreign persons.

!=============================================================================
MODULE CloseBOA ! Close the BOA file
!=============================================================================

  USE MLSL1Common, ONLY: L1BFileInfo, HDFversion
  USE MLSMessageModule, ONLY: MLSMessage, MLSMSG_Error, MLSMSG_Info

  IMPLICIT NONE

  PRIVATE

  PUBLIC :: CloseBOAfile

!---------------------------- RCS Module Info ------------------------------
  character (len=*), private, parameter :: ModuleName= &
       "$RCSfile: CloseBOA.f90,v $"
  private :: not_used_here 
!---------------------------------------------------------------------------

CONTAINS

!=============================================================================
  SUBROUTINE CloseBOAfile   ! Close BOA file
!=============================================================================

    USE MLSL1Config, ONLY: L1Config
    USE MLSFiles, ONLY: MLS_closeFile
    USE L1BOAutils, ONLY: WriteHdrAnnots
    USE Orbit, ONLY: OrbitNumber, OrbPeriod
    USE HDF5, ONLY: H5gClose_f, H5gOpen_f
    USE MLSHDF5, ONLY: MakeHDF5Attribute, MLS_h5close

    INTEGER :: returnStatus, error, grp_id

! Close HDF file

    ! Write Hdr Annotations and Close L1BOA file

    CALL H5gOpen_f (L1BFileInfo%OAid, '/', grp_id, returnStatus)
    CALL MakeHDF5Attribute (grp_id, 'OrbitNumber', OrbitNumber, .true.)
    CALL MakeHDF5Attribute (grp_id, 'OrbitPeriod', OrbPeriod, .true.)
    CALL H5gClose_f (grp_id, returnStatus)

    CALL WriteHdrAnnots (L1BFileInfo%OAFileName, HDFversion)
    CALL MLS_closeFile (L1BFileInfo%OAid, HDFversion=HDFversion)
    CALL MLSMessage (MLSMSG_Info, ModuleName, &
         & 'Closed L1BOA file: '//L1BFileInfo%OAFileName)

!! Close the HDF 5 Fortran Interface

    CALL MLS_h5close (error)
    IF (error /= 0) CALL MLSMessage (MLSMSG_Error, ModuleName, &
         "Fortran HDF 5 API error on closing.")
    
  END SUBROUTINE CloseBOAfile

!=============================================================================
  logical function not_used_here()
!---------------------------- RCS Ident Info -------------------------------
  character (len=*), parameter :: IdParm = &
       "$Id: CloseBOA.f90,v 2.5 2005/06/23 18:41:35 pwagner Exp $"
  character (len=len(idParm)), save :: Id = idParm
!---------------------------------------------------------------------------
    not_used_here = (id(1:1) == ModuleName(1:1))
  end function not_used_here
END MODULE CloseBOA
!=============================================================================
! $Log: CloseBOA.f90,v $
! Revision 2.5  2005/06/23 18:41:35  pwagner
! Reworded Copyright statement, moved rcs id
!
! Revision 2.4  2004/05/14 15:59:11  perun
! Version 1.43 commit
!
! Revision 2.3  2004/05/06 21:59:23  pwagner
! Uses mls_h5open/close
!
! Revision 2.2  2004/01/09 20:02:57  perun
! Update BOA to HDF 5
!
! Revision 2.1  2003/10/24 19:38:36  perun
! Version 1.3 commit
!
!
@


2.5
log
@Reworded Copyright statement, moved rcs id
@
text
@d27 1
a27 1
       "$RCSfile: $"
d72 1
a72 1
       "$Id: $"
d80 3
@


2.4
log
@Version 1.43 commit
@
text
@d1 10
a10 2
! Copyright (c) 2004, California Institute of Technology.  ALL RIGHTS RESERVED.
! U.S. Government Sponsorship under NASA Contract NAS7-1407 is acknowledged.
d25 5
a29 5
  !------------------------------- RCS Ident Info ------------------------------
  CHARACTER(LEN=130) :: id = &
       "$Id: CloseBOA.f90,v 2.3 2004/05/06 21:59:23 pwagner Exp $"
  CHARACTER(LEN=*), PARAMETER :: ModuleName="$RCSfile: CloseBOA.f90,v $"
  !-----------------------------------------------------------------------------
d69 8
d80 3
@


2.3
log
@Uses mls_h5open/close
@
text
@d19 1
a19 1
       "$Id: CloseBOA.f90,v 2.2 2004/01/09 20:02:57 perun Exp $"
d34 1
a34 1
    USE MLSHDF5, ONLY: MakeHDF5Attribute, mls_h5close
d54 1
a54 1
    CALL mls_h5close (error)
d64 3
@


2.2
log
@Update BOA to HDF 5
@
text
@d1 1
a1 1
! Copyright (c) 2003, California Institute of Technology.  ALL RIGHTS RESERVED.
d19 1
a19 1
       "$Id: CloseBOA.f90,v 2.1 2003/10/24 19:38:36 perun Exp $"
d34 1
a34 1
    USE MLSHDF5, ONLY: MakeHDF5Attribute
d54 1
a54 1
    CALL h5close_f (error)
d64 3
@


2.1
log
@Version 1.3 commit
@
text
@d8 1
a8 1
  USE MLSL1Common, ONLY: L1BFileInfo
d19 2
a20 2
       "$Id: $"
  CHARACTER(LEN=*), PARAMETER :: ModuleName="$RCSfile: $"
d30 1
a30 1
    USE MLSFiles, ONLY: MLS_closeFile, HDFVERSION_5
d36 1
a36 1
    INTEGER :: returnStatus, error, grp_id, HDFversion
a39 2
    HDFversion = L1Config%Output%HDFversion

d42 4
a45 6
    IF (HDFversion == HDFVERSION_5) THEN
       CALL H5gOpen_f (L1BFileInfo%OAid, '/', grp_id, returnStatus)
       CALL MakeHDF5Attribute (grp_id, 'OrbitNumber', OrbitNumber, .true.)
       CALL MakeHDF5Attribute (grp_id, 'OrbitPeriod', OrbPeriod, .true.)
       CALL H5gClose_f (grp_id, returnStatus)
    ENDIF
d47 1
a47 1
    CALL WriteHdrAnnots (L1BFileInfo%OAFileName, L1BFileInfo%OAid, HDFversion)
d54 3
a56 5
    IF (HDFversion == HDFVERSION_5) THEN
       CALL h5close_f (error)
       IF (error /= 0) CALL MLSMessage (MLSMSG_Error, ModuleName, &
            "Fortran HDF 5 API error on closing.")
    ENDIF
d63 4
a66 1
! $Log: $
@

