head	1.6;
access;
symbols
	v5-02-NRT-19:1.6
	v6-00:1.6
	v5-02-NRT-18:1.6
	v5-02:1.6
	v5-01-NRT-17:1.6
	v5-01-NRT-16:1.6
	v5-01-NRT-15:1.6
	v5-01-NRT-14:1.6
	neuralnetworks-1-0:1.6.0.14
	cfm-single-freq-0-1:1.6.0.12
	v5-01:1.6
	v5-00:1.6
	v4-23-TA133:1.6.0.10
	mus-emls-1-70:1.6.0.8
	rel-1-0-englocks-work:1.6.0.6
	VUMLS1-00:1.6
	VPL1-00:1.6
	V4-22-NRT-08:1.6
	VAM1-00:1.6
	V4-21:1.6.0.4
	V4-13:1.6
	V4-12:1.6
	V4-11:1.6
	V4-10:1.6
	V3-43:1.6
	M4-00:1.6
	V3-41:1.6
	V3-40-PlusGM57:1.6.0.2
	V2-24-NRT-04:1.6
	V3-33:1.6
	V2-24:1.6
	V3-31:1.6
	V3-30-NRT-05:1.6
	cfm-01-00:1.6
	V3-30:1.6
	V3-20:1.6
	V3-10:1.6
	V2-23-NRT-02:1.6
	V2-23:1.6
	V2-22-NRT-01:1.6
	V2-22:1.6
	V2-21:1.6
	V2-20:1.6
	V2-11:1.6
	V2-10:1.6
	V2-00:1.6
	V1-51:1.5
	V1-50:1.5
	V1-45:1.5
	V1-44:1.5
	V1-43:1.5
	V1-42:1.5
	V1-41:1.5
	V1-32:1.5
	V1-40:1.5
	V1-31:1.5
	V1-30:1.5
	V1-13:1.5
	V1-12:1.5
	V1-11:1.5
	V1-10:1.5
	newfwm-feb03:1.5.0.4
	V1-04:1.5
	V1-03:1.5
	V1-02:1.5
	V1-00:1.5
	newfwm-sep01:1.5.0.2
	V0-7:1.5
	V0-5-Level2:1.3
	V0-5-SIPS:1.3;
locks; strict;
comment	@# @;


1.6
date	2005.06.22.19.27.32;	author pwagner;	state Exp;
branches;
next	1.5;

1.5
date	2001.05.24.22.59.02;	author vsnyder;	state Exp;
branches;
next	1.4;

1.4
date	2001.05.21.23.35.07;	author livesey;	state Exp;
branches;
next	1.3;

1.3
date	2001.04.06.20.38.24;	author vsnyder;	state Exp;
branches;
next	1.2;

1.2
date	2001.04.04.02.06.15;	author vsnyder;	state Exp;
branches;
next	1.1;

1.1
date	2001.04.04.02.05.10;	author vsnyder;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Reworded Copyright statement, moved rcs id
@
text
@! Copyright 2005, by the California Institute of Technology. ALL
! RIGHTS RESERVED. United States Government Sponsorship acknowledged. Any
! commercial use must be negotiated with the Office of Technology Transfer
! at the California Institute of Technology.

! This software may be subject to U.S. export control laws. By accepting this
! software, the user agrees to comply with all applicable U.S. export laws and
! regulations. User has the responsibility to obtain export licenses, or other
! export authority as may be required before exporting such information to
! foreign countries or providing access to foreign persons.

program Convert_Spectroscopy

! Convert the spectroscopy database from the "old" format to a format
! suitable for inclusion in the L2CF.

  use Output_M, only: Blanks, Output, PrUnit

  integer, parameter :: R4 = kind(0.0e0)
  integer, parameter :: R8 = kind(0.0d0)

  character(len=127) :: File       ! File names (from stdin)
  integer :: HowMuch               ! Current line width
  integer :: I                     ! Loop inductor, subscript
  character(len=80) :: Line        ! of input
  integer, parameter :: Lun = 51   ! To read the "old" format database
  character(len=13) :: Name        ! Of a catalog item
  integer :: NL                    ! Number of lines
  real(r8) :: Qlog(3)
  integer :: Spectag

  ! Line parameters:
  Real(r4) :: DELTA
  Real(r4) :: EL
  Real(r4) :: GAMMA
  Real(r4) :: N
  Real(r4) :: N1
  Real(r4) :: N2
  Real(r4) :: PS
  Real(r4) :: STR
  Real(r8) :: V0
  Real(r4) :: W

!---------------------------- RCS Ident Info ------------------------------
  character (len=*), parameter :: ModuleName= &
       "$RCSfile: MLSL2.f90,v $"
  character (len=*), parameter :: IdParm = &
       "$Id: MLSL2.f90,v 2.138 2005/06/22 18:57:02 pwagner Exp $"
  character (len=len(idParm)) :: Id = idParm
!---------------------------------------------------------------------------

  print *, 'Enter "old" format database filename: '
  read ( *, '(a)', end=99 ) File

  open ( lun, file=File, status='old', action='read' )

  print *, 'Enter "new" format database filename: '
  read ( *, '(a)', end=99 ) File
  prunit = lun+1
  open ( prunit, file=File, action='write' )

  call output ( &
    & '; This file was automatically produced from the JPL catalogue;',&
    & advance='yes' )
  call output ( &
    & '; therefore it is not really appropriate to edit it by hand.',&
    & advance='yes' )
  call output ('BEGIN Spectroscopy')

  do i = 1, 4 
    read ( lun, '(a)' ) line              ! Header lines
  end do

  do
    read ( lun, '(a)' ) line
    print*,'Got: ',trim(line)
    line = adjustl(line)
    if ( line(:7) == 'END_CAT' ) exit
    if ( line(1:1) == '#' ) cycle
    read ( line, * ) name, spectag, nl, qlog
    do i = 1, len(name)
      if ( name(i:i) == '-' ) name(i:i) = '_'
      if ( name(i:i) >= 'A' .and. name(i:i) <= 'Z' ) &
        & name(i:i) = achar(iachar(name(i:i)) + iachar('a') - iachar('A'))
    end do
    call output ( '', advance='yes')
    call output ('; ------------------------------------------ ' // &
      & trim(name), advance='yes' )
    call output ( '', advance='yes')
    do i = 1, nl
      read ( lun, * ) v0, el, str, w, ps, n, delta, n1, gamma, n2
      call blanks ( 2 )
      call output ( trim(name) )
      call output ( '_' )
      call output ( i )
      call output ( ': line, v0= ' )
      call output ( v0 )
      call output ( ' MHz, el= ' )
      call output ( el )
      call output ( ', str= ' )
      call output ( str )
      call output ( ', w= ' )
      call output ( w )
      call output ( ', $', advance='yes' )
      call blanks ( len_trim(name) + 8 )
      call output ( 'ps= ' )
      call output ( ps )
      call output ( ', n= ' )
      call output ( n )
      call output ( ', delta= ' )
      call output ( delta )
      call output ( ', n1= ' )
      call output ( n1 )
      call output ( ', gamma= ' )
      call output ( gamma )
      call output ( ', n2= ')
      call output ( n2, advance='yes' )
    end do
    call output ( '', advance='yes')
    call output ( 'spectra, molecule=' )
    call output ( trim(name) )
    call output ( ', Qlog=[' )
    do i = 1, 3
      call output ( qlog(i) )
      if ( i < 3 ) call output ( ', ' )
    end do
    if ( nl <= 1 ) then
      call output ( '], lines=' )
    else
      call output ( '], $', advance='yes' )
      call blanks ( len('spectra, ') )
      call output ( 'lines=' )
    end if
    if ( nl > 1 ) call output ( '[' )
    howMuch = len('spectra, lines=[')
    do i = 1, nl
      howMuch = howMuch + len_trim(name) + 5
      if ( howMuch > 80 ) then
        call output ( '$', advance='yes' )
        howMuch = len('spectra, lines=[')
        call blanks ( howMuch )
        howMuch = howMuch + len_trim(name) + 5
      end if
      call output ( trim(name) )
      call output ( '_' )
      call output ( i )
      if ( i < nl ) call output ( ', ' )
    end do
    if ( nl > 1 ) call output ( ']' )
    call output ( '', advance='yes' )
  end do
  call output ( 'END Spectroscopy', advance='yes' )
99 close ( lun )
end program Convert_Spectroscopy

! $Log: convert_spectroscopy.f90,v $
! Revision 1.5  2001/05/24 22:59:02  vsnyder
! Change several variables to single precision; insert copyright notice
!
! Revision 1.4  2001/05/21 23:35:07  livesey
! Interim version.
!
! Revision 1.3  2001/04/06 20:38:24  vsnyder
! Fold lines earlier
!
! Revision 1.2  2001/04/04 02:06:15  vsnyder
! Repair CVS variables
!
! Revision 1.1  2001/04/04 02:05:10  vsnyder
! Initial commit
!
@


1.5
log
@Change several variables to single precision; insert copyright notice
@
text
@d1 10
a10 2
! Copyright (c) 1999, California Institute of Technology.  ALL RIGHTS RESERVED.
! U.S. Government Sponsorship under NASA Contract NAS7-1407 is acknowledged.
d44 3
a46 1
!---------------------------- RCS Ident Info -------------------------------
d48 1
a48 1
       "$Id: $"
a49 2
  character (len=*), parameter :: ModuleName= &
       "$RCSfile: $"
d157 3
@


1.4
log
@Interim version.
@
text
@d1 3
d11 1
d25 8
a32 8
  Real(r8) :: DELTA
  Real(r8) :: EL
  Real(r8) :: GAMMA
  Real(r8) :: N
  Real(r8) :: N1
  Real(r8) :: N2
  Real(r8) :: PS
  Real(r8) :: STR
d34 1
a34 1
  Real(r8) :: W
d38 4
a41 3
    "$Id: convert_spectroscopy.f90,v 1.3 2001/04/06 20:38:24 vsnyder Exp $"
  character(len=len(idparm)) :: Id = idParm
  character (len=*), parameter :: ModuleName= "$RCSfile: convert_spectroscopy.f90,v $"
d55 1
a55 1
    & '; This file was automatically produced from the JPL catalogue',&
d58 1
a58 1
    & '; therefore, it is not really appropriate to edit it by hand.',&
d63 1
a63 1
    read ( lun, '(a)' ) line              ! Header line
d68 1
a68 1
    print*,'Got: ',line
d149 3
@


1.3
log
@Fold lines earlier
@
text
@d34 1
a34 1
    "$Id: convert_spectroscopy.f90,v 1.2 2001/04/04 02:06:15 vsnyder Exp $"
d49 12
d63 1
d73 4
d106 1
d139 1
d144 3
@


1.2
log
@Repair CVS variables
@
text
@d11 2
a12 1
  integer :: I, J                  ! Loop inductors, subscripts
d15 1
a15 1
  character(len=8) :: Name         ! Of a catalog item
d34 1
a34 1
    "$Id: convert_spectroscopy.f90,v 1.19 2001/04/03 07:32:45 zvi Exp $"
d53 1
d96 9
a104 1
    call output ( '], lines=[' )
d106 7
d118 2
a119 1
    call output ( ']', advance='yes' )
d125 3
@


1.1
log
@Initial commit
@
text
@d33 1
a33 1
    "$id: l2_load_m.f90,v 1.19 2001/04/03 07:32:45 zvi Exp $"
d35 1
a35 1
  character (len=*), parameter :: ModuleName= "$RCSfile: l2_load_m.f90,v $"
d106 4
a109 1
! $Log: $
@

