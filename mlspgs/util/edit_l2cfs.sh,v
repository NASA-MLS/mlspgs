head	1.2;
access;
symbols
	v5-02-NRT-19:1.2
	v6-00:1.2
	v5-02-NRT-18:1.2
	v5-02:1.2
	v5-01-NRT-17:1.2
	v5-01-NRT-16:1.2
	v5-01-NRT-15:1.2
	v5-01-NRT-14:1.2
	neuralnetworks-1-0:1.2.0.14
	cfm-single-freq-0-1:1.2.0.12
	v5-01:1.2
	v5-00:1.2
	v4-23-TA133:1.2.0.10
	mus-emls-1-70:1.2.0.8
	rel-1-0-englocks-work:1.2.0.6
	VUMLS1-00:1.2
	VPL1-00:1.2
	V4-22-NRT-08:1.2
	VAM1-00:1.2
	V4-21:1.2.0.4
	V4-13:1.2
	V4-12:1.2
	V4-11:1.2
	V4-10:1.2
	V3-43:1.2
	M4-00:1.2
	V3-41:1.2
	V3-40-PlusGM57:1.2.0.2
	V2-24-NRT-04:1.2
	V3-33:1.2
	V2-24:1.2
	V3-31:1.2
	V3-30-NRT-05:1.2
	cfm-01-00:1.2
	V3-30:1.2
	V3-20:1.2
	V3-10:1.2
	V2-23-NRT-02:1.2
	V2-23:1.2
	V2-22-NRT-01:1.2
	V2-22:1.2
	V2-21:1.2
	V2-20:1.2
	V2-11:1.2
	V2-10:1.2
	V2-00:1.2
	V1-51:1.1
	V1-50:1.1
	V1-45:1.1
	V1-44:1.1
	V1-43:1.1
	V1-42:1.1
	V1-41:1.1
	V1-32:1.1
	V1-40:1.1
	V1-31:1.1
	V1-30:1.1;
locks; strict;
comment	@# @;


1.2
date	2005.06.23.22.20.45;	author pwagner;	state Exp;
branches;
next	1.1;

1.1
date	2003.08.13.20.35.48;	author pwagner;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Reworded Copyright statement
@
text
@#!/bin/sh
# edit_l2cfs.sh

# Copyright 2005, by the California Institute of Technology. ALL
# RIGHTS RESERVED. United States Government Sponsorship acknowledged. Any
# commercial use must be negotiated with the Office of Technology Transfer
# at the California Institute of Technology.

# This software may be subject to U.S. export control laws. By accepting this
# software, the user agrees to comply with all applicable U.S. export laws and
# regulations. User has the responsibility to obtain export licenses, or other
# export authority as may be required before exporting such information to
# foreign countries or providing access to foreign persons.

# "$Id: edit_l2cfs.sh,v 1.1 2003/08/13 20:35:48 pwagner Exp $"
# --------------- edit_l2cfs.sh help
#Use(1) (the default)
#edit l2cf files to comment-out any retrieve sections
# i.e., any sections bounded by
# begin Retrieve       ;;; begin Retrieve
#    .  .  .        => ;;;    .  .  .
# end Retrieve         ;;; end Retrieve
# 
#Use(2) (the reverse)
#uncomment any retrieve sections
#Usage:
#edit_l2cfs.sh [opt1 [arg1]] [opt2 [arg2]] .. [optm [argm]] [filelist]
#Result: each file replaced with its edited copy (unless -print option)
#
#    O p t i o n s
# -1            use(1)
# -2            use(2)
# -s mySection  instead of Retrieve, comment out section mySection
# -print        instead of replacing each file, print result to stdout
# -diff         instead of replacing each file, print diff between
#                  result and the original to stdout
# -h[elp]       print brief help message; exit
#Notes:
#(1)Options -1, -2
#(2)The default use is Use(1)
# --------------- End edit_l2cfs.sh help
#Another example of my regrettable tendency to bundle a number of
#different functionalities within a single multi-use file
#Isn't it cleaner to devote a single file to a single use?

#------------------------------- print_the_lines ------------
#
# Function to print the lines from a file bookended by 
# e.g. where object="INPUTPOINTER"
#'OBJECT     = INPUTPOINTER'
# . . .
#'END_OBJECT             = INPUTPOINTER'
#
# Optionally end each line (except the last) with a "\" 
# so it can serve as replacement text in a sed script
# usage: print_the_lines object file [opt]

print_the_lines()
{
object="$1"
file="$2"
if [ "$usage" = "1" ]
then
  sed '/begin *'$object'/,/end *'$object'/ s/^./;;; &/' $file
  #sed -n \
  #'/begin *'$object'/,/end *'$object'/ p' $file 
else
  sed '/;;; begin *'$object'/,/;;; end *'$object'/ s/^;;; //' $file
  #sed -n \
  #'/begin *'$object'/,/end *'$object'/ p' $file \
  #| sed 's/.*$/&\\/' | sed '$ s/\\$//'

fi
}

#------------------------------- Main Program ------------

#****************************************************************
#                                                               *
#                  * * * Main Program  * * *                    *
#                                                               *
#                                                               *
#	The entry point where control is given to the script         *
#****************************************************************
id_list=
RCS_list=
# echo "All the args: $@@"
suffixes=""
directories=""
me="$0"
my_name=edit_l2cfs.sh
I=edit_l2cfs
unique_name="`echo $0 | sed 's/'$I'/unique_name/'`"
the_splitter="`echo $0 | sed 's/'$I'/split_path/'`"
reecho="`echo $0 | sed 's/'$I'/reecho/'`"
resed="`echo $0 | sed 's/'$I'/resed/'`"

print_to_stdout="no"
more_opts="yes"
usage="1"
mySection="Retrieve"

#
# Get arguments from command line
#

while [ "$more_opts" = "yes" ] ; do

    case "$1" in

    -1 )
       usage="1"
       shift
       ;;
    -2 )
       usage="2"
       shift
       ;;
    -diff )
       print_to_stdout="diff"
       shift
       ;;
    -print )
       print_to_stdout="yes"
       shift
       ;;
    -s )
       mySection="$2"
       shift
       shift
       ;;
    -h | -help )
       sed -n '/'$my_name' help/,/End '$my_name' help/ p' $me \
           | sed -n 's/^.//p' | sed '1 d; $ d'
       exit
       ;;
    * )
       more_opts="no"
       ;;
    esac
done
diff_list=""
nodiff_list=""
rm -f temp1.sed
for the_file
do
  if [ "$print_to_stdout" = "yes" ]
  then
    print_the_lines "$mySection" "$the_file"
  elif [ "$print_to_stdout" = "diff" ]
  then
    print_the_lines "$mySection" "$the_file" > temp1.sed
    how_many=`diff "$the_file" temp1.sed | wc -l`
    if [ "$how_many" -gt 0 ]
    then
      diff_list="$diff_list $the_file"
    else
      nodiff_list="$nodiff_list $the_file"
    fi
    rm -f temp1.sed
  else
    print_the_lines "$mySection" "$the_file" > temp1.sed
    mv temp1.sed "$the_file"
  fi
done
if [ "$print_to_stdout" = "diff" ]
then
  if [ "$diff_list" = "" ]
  then
    echo "None of the files would be changed"
  elif [ "$nodiff_list" = "" ]
  then
    echo "All of the files pass would be changed"
  else
    echo "The following files would be changed"
    echo "$diff_list"
    echo "The following files would be left the same"
    echo "$nodiff_list"
  fi
fi
exit 0
# $Log: edit_l2cfs.sh,v $
# Revision 1.1  2003/08/13 20:35:48  pwagner
# First commit
#
@


1.1
log
@First commit
@
text
@d4 10
a13 2
# Copyright (c) 2003, California Institute of Technology.  ALL RIGHTS RESERVED.
# U.S. Government Sponsorship under NASA Contract NAS7-1407 is acknowledged.
d15 1
a15 1
# "$Id: edit_l2cfs.sh,v 1.4 2003/05/29 22:30:55 pwagner Exp $"
d183 3
@

