head	1.7;
access;
symbols
	V4-21:1.5.0.4
	V4-13:1.5
	V4-12:1.5
	V4-11:1.5
	V4-10:1.5
	V3-43:1.5
	M4-00:1.5
	V3-41:1.5
	V3-40-PlusGM57:1.5.0.2
	V2-24-NRT-04:1.5
	V3-33:1.5
	V2-24:1.5
	V3-31:1.5
	V3-30-NRT-05:1.5
	cfm-01-00:1.5
	V3-30:1.5
	V3-20:1.5
	V3-10:1.5
	V2-23-NRT-02:1.5
	V2-23:1.5
	V2-22-NRT-01:1.5
	V2-22:1.5
	V2-21:1.5
	V2-20:1.5
	V2-11:1.5
	V2-10:1.5
	V2-00:1.5
	V1-51:1.4
	V1-50:1.4
	V1-45:1.4
	V1-44:1.4
	V1-43:1.4
	V1-42:1.4
	V1-41:1.4
	V1-32:1.4
	V1-40:1.4
	V1-31:1.4
	V1-30:1.4
	V1-13:1.3
	V1-12:1.3
	V1-11:1.3
	V1-10:1.3
	newfwm-feb03:1.3.0.2
	V1-04:1.2
	V1-03:1.2
	V1-02:1.2
	V1-00:1.1
	newfwm-sep01:1.1.0.2
	V0-7:1.1;
locks; strict;
comment	@# @;


1.7
date	2015.08.11.16.36.23;	author pwagner;	state dead;
branches;
next	1.6;

1.6
date	2015.08.10.22.26.38;	author pwagner;	state Exp;
branches;
next	1.5;

1.5
date	2005.06.23.22.10.41;	author pwagner;	state Exp;
branches;
next	1.4;

1.4
date	2003.04.30.23.04.55;	author pwagner;	state Exp;
branches;
next	1.3;

1.3
date	2002.09.25.23.25.43;	author pwagner;	state Exp;
branches;
next	1.2;

1.2
date	2002.04.26.23.37.47;	author pwagner;	state Exp;
branches;
next	1.1;

1.1
date	2001.06.14.22.18.42;	author pwagner;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Replaced with Makefile
@
text
@#	Makefile
#
# Copyright 2005, by the California Institute of Technology. ALL
# RIGHTS RESERVED. United States Government Sponsorship acknowledged. Any
# commercial use must be negotiated with the Office of Technology Transfer
# at the California Institute of Technology.

# This software may be subject to U.S. export control laws. By accepting this
# software, the user agrees to comply with all applicable U.S. export laws and
# regulations. User has the responsibility to obtain export licenses, or other
# export authority as may be required before exporting such information to
# foreign countries or providing access to foreign persons.
#
# "$Id: MakeFC,v 1.6 2015/08/10 22:26:38 pwagner Exp $"

MakeFName = Makefile

# where to store .configure
CONFDIR=../..

# where configure and makemakedep.sh are stored
MLSBIN=../../util

# where the platforms directory is
PLATFORMS = .

# This is the default name of the configure file
# It may be overridden for multiple platforms, special options, etc.
ifdef HOSTMLSCFILE
   MLSCFILE=$(HOSTMLSCFILE)
else
   MLSCFILE=.configure
endif

# This will set our MLS platform, compiler. etc.
# w/o complaining if it does not exist yet
-include $(CONFDIR)/$(MLSCFILE)

# All the implicit pattern-matching involving suffixes
# will be done in the uniquely-named sub-directories, not here--so
.SUFFIXES:

# This will filter out globbed file expansions that fail
# e.g., '*.f90 *.f' -> '*.f90" if there aren't any .f files
REECHO=$(MLSBIN)/reecho.sh
UNIQUE_NAME=$(MLSBIN)/unique_name.sh

# This is in case tar doesn't summon GNU tar, you may still use it via
# something like
#    make -f MakeFC tar_sips TAR=/usr/local/gnu/bin/tar
TAR=tar

SHELL = /bin/sh

#--------------- Target definitions
# $PROG          -- automatic; built when no target is specified
# lib            -- test w/o its driver, i.e. any subroutines/functions
#                   these are built into an object named libmisc.a

#                           (functional)
# configure      -- runs mlsconfigure to (re)set compiler, platform, paths
#                  also (re)creates uniquely-named sub-sub-directories
#                  with custom Makefiles where *.o, *.mod, etc. built
# depends        -- runs makemakedep.sh to calculate dependencies
# mostlyclean    -- deletes uniquely-named sub-sub-directories
# clean          -- deletes only *.o, *.mod from sub-subs
# tar            -- creates a directory archive suitable for distribution
#

#----------------------------------------------------------

PROG=test

#----------------------- Build instructions

$(PROG): $(CONFDIR)/$(MLSCFILE) $(PLATFORMS)/$(MLSCONFG)
		cd $(PLATFORMS)/$(MLSCONFG) && $(MAKE) $(PROG)

lib:
		cd $(PLATFORMS)/$(MLSCONFG) && $(MAKE) libmisc.a

.PHONY: configure depends clean ghostbuster lib mostlyclean tar tarz targ test update

tar:

configure:
	$(MLSBIN)/mlsconfigure -dc "$(CONFDIR)" -pc "$(PLATFORMS)" \
          -c "$(MLSF95)" -p "$(MLSPLAT)" -cf "$(MLSCFILE)"

$(CONFDIR)/$(MLSCFILE):
	$(MLSBIN)/mlsconfigure -dc "$(CONFDIR)" -pc "$(PLATFORMS)" \
          -c "$(MLSF95)" -p "$(MLSPLAT)" -cf "$(MLSCFILE)"

$(PLATFORMS)/$(MLSCONFG): $(CONFDIR)/$(MLSCFILE)
	$(MLSBIN)/mlsconfigure -dc "$(CONFDIR)" -pc "$(PLATFORMS)" \
          -c "$(MLSF95)" -p "$(MLSPLAT)" -cf "$(MLSCFILE)" -nc

depends:
	temp_name_1=`${UNIQUE_NAME} 1` ;\
	$(MLSBIN)/makemakedep.sh -p $$temp_name_1 ; \
     mv $$temp_name_1 Makefile.dep

ghostbuster:
	$(MLSBIN)/ghostbuster.sh $(PLATFORMS)/$(MLSCONFG) ./

update:
	@@cd ../.. ; \
   $(MAKE) update SUBDIRS= tests_sub_dirs=tests/misc

mostlyclean:
	@@echo "Cleaning directory $(MLSCONFG)" ; \
	if [ "$(MLSCONFG)" != "" ] ; then  \
		echo "Deleting $(MLSCONFG) files" ; \
		rm -f $(PLATFORMS)/$(MLSCONFG)/* ; \
	fi ; \
	if [ -d "$(PLATFORMS)/$(MLSCONFG)" ] ; then  \
		echo "Deleting $(MLSCONFG) directory" ; \
		rmdir $(PLATFORMS)/$(MLSCONFG) ; \
	fi
	rm -f Make.dep.*

clean:
	@@echo "Cleaning objects from directory $(MLSCONFG)" ; \
	if [ "$(MLSCONFG)" != "" ] ; then  \
		rm -f $(PLATFORMS)/$(MLSCONFG)/*.[ao] ; \
		rm -f $(PLATFORMS)/$(MLSCONFG)/*.mod ; \
		rm -f $(PLATFORMS)/$(MLSCONFG)/$(PROG) ; \
	fi
	rm -f Make.dep.*

tar:
	rm -f ../$(PROG).tar
	@@echo "tar-ing misc"; \
	$(TAR) hcvf ../$(PROG).tar * --exclude CVS\
	--exclude Make.dep\* --exclude NAG.\* --exclude LF95.\*

tarz: tar
	@@echo "... then gzipping it"; \
	cd ..; rm -f $(PROG).tgz; gzip $(PROG).tar; mv $(PROG).tar.gz $(PROG).tgz

targ:
	rm -f ../$(PROG).tgz
	$(TAR) hcvzf ../$(PROG).tgz * --exclude \*.o --exclude \*.mod --exclude test

# $Log: MakeFC,v $
# Revision 1.6  2015/08/10 22:26:38  pwagner
# Last Changes before switching over entirely to makefile
#
# Revision 1.5  2005/06/23 22:10:41  pwagner
# Reworded Copyright statement
#
# Revision 1.4  2003/04/30 23:04:55  pwagner
# Now lets you make update in each subdirectory
#
# Revision 1.3  2002/09/25 23:25:43  pwagner
# Uses unique names for temp files
#
# Revision 1.2  2002/04/26 23:37:47  pwagner
# Changes to allow building libs, too
#
# Revision 1.1  2001/06/14 22:18:42  pwagner
# First commit
#
@


1.6
log
@Last Changes before switching over entirely to makefile
@
text
@d14 1
a14 1
# "$Id: MakeFC,v 1.5 2005/06/23 22:10:41 pwagner Exp $"
d146 3
@


1.5
log
@Reworded Copyright statement
@
text
@d14 1
a14 1
# "$Id: MakeFC,v 1.4 2003/04/30 23:04:55 pwagner Exp $"
d16 1
a16 1
MakeFName = MakeFC
d146 3
@


1.4
log
@Now lets you make update in each subdirectory
@
text
@d3 10
a12 2
# Copyright (c) 2002, California Institute of Technology.  ALL RIGHTS RESERVED.
# U.S. Government Sponsorship under NASA Contract NAS7-1407 is acknowledged.
d14 1
a14 1
# "$Id: MakeFC,v 1.3 2002/09/25 23:25:43 pwagner Exp $"
d146 3
@


1.3
log
@Uses unique names for temp files
@
text
@d6 1
a6 1
# "$Id: MakeFC,v 1.2 2002/04/26 23:37:47 pwagner Exp $"
d74 1
a74 1
.PHONY: configure depends clean ghostbuster lib mostlyclean tar tarz targ test
d98 4
d138 3
@


1.2
log
@Changes to allow building libs, too
@
text
@d6 1
a6 1
# "$Id: MakeFC,v 1.1 2001/06/14 22:18:42 pwagner Exp $"
d35 8
d91 3
a93 1
	$(MLSBIN)/makemakedep.sh 
d134 3
@


1.1
log
@First commit
@
text
@d3 1
a3 1
# Copyright (c) 1999, California Institute of Technology.  ALL RIGHTS RESERVED.
d6 1
a6 2
#special case:
# "$Id: MakeFC,v 1.1 2001/02/01 23:11:12 pwagner Exp $"
d28 1
a28 1
# w/o complaining if it does nor exist yet
d31 4
d40 3
a42 1
# $PROG          -- automatic; built when target is not specified
d63 4
a66 1
.PHONY: configure depends clean tar mostlyclean tarz targ test ghostbuster
d124 3
@

