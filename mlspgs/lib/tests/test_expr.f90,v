head	1.1;
access;
symbols
	v5-02-NRT-19:1.1
	v6-00:1.1
	v5-02-NRT-18:1.1
	v5-02:1.1
	v5-01-NRT-17:1.1
	v5-01-NRT-16:1.1
	v5-01-NRT-15:1.1
	v5-01-NRT-14:1.1
	neuralnetworks-1-0:1.1.0.16
	cfm-single-freq-0-1:1.1.0.14
	v5-01:1.1
	v5-00:1.1
	v4-23-TA133:1.1.0.12
	mus-emls-1-70:1.1.0.10
	rel-1-0-englocks-work:1.1.0.8
	VUMLS1-00:1.1
	VPL1-00:1.1
	V4-22-NRT-08:1.1
	VAM1-00:1.1
	V4-21:1.1.0.6
	V4-13:1.1
	V4-12:1.1
	V4-11:1.1
	V4-10:1.1
	V3-43:1.1
	M4-00:1.1
	V3-41:1.1
	V3-40-PlusGM57:1.1.0.4
	V2-24-NRT-04:1.1
	V3-33:1.1
	V2-24:1.1
	V3-31:1.1
	V3-30-NRT-05:1.1
	cfm-01-00:1.1
	V3-30:1.1
	V3-20:1.1
	V3-10:1.1
	V2-23-NRT-02:1.1
	V2-23:1.1
	V2-22-NRT-01:1.1
	V2-22:1.1
	V2-21:1.1
	V2-20:1.1
	V2-11:1.1
	V2-10:1.1
	V2-00:1.1
	V1-51:1.1
	V1-50:1.1
	V1-45:1.1
	V1-44:1.1
	V1-43:1.1
	V1-42:1.1
	V1-41:1.1
	V1-32:1.1
	V1-40:1.1
	V1-31:1.1
	V1-30:1.1
	V1-13:1.1
	V1-12:1.1
	V1-11:1.1
	V1-10:1.1
	newfwm-feb03:1.1.0.2
	V1-04:1.1
	V1-03:1.1
	V1-02:1.1
	V1-00:1.1;
locks; strict;
comment	@# @;


1.1
date	2001.12.17.23.54.55;	author vsnyder;	state Exp;
branches;
next	;


desc
@@


1.1
log
@Initial commit
@
text
@! Copyright (c) 1999, California Institute of Technology.  ALL RIGHTS RESERVED.
! U.S. Government Sponsorship under NASA Contract NAS7-1407 is acknowledged.

! Contact: Van Snyder, vsnyder@@math.jpl.nasa.gov

!=============================================================================
program Test_Expr

  use Expr_Eval_m, only: Expr_Eval, Error, Help, Trace

  implicit NONE

  character(len=127) :: Line(1)
  character(len=127) :: Me
  integer :: C, L
  logical :: Many = .false.   ! Set by -m option, overrides "once"
  logical :: Once = .false.   ! Set if an expression is provided on the
                              ! command line

  double precision :: Value

  !---------------------------- RCS Ident Info -------------------------------
  character (len=*), parameter :: IdParm = &
    & "$Id: expr_eval_m.f90,v 2.1 2001/12/17 23:39:55 vsnyder Exp $"
  character (len=len(idParm)) :: Id = IdParm
  character (len=*), parameter :: ModuleName= &
    & "$RCSfile: expr_eval_m.f90,v $"
  !---------------------------------------------------------------------------

! trace = .true.
  ! Process command line arguments.
  ! If you don't have getarg, comment this out.
  call getarg ( 0, me )
  c = 0
  do 
    c = c + 1
    call getarg ( c, line )
    if ( line(1)(1:3) == '-h' .or. line(1)(1:3) == '-? ' ) then
      write ( *, '(3a)' ) 'Usage: ', trim(me), ' [options] [expr]'
      write ( *, '(a)' )  ' Options: -h => This stuff'
      write ( *, '(2a)' ) '          -m => Do Many expressions even if there''s', &
        &                 ' one on the command line'
      write ( *, '(a)' )  '          -t => Trace execution'      
      call help
      stop
    end if
    if ( line(1)(1:3) == '-m ' ) then
      many = .true.
    else if ( line(1)(1:3) == '-t ' ) then
      trace = .true.
    else
      once = .not. many .and. (line(1) /= ' ')
      exit
    end if
  end do
  ! End of command line processing
  do
    if ( line(1) == ' ' ) read ( *, '(a)', end=99 ) line
    value = expr_eval ( line, c, l )
    if ( error ) then
      print *, trim(me), ': Syntax error at line ', l, ', column ', c
    else
      print *, value
    end if
    if ( once ) exit
    line = ' '
  end do
99 stop
end program Test_Expr 

! $Log: $
@
