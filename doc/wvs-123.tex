\documentclass[11pt]{article}
\usepackage{alltt}
\usepackage[fleqn]{amsmath}
\usepackage{floatflt}
\usepackage{graphicx}
\usepackage{longtable}
\usepackage[strings]{underscore}

\textwidth 6.5in
\oddsidemargin -0.25in
%\evensidemargin -0.5in
\topmargin -0.5in
\textheight 9in

\newcommand{\docname}{wvs-123}
\newcommand{\docdate}{28 April 2015}

\ifx\pdfoutput\undefined
  \pdfoutput=0
  \usepackage[hypertex,plainpages,hyperindex=true]{hyperref}
  \hypersetup{%
    hypertexnames=false%
  }
  % Specify the driver for the color package
  \ExecuteOptions{dvips}
  %\ExecuteOptions{xdvi}
\else
  \ifnum\pdfoutput>0
    \usepackage[pdftex,plainpages,hyperindex=true,pdfpagelabels]{hyperref}
    \hypersetup{%
      hypertexnames=false,%
      colorlinks=true,%
      linktocpage=true,%
    }
    % Specify the driver for the color package
    \ExecuteOptions{pdftex}
  \else
    \usepackage[hypertex,plainpages,hyperindex=true]{hyperref}
    \hypersetup{%
      hypertexnames=false%
    }
    % Specify the driver for the color package
    \ExecuteOptions{dvips}
    %\ExecuteOptions{xdvi}
  \fi
\fi

\hyperbaseurl{}
\newcommand\hr[1]{\href{#1.dvi}{dvi}, \href{#1.pdf}{pdf}}
\newcommand\h[1]{#1 (\hr{#1})}

\begin{document}

%\tracingcommands=1
\newlength{\hW} % heading box width
\newlength{\pW} % page number field width
\settowidth{\hW}{\bf\docname}
\settowidth{\pW}{Page \pageref{lastpage}\ of \pageref{lastpage}}
\ifdim \pW > \hW \setlength{\hW}{\pW} \fi
\makeatletter
\def\@biblabel#1{#1.}
\newcommand{\ps@twolines}{%
  \renewcommand{\@oddhead}{%
    \docdate\hfill\parbox[t]{\hW}{{\hfill\bf\docname}\newline
                          Page \thepage\ of \pageref{lastpage}}}%
\renewcommand{\@evenhead}{}%
\renewcommand{\@oddfoot}{}%
\renewcommand{\@evenfoot}{}%
}%
\makeatother
\pagestyle{twolines}

\newcommand{\TS}{T_\text{scat}}
\newcommand{\TSs}[1]{T_{\text{scat}_{#1}}}
\newcommand{\DB}{\Delta B}
\newcommand{\oDB}{\overline{\DB}}
\newcommand{\MT}{\mathcal{T}}
\newcommand{\hMT}{\MT^s}
\newcommand{\IF}[1]{\,\mathcal{A}_n\!\left(#1\right)} % Interpolation Function

\vspace{-10pt}
\begin{tabbing}
\phantom{References: }\= \\
To: \>Bill, Nathaniel, Paul, Michael, Van\\
Subject: \>Magnetic field specification in l2cf\\
From: \>Van Snyder\\
Reference: \> \h{wvs-121}, \h{wvs-122}
\end{tabbing}

\parindent 0pt \parskip 6pt
\vspace{-10pt}

There are restrictions and assumptions concerning how the magnetic field
is specified and filled in the {\tt l2cf}

If the tangent point geocentric altitude quantity and the spacecraft
velocity quantity are specified, the magnetic field is evaluated at
specified altitudes on vectors computed from the tangent position by
rotation in the viewing plane by angles specified in the cross-angles
field, if the field is specified; otherwise, it is computed at the
tangent point.  See \h{wvs-122}.  Cross-track viewing is assumed, even
if the tangent point is in the orbit plane and there are no nonzero
values for the cross-angles field.  Otherwise, it is calculated at
positions specified by its {\tt hGrid} and {\tt vGrid} fields.

\begin{itemize}

\item The vertical co{\"o}rdinate of the magnetic field must be {\tt
  zeta}, geodetic altitude ({\tt geodAltitude}), or geocentric height
  ({\tt geocAltitude}).

\item If there is any position in the cross-track direction, other than
  the tangent point, at which the magnetic field is desired, this is
  specified by the {\tt xGrid} field of the {\tt quantity} statement. 
  The {\tt xGrid} field must specify an {\tt hGrid} of explicit type. 
  If cross-track viewing is desired, but the magnetic field is needed
  only at the tangent point, the {\tt xGrid} field need not be
  specified.

\item If a spacecraft velocity quantity ({\tt ScVelECR}) and a tangent
  point geocentric altitude quantity ({\tt geocAltitudeQuantity}) are
  specified in the {\tt fill} statement, they must be compatible.  If
  they are specified, cross-track viewing is assumed, even if the
  tangent point is actually in the orbit plane.  Either both must be
  provided, or neither can be provided.

  The horizontal grid of the magnetic field quantity
  {\large\bfseries\sffamily MUST NOT} be shared!

  The {\tt ForwardModelGeometry} geometry calculation used by the {\tt
  fill} statement reallocates the latitude and longitude components of
  the magnetic field quantity template, and calculates values for them! 
  If the vertical co{\"o}rdinate is geocentric altitude, the computed
  latitude is geocentric latitude; otherwise it is geodetic latitude.

\item If the vertical co{\"o}rdinate of the magnetic field is {\tt
  zeta}, a GPH quantity must be provided in the {\tt fill} statement,
  and a tangent point geocentric altitude quantity ({\tt
  geocAltitudeQuantity}) cannot be provided in the {\tt fill} statement.
  That is, a {\tt zeta} vertical co{\"o}rdinate cannot be used with
  cross-track viewing.

  We cannot calculate the geolocations of the positions in the magnetic
  field until the relationship between zeta and geocentric height is
  computed, but we cannot calculate the geolocations at which to compute
  this relationship until the desired geolocations in the magnetic field
  have been computed.

\item The numbers of instances of the magnetic field quantity and the
  tangent point geocentric altitude quantity ({\tt
  geocAltitudeQuantity}) must be equal.  The tangent point geocentric
  altitude is a minor-frame quantity, and the magnetic field is a
  profile quantity.  If we ever want to process more than one MAF per
  chunk, this problem must be addressed.

\item If the magnetic field quantity has a cross-angles grid ({\tt
  xGrid}) and any of the angles are not zero, then both a tangent point
  geocentric altitude quantity ({\tt geocAltitudeQuantity}) and a
  spacecraft velocity quantity ({\tt ScVelECR}) must be specified in the
  {\tt fill} statement.

\end{itemize}

\label{lastpage}
\vspace*{-0.1in} % Somehow, this causes lastpage to be defined
\end{document}

% $Id$

% $Log$
